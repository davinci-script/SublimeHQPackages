// SYNTAX TEST "Packages/DAVI/DAVI.sublime-syntax"
<?davi

/******************************************************************************
 * DAVIDoc Tests
 *****************************************************************************/

/* ?> */
// <- comment.block.davi punctuation.definition.comment.begin.davi
//^^^^ comment.block.davi - punctuation
//    ^^ comment.block.davi punctuation.definition.comment.end.davi

/* <?davi ... ?> */
// <- comment.block.davi punctuation.definition.comment.begin.davi
//^^^^^^^^^^^^^^ comment.block.davi - punctuation

// comment ?> <div>
//^^^^^^^^^^^ text.html.davi meta.embedded.davi
//           ^^^^^^^ text.html.davi - meta.embedded
// ^^^^^^^^ comment.line.double-slash.davi
//         ^^ punctuation.section.embedded.end.davi

<?davi

/**
//^ comment.block.documentation.davidoc.davi punctuation.definition.comment.begin.davi
// ^ comment.block.documentation.davidoc.davi - punctuation
   */
//^ comment.block.davi - punctuation
// ^^ comment.block.davi punctuation.definition.comment.end.davi

/**
   No longer a davidoc comment since no leading *
 * @return
//   ^ comment.block - entity.name.tag.documentation.davidoc
 */
// ^ source - comment.block

/**
    *
//  ^ comment.block.documentation.davidoc.davi punctuation.definition.comment.davi
*/

/** @var Properties: class properties. */
//  ^ entity.name.tag.documentation.davidoc
//       ^ - entity.name.tag.documentation.davidoc

/** @var @var Properties: class properties. */
//  ^ entity.name.tag.documentation.davidoc
//       ^ - entity.name.tag.documentation.davidoc

/**@var Properties: class properties. */
// ^^^^ - entity.name.tag.documentation.davidoc

/** @var@var Properties: class properties. */
//  ^^^^^^^^ - entity.name.tag.documentation.davidoc

/* No davidoc highlight since there are not two * after the opening /
 * @return
//   ^ comment.block - entity.name.tag.documentation.davidoc
 */

/**
 * @access
// ^^^^^^^ entity.name.tag.documentation.davidoc.davi
 */

/**
 * @access public
// ^^^^^^^ entity.name.tag.documentation.davidoc.davi
//         ^^^^^^ storage.modifier.access.davi
 */

/**
 * @access protected
// ^^^^^^^ entity.name.tag.documentation.davidoc.davi
//         ^^^^^^^^^ storage.modifier.access.davi
 */

/**
 * @access private
// ^^^^^^^ entity.name.tag.documentation.davidoc.davi
//         ^^^^^^^ storage.modifier.access.davi
 */

/**
 * @access priv
// ^^^^^^^ entity.name.tag.documentation.davidoc.davi
//         ^^^^ - storage
 */

/**
 * @xlink
// ^^^^^^ entity.name.tag.documentation.davidoc.davi
 */

/**
 * @xlink https://docs.davidoc.org/latest/guide/references/davidoc/inline-tags/link.html
// ^^^^^^ entity.name.tag.documentation.davidoc.davi
//        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ markup.underline.link
 */

/**
 * @link http://www.compressconsult.com/huffman/  Hinweise zum Algorithmus.
// ^^^^^ entity.name.tag.documentation.davidoc.davi
//       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ markup.underline.link
 */

/**
 * This is an inline {@link http://inline.com} in a comment.
//                   ^^^^^^^^^^^^^^^^^^^^^^^^^ meta.tag.inline.davidoc
//                   ^ punctuation.definition.tag.begin.davidoc
//                    ^^^^^ entity.name.tag.documentation.davidoc.davi
//                          ^^^^^^^^^^^^^^^^^ markup.underline.link
//                                           ^ punctuation.definition.tag.end.davidoc
 */

/**
 * This is an inline {@link http://inline.com description} in a comment.
//                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.tag.inline.davidoc
//                   ^ punctuation.definition.tag.begin.davidoc
//                    ^^^^^ entity.name.tag.documentation.davidoc.davi
//                          ^^^^^^^^^^^^^^^^^ markup.underline.link
//                                            ^^^^^^^^^^^ meta.label.davidoc.davi
//                                                       ^ punctuation.definition.tag.end.davidoc
 */

/**
 * @api Methods: declares that elements are suitable for consumption by third parties.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @author Any: documents the author of the associated element.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @category File, Class: groups a series of packages together.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @copyright Any: documents the copyright information for the associated element.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @deprecated Any: indicates that the associated element is deprecated and can be removed in a future version.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @example Any: shows the code of a specified example file or, optionally, just a portion of it.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @filesource File: includes the source of the current file for use in the output.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @global Variable: informs daviDocumentor of a global variable or its usage.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @ignore Any: tells daviDocumentor that the associated element is not to be included in the documentation.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @internal Any: denotes that the associated elements is internal to this application or library and hides it by default.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @license File, Class: indicates which license is applicable for the associated element.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @link Any: indicates a relation between the associated element and a page of a website.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @method Class: allows a class to know which ‘magic’ methods are callable.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @package File, Class: categorizes the associated element into a logical grouping or subdivision.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @param Method, Function: documents a single argument of a function or method.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @property Class: allows a class to know which ‘magic’ properties are present.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @property-read Class: allows a class to know which ‘magic’ properties are present that are read-only.
//  ^^^^^^^^^^^^^ entity.name.tag.documentation.davidoc
 */

/**
 * @property-write Class: allows a class to know which ‘magic’ properties are present that are write-only.
//  ^^^^^^^^^^^^^^ entity.name.tag.documentation.davidoc
 */

/**
 * @return Method, Function: documents the return value of functions or methods.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @see Any: indicates a reference from the associated element to a website or other elements.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @since Any: indicates at which version the associated element became available.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @source Any, except File: shows the source code of the associated element.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @subpackage File, Class: categorizes the associated element into a logical grouping or subdivision.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @throws Method, Function: indicates whether the associated element could throw a specific type of exception.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @todo Any: indicates whether any development activity should still be executed on the associated element.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @uses Any: indicates a reference to (and from) a single associated element.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @var Properties: class properties.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @version Any: indicates the current version of Structural Elements.
//  ^ entity.name.tag.documentation.davidoc
 */

/**
 * @after
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @afterClass
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @backupGlobals
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @backupStaticAttributes
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @before
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @beforeClass
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @codeCoverageIgnore
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @covers
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @coversDefaultClass
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @coversNothing
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @dataProvider
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @depends
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @doesNotPerformAssertions
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @expectedException
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @expectedExceptionCode
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @expectedExceptionMessage
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @expectedExceptionMessageRegExp
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @group
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @large
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @medium
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @preserveGlobalState
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @requires
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @runTestsInSeparateProcesses
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @runInSeparateProcess
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @small
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @test
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @testdox
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @testWith
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @ticket
//  ^ entity.name.tag.documentation.daviunit
 */

/**
 * @param @param
// ^^ entity.name.tag.documentation.davidoc
//        ^^ - entity.name.tag.documentation.davidoc
 */

/**
 * @param@param
// ^^^^^^^^^^^^ - entity.name.tag.documentation.davidoc
 */

/**
 *@param
// ^ - entity.name.tag.documentation.davidoc
 */

/**
 * DAVI comment from issue #1378
 *
 * @see
 * @author
 * @package
 * @version
 NOTE: Modified */
//^^^^^^^^^^^^^^^^ comment.block - comment.block.documentation
//              ^^ punctuation.definition.comment.end
//                ^ - comment


/******************************************************************************
 * Namespace Declarations Tests
 *****************************************************************************/

namespace MyNamespace;
// <- meta.namespace.davi keyword.declaration.namespace.davi
//^^^^^^^^^^^^^^^^^^^ meta.namespace.davi - meta.path
//                   ^ - meta.namespace
//^^^^^^^ keyword.declaration.namespace.davi
//        ^^^^^^^^^^^ entity.name.namespace.davi
//                   ^ punctuation.terminator.statement.davi - entity.name.namespace

namespace \MyNamespace;
// <- meta.namespace.davi keyword.declaration.namespace.davi
//^^^^^^^^ meta.namespace.davi - meta.path
//        ^^^^^^^^^^^^ meta.namespace.davi meta.path.davi
//                    ^ - meta.namespace
//^^^^^^^ keyword.declaration.namespace.davi
//        ^ punctuation.accessor.namespace.davi
//         ^^^^^^^^^^^ entity.name.namespace.davi
//                    ^ punctuation.terminator.statement.davi - entity.name.namespace

namespace ParentNs\MyNamespace;
// <- meta.namespace.davi keyword.declaration.namespace.davi
//^^^^^^^^ meta.namespace.davi - meta.path
//        ^^^^^^^^^^^^^^^^^^^^ meta.namespace.davi meta.path.davi
//                            ^ - meta.namespace
//^^^^^^^ keyword.declaration.namespace.davi
//        ^^^^^^^^ variable.namespace.davi
//                ^ punctuation.accessor.namespace.davi
//                 ^^^^^^^^^^^ entity.name.namespace.davi
//                            ^ punctuation.terminator.statement.davi - entity.name.namespace

namespace \ParentNs\MyNamespace;
// <- meta.namespace.davi keyword.declaration.namespace.davi
//^^^^^^^^ meta.namespace.davi - meta.path
//        ^^^^^^^^^^^^^^^^^^^^^ meta.namespace.davi meta.path.davi
//                             ^ - meta.namespace
//^^^^^^^ keyword.declaration.namespace.davi
//        ^ punctuation.accessor.namespace.davi
//         ^^^^^^^^ variable.namespace.davi
//                 ^ punctuation.accessor.namespace.davi
//                  ^^^^^^^^^^^ entity.name.namespace.davi
//                             ^ punctuation.terminator.statement.davi - entity.name.namespace


/******************************************************************************
 * Use Declarations Tests
 *****************************************************************************/

use
// <- meta.use.davi keyword.declaration.use.davi
//^ meta.use.davi keyword.declaration.use.davi

use \MyClass
// <- meta.use.davi keyword.declaration.use.davi
//^^ meta.use.davi - meta.path
//  ^^^^^^^^ meta.use.davi meta.path.davi
//          ^ meta.use.davi - meta.path
//^ keyword.declaration.use.davi
//  ^ punctuation.accessor.namespace.davi
//   ^^^^^^^ support.class.davi

use
    \MyClass
//^^ meta.use.davi - meta.path
//  ^^^^^^^^ meta.use.davi meta.path.davi
//          ^ meta.use.davi - meta.path
//  ^ punctuation.accessor.namespace.davi
//   ^^^^^^^ support.class.davi

use \FilterIterator
// <- meta.use.davi keyword.declaration.use.davi
//^^ meta.use.davi - meta.path
//  ^^^^^^^^^^^^^^^ meta.use.davi meta.path.davi
//                 ^ meta.use.davi - meta.path
//^ keyword.declaration.use.davi
//  ^ punctuation.accessor.namespace.davi
//   ^^^^^^^^^^^^^^ support.class.builtin.davi

use MyNamespace\Foo ;
// <- meta.use.davi keyword.declaration.use.davi
//^^ meta.use.davi - meta.path
//  ^^^^^^^^^^^^^^^ meta.use.davi meta.path.davi
//                 ^ meta.use.davi - meta.path
//                  ^ - meta.use
//^ keyword.declaration.use.davi
//  ^^^^^^^^^^^ variable.namespace.davi
//             ^ punctuation.accessor.namespace.davi
//              ^^^ support.class.davi - constant - entity - support.function - support.other
//                  ^ punctuation.terminator.statement.davi

use /* Comment */ \MyNamespace\Bar;
// <- meta.use.davi keyword.declaration.use.davi
//^^^^^^^^^^^^^^^^ meta.use.davi - meta.path
//                ^^^^^^^^^^^^^^^^ meta.use.davi meta.path.davi
//                                ^ - meta.use
//^ keyword.declaration.use.davi
//  ^^^^^^^^^^^^^ comment.block.davi
//                ^ punctuation.accessor.namespace.davi
//                 ^^^^^^^^^^^ variable.namespace.davi
//                            ^ punctuation.accessor.namespace.davi
//                             ^^^ support.class.davi - constant - entity - support.function - support.other
//                                ^ punctuation.terminator.statement.davi

use /**/ My\Full\Classname /**/ as /**/ Another # Foo baz
// <- meta.use.davi keyword.declaration.use.davi
//^^^^^^^ meta.use.davi - meta.path
//       ^^^^^^^^^^^^^^^^^ meta.use.davi meta.path.davi
//                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.use.davi - meta.path
//^ keyword.declaration.use.davi
//  ^^^^ comment.block.davi
//       ^^ variable.namespace.davi
//         ^ punctuation.accessor.namespace.davi
//          ^^^^ variable.namespace.davi
//              ^ punctuation.accessor.namespace.davi
//               ^^^^^^^^^ support.class.davi - constant - entity - support.function - support.other
//                         ^^^^ comment.block.davi
//                              ^^ keyword.other.as.davi
//                                 ^^^^ comment.block.davi
//                                      ^^^^^^^ entity.name.class.davi
//                                              ^^^^^^^^^^ comment.line.number-sign.davi
, My\Full\NSname;
// <- meta.use.davi punctuation.separator.sequence.davi
//^^^^^^^^^^^^^^ meta.use.davi meta.path.davi
//              ^ - meta.use - meta.path
//^^ variable.namespace.davi
//  ^ punctuation.accessor.namespace.davi
//   ^^^^ variable.namespace.davi
//       ^ punctuation.accessor.namespace.davi
//        ^^^^^^ support.class.davi - constant - entity - support.function - support.other
//              ^ punctuation.terminator.statement.davi

use function /**/ some\nspace\fn_a;
// <- meta.use.davi keyword.declaration.use.davi
//^^^^^^^^^^^^^^^^ meta.use.davi - meta.path
//                ^^^^^^^^^^^^^^^^ meta.use.davi meta.path.davi
//                                ^ - meta.use - meta.path
//^ keyword.declaration.use.davi
//  ^^^^^^^^ keyword.declaration.function.davi
//           ^^^^ comment.block.davi
//                ^^^^ variable.namespace.davi
//                    ^ punctuation.accessor.namespace.davi
//                      ^^^^^ variable.namespace.davi
//                           ^ punctuation.accessor.namespace.davi
//                            ^^^^ support.function.davi - constant - entity support.class - support.other
//                                ^ punctuation.terminator.statement.davi

use
    function /**/ some\nspace\fn_a;
//^^^^^^^^^^^^^^^^ meta.use.davi - meta.path
//                ^^^^^^^^^^^^^^^^ meta.use.davi meta.path.davi
//                                ^ - meta.use - meta.path
//  ^^^^^^^^ keyword.declaration.function.davi
//           ^^^^ comment.block.davi
//                ^^^^ variable.namespace.davi
//                    ^ punctuation.accessor.namespace.davi
//                      ^^^^^ variable.namespace.davi
//                           ^ punctuation.accessor.namespace.davi
//                            ^^^^ support.function.davi - constant - entity support.class - support.other
//                                ^ punctuation.terminator.statement.davi

use /**/ function /**/ some\nspace\fn_a /**/ as /**/ fn_b;
// <- meta.use.davi keyword.declaration.use.davi
//^^^^^^^^^^^^^^^^^^^^^ meta.use.davi - meta.path
//                     ^^^^^^^^^^^^^^^^ meta.use.davi meta.path.davi
//                                     ^^^^^^^^^^^^^^^^^^ meta.use.davi - meta.path
//                                                       ^ - meta.use - meta.path
//^ keyword.declaration.use.davi
//  ^^^^ comment.block.davi
//       ^^^^^^^^ keyword.declaration.function.davi
//                ^^^^ comment.block.davi
//                     ^^^^ variable.namespace.davi
//                         ^ punctuation.accessor.namespace.davi
//                          ^^^^^^ variable.namespace.davi
//                                ^ punctuation.accessor.namespace.davi
//                                 ^^^^ support.function.davi - constant - entity support.class - support.other
//                                      ^^^^ comment.block.davi
//                                           ^^ keyword.other.as.davi
//                                              ^^^^ comment.block.davi
//                                                   ^^^^ entity.name.function.davi
//                                                       ^ punctuation.terminator.statement.davi

use const /**/ some\nspace\ConstValue /**/ as /**/ Foo;
// <- meta.use.davi keyword.declaration.use.davi
//^^^^^^^^^^^^^ meta.use.davi - meta.path
//             ^^^^^^^^^^^^^^^^^^^^^^ meta.use.davi meta.path.davi
//                                   ^^^^^^^^^^^^^^^^^ meta.use.davi - meta.path
//                                                    ^ - meta.use - meta.path
//^ keyword.declaration.use.davi
//  ^^^^^ keyword.declaration.constant.davi
//        ^^^^ comment.block.davi
//             ^^^^^^^^^^^^^^^^^^^^^^ meta.path.davi
//             ^^^^ variable.namespace.davi
//                 ^ punctuation.accessor.namespace.davi
//                  ^^^^^^ variable.namespace.davi
//                        ^ punctuation.accessor.namespace.davi
//                         ^^^^^^^^^^ constant.other.davi - support.function.davi - entity.name - support.class.davi - variable.namespace
//                                    ^^^^ comment.block.davi
//                                         ^^ keyword.other.as.davi
//                                            ^^^^ comment.block.davi
//                                                 ^^^ entity.name.constant.davi
//                                                    ^ punctuation.terminator.statement.davi

use
    const /**/ some\nspace\ConstValue /**/
//^^^^^^^^^^^^^ meta.use.davi - meta.path
//             ^^^^^^^^^^^^^^^^^^^^^^ meta.use.davi meta.path.davi
//                                   ^^^^^^ meta.use.davi - meta.path
//  ^^^^^ keyword.declaration.constant.davi
//        ^^^^ comment.block.davi
//             ^^^^^^^^^^^^^^^^^^^^^^ meta.path.davi
//             ^^^^ variable.namespace.davi
//                 ^ punctuation.accessor.namespace.davi
//                  ^^^^^^ variable.namespace.davi
//                        ^ punctuation.accessor.namespace.davi
//                         ^^^^^^^^^^ constant.other.davi - support.function.davi - entity.name - support.class.davi - variable.namespace
//                                    ^^^^ comment.block.davi
    as /**/ Foo;
// ^^^^^^^^^^^^ meta.use.davi - meta.path
//             ^ - meta.use - meta.path
//  ^^ keyword.other.as.davi
//     ^^^^ comment.block.davi
//          ^^^ entity.name.constant.davi
//             ^ punctuation.terminator.statement.davi

// Unfortunately we don't know if these identifiers are namespaces or classes
// so we can't disambiguate. Generally we are just going to assume an "as" is
// a class name so that the definition of the class can be found via the index.
use some\nspace\{ClassA, ClassB, ClassC as C};
// <- meta.use.davi keyword.declaration.use.davi
//^^ meta.use.davi - meta.path
//  ^^^^^^^^^^^^ meta.use.davi meta.path.davi - meta.sequence
//              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.use.davi meta.sequence.list.davi
//                                           ^ - meta.use - meta.path
//  ^^^^ variable.namespace.davi
//      ^ punctuation.accessor.namespace.davi
//       ^^^^^^ variable.namespace.davi
//             ^ punctuation.accessor.namespace.davi
//              ^ punctuation.section.sequence.begin.davi
//               ^^^^^^ support.class.davi - constant - entity - support.function - support.other
//                     ^ punctuation.separator.sequence.davi
//                       ^^^^^^ support.class.davi - constant - entity - support.function - support.other
//                             ^ punctuation.separator.sequence.davi
//                               ^^^^^^ support.class.davi - constant - entity - support.function - support.other
//                                      ^^ keyword.other.as.davi
//                                         ^ entity.name.class.davi
//                                          ^ punctuation.section.sequence.end.davi
//                                           ^ punctuation.terminator.statement.davi

use function some\nspace\{fn_d, fn_e, fn_f as fn_g};
// <- meta.use.davi keyword.declaration.use.davi
//^^^^^^^^^^^ meta.use.davi - meta.path
//           ^^^^^^^^^^^^ meta.use.davi meta.path.davi - meta.sequence
//                       ^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.use.davi meta.sequence.list.davi
//                                                 ^ - meta.use - meta.path
//  ^^^^^^^^ keyword.declaration.function.davi
//           ^^^^ variable.namespace.davi
//               ^ punctuation.accessor.namespace.davi
//                ^^^^^^ variable.namespace.davi
//                      ^ punctuation.accessor.namespace.davi
//                       ^ punctuation.section.sequence.begin.davi
//                        ^^^^ support.function.davi - constant - entity - support.class - support.other
//                            ^ punctuation.separator.sequence.davi
//                              ^^^^ support.function.davi - constant - entity - support.class - support.other
//                                  ^ punctuation.separator.sequence.davi
//                                    ^^^^ support.function.davi - constant - entity - support.class - support.other
//                                         ^^ keyword.other.as.davi
//                                            ^^^^ entity.name.function.davi
//                                                ^ punctuation.section.sequence.end.davi
//                                                 ^ punctuation.terminator.statement.davi

use const some\nspace\{ConstA, ConstB AS ConstD, TRUE};
// <- meta.use.davi keyword.declaration.use.davi
//^^^^^^^^ meta.use.davi - meta.path
//        ^^^^^^^^^^^^ meta.use.davi meta.path.davi - meta.sequence
//                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.use.davi meta.sequence.list.davi
//                                                    ^ - meta.use - meta.path
//  ^^^^^ keyword.declaration.constant.davi
//        ^^^^ variable.namespace.davi
//            ^ punctuation.accessor.namespace.davi
//             ^^^^^^ variable.namespace.davi
//                   ^ punctuation.accessor.namespace.davi
//                    ^ punctuation.section.sequence.begin.davi
//                     ^^^^^^ constant.other - entity - support.class - support.function - support.other
//                           ^ punctuation.separator.sequence.davi
//                             ^^^^^^ constant.other - entity - support.class - support.function - support.other
//                                    ^^ keyword.other.as.davi
//                                       ^^^^^^ entity.name.constant.davi - constant - support.class - support.function - support.other
//                                             ^ punctuation.separator.sequence.davi
//                                               ^^^^ constant.language.boolean - entity - support.class - support.function - support.other
//                                                   ^ punctuation.section.sequence.end.davi
//                                                    ^ punctuation.terminator.statement.davi


/******************************************************************************
 * Annotation Tests
 *****************************************************************************/

  # [WithoutArgument]
//^^^^^^^^^^^^^^^^^^^ comment
  ##[WithoutArgument]
//^^^^^^^^^^^^^^^^^^^ comment

  #[WithoutArgument]
//^^ meta.annotation.davi - comment
//  ^^^^^^^^^^^^^^^ meta.annotation.identifier.davi
//                 ^ meta.annotation.davi
//                  ^ - meta.annotation
//^^ punctuation.definition.annotation.begin.davi
//  ^^^^^^^^^^^^^^^ variable.annotation.davi - meta.path
//                 ^ punctuation.definition.annotation.end.davi
  #[WithoutArgument()]
//^^ meta.annotation.davi
//  ^^^^^^^^^^^^^^^ meta.annotation.identifier.davi
//                 ^^ meta.annotation.arguments.davi meta.group.davi
//                   ^ meta.annotation.davi - meta.group
//                    ^ - meta.annotation
//^^ punctuation.definition.annotation.begin.davi
//  ^^^^^^^^^^^^^^^ variable.annotation.davi - meta.path
//                 ^ punctuation.section.group.begin.davi
//                  ^ punctuation.section.group.end.davi
//                   ^ punctuation.definition.annotation.end
  #[SingleArgument(0)]
//^^ meta.annotation.davi
//  ^^^^^^^^^^^^^^ meta.annotation.identifier.davi
//                ^^^ meta.annotation.arguments.davi meta.group.davi
//                   ^ meta.annotation.davi - meta.group
//                    ^ - meta.annotation
//^^ punctuation.definition.annotation.begin.davi
//  ^^^^^^^^^^^^^^ variable.annotation.davi - meta.path
//                ^ punctuation.section.group.begin.davi
//                 ^ constant.numeric.value.davi
//                  ^ punctuation.section.group.end.davi
//                   ^ punctuation.definition.annotation.end
  #[FewArguments('Hello', 'World')]
//^^ meta.annotation.davi
//  ^^^^^^^^^^^^ meta.annotation.identifier.davi
//              ^^^^^^^^^^^^^^^^^^ meta.annotation.arguments.davi meta.group.davi
//                                ^ meta.annotation.davi - meta.group
//                                 ^ - meta.annotation
//^^ punctuation.definition.annotation.begin.davi
//  ^^^^^^^^^^^^ variable.annotation.davi - meta.path
//              ^ punctuation.section.group.begin.davi
//               ^^^^^^^ string.quoted.single.davi
//                      ^ punctuation.separator.sequence.davi
//                        ^^^^^^^ string.quoted.single.davi
//                               ^ punctuation.section.group.end.davi
//                                ^ punctuation.definition.annotation.end.davi
  #[FewArguments(PDO::class, DAVI_VERSION_ID), SecondOne(0)]
//^^ meta.annotation.davi
//  ^^^^^^^^^^^^ meta.annotation.identifier.davi
//              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.annotation.arguments.davi meta.group.davi
//                                          ^^ meta.annotation.davi - meta.group
//                                            ^^^^^^^^^ meta.annotation.identifier.davi - meta.group
//                                                     ^^^ meta.annotation.arguments.davi meta.group.davi
//                                                        ^ meta.annotation.davi - meta.group
//                                                         ^ - meta.annotation
//^^ punctuation.definition.annotation.begin
//  ^^^^^^^^^^^^ variable.annotation.davi - meta.path
//              ^ punctuation.section.group.begin.davi
//               ^^^ support.class.builtin.davi
//                  ^^ punctuation.accessor.double-colon.davi
//                    ^^^^^ variable.language.class.java
//                         ^ punctuation.separator.sequence.davi
//                           ^^^^^^^^^^^^^^ support.constant.core.davi
//                                         ^ punctuation.section.group.end.davi
//                                          ^ punctuation.separator.sequence.davi
//                                            ^^^^^^^^^ variable.annotation.davi
//                                                     ^ punctuation.section.group.begin.davi
//                                                      ^ constant.numeric.value.davi
//                                                       ^ punctuation.section.group.end.davi
//                                                        ^ punctuation.definition.annotation.end.davi
  #[\My\Attributes\FewArguments("foo", "bar")]
//^^ meta.annotation.davi - meta.path - meta.group
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.annotation.identifier.davi meta.path.davi - meta.group
//                             ^^^^^^^^^^^^^^ meta.annotation.arguments.davi meta.group.davi - meta.path
//                                           ^ meta.annotation.davi - meta.group
//                                            ^ - meta.annotation
//^^ punctuation.definition.annotation.begin
//  ^ punctuation.accessor.namespace.davi
//   ^^ variable.namespace.davi
//     ^ punctuation.accessor.namespace.davi
//      ^^^^^^^^^^ variable.namespace.davi
//                ^ punctuation.accessor.namespace.davi
//                 ^^^^^^^^^^^^ variable.annotation.davi
//                             ^ punctuation.section.group.begin.davi
//                              ^^^^^ string.quoted.double.davi
//                                   ^ punctuation.separator.sequence.davi
//                                     ^^^^^ string.quoted.double.davi
//                                          ^ punctuation.section.group.end.davi
//                                           ^ punctuation.definition.annotation.end.davi
/** docblock */
// <- comment.block
  #[BitShiftExample(4 >> 1, 4 << 1)]
//^^ meta.annotation.davi
//  ^^^^^^^^^^^^^^^ meta.annotation.identifier.davi
//                 ^^^^^^^^^^^^^^^^ meta.annotation.arguments.davi meta.group.davi
//                                 ^ meta.annotation.davi - meta.group
//                                  ^ - meta.annotation
//^^ punctuation.definition.annotation.begin
//  ^^^^^^^^^^^^^^^ variable.annotation.davi
//                 ^ punctuation.section.group.begin.davi
//                  ^ constant.numeric.value.davi
//                    ^^ keyword.operator.bitwise.davi
//                       ^ constant.numeric.value.davi
//                        ^ punctuation.separator.sequence.davi
//                          ^ constant.numeric.value.davi
//                            ^^ keyword.operator.bitwise.davi
//                               ^ constant.numeric.value.davi
//                                ^ punctuation.section.group.end.davi
//                                 ^ punctuation.definition.annotation.end.davi
function foo() {}
// <- keyword.declaration.function

  #[ExampleAttribute]
//^^^^^^^^^^^^^^^^^^^ meta.annotation
//^^ punctuation.definition.annotation.begin
//  ^^^^^^^^^^^^^^^^ variable.annotation.davi - meta.path
//                  ^ punctuation.definition.annotation.end
class Foo
{
    #[ExampleAttribute]
//  ^^^^^^^^^^^^^^^^^^^ meta.annotation
//  ^^ punctuation.definition.annotation.begin
//    ^^^^^^^^^^^^^^^^ variable.annotation.davi - meta.path
//                    ^ punctuation.definition.annotation.end
    public const FOO = 'foo';

    #[ExampleAttribute]
//  ^^^^^^^^^^^^^^^^^^^ meta.annotation
//  ^^ punctuation.definition.annotation.begin
//    ^^^^^^^^^^^^^^^^ variable.annotation.davi - meta.path
//                    ^ punctuation.definition.annotation.end
    #[ORM\Column("string", ORM\Column::UNIQUE)]
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.annotation
//  ^^ punctuation.definition.annotation.begin
//    ^^^^^^^^^^ meta.path
//              ^ punctuation.section.group.begin
//               ^^^^^^^^ string.quoted.double
//                       ^ punctuation.separator
//                         ^^^^^^^^^^ meta.path
//                                   ^^ punctuation.accessor.double-colon
//                                     ^^^^^^ constant.other
//                                           ^ punctuation.section.group.end
//                                            ^ punctuation.definition.annotation.end
    #[Assert\Email(["message" => "The email '{{ value }}' is not a valid email."])]
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.annotation
//  ^^ punctuation.definition.annotation.begin
//    ^^^^^^^^^^^^ meta.path
//                ^ punctuation.section.group.begin
//                 ^ punctuation.section.sequence.begin
//                  ^^^^^^^^^ string.quoted.double
//                            ^^ punctuation.separator.key-value.davi
//                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ string.quoted.double
//                                                                              ^ punctuation.section.sequence.end
//                                                                               ^ punctuation.section.group.end
//                                                                                ^ punctuation.definition.annotation.end
    public $x;

    #[ExampleAttribute] // comment
//  ^^^^^^^^^^^^^^^^^^^ meta.annotation
//  ^^ punctuation.definition.annotation.begin
//    ^^^^^^^^^^^^^^^^ variable.annotation.davi - meta.path
//                    ^ punctuation.definition.annotation.end
//                      ^^^^^^^^^^ comment
    public function foo(#[ExampleAttribute] \Foo\Bar $bar) { }
//                      ^^^^^^^^^^^^^^^^^^^ meta.annotation
//                      ^^ punctuation.definition.annotation.begin
//                        ^^^^^^^^^^^^^^^^ variable.annotation.davi - meta.path
//                                        ^ punctuation.definition.annotation.end
//                                          ^^^^^^^^ meta.path
//                                                   ^^^^ variable.parameter

    #[Route("/api/posts/{id}", methods: ["GET", "HEAD"])]
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.annotation
//  ^^ punctuation.definition.annotation.begin
//    ^^^^^ variable.annotation.davi - meta.path
//         ^ punctuation.section.group.begin
//                           ^ punctuation.separator
//                             ^^^^^^^ variable.parameter.named
//                                    ^ keyword.operator.assignment.davi
//                                                     ^ punctuation.section.group.end
//                                                      ^ punctuation.definition.annotation.end
    public function show(int $id) { }
}

$object = new #[ExampleAttribute] class () { };
//        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.instantiation.davi
//            ^^^^^^^^^^^^^^^^^^^ meta.annotation
//            ^^ punctuation.definition.annotation.begin
//              ^^^^^^^^^^^^^^^^ variable.annotation.davi - meta.path
//                              ^ punctuation.definition.annotation.end
//                                ^^^^^^ meta.class.davi - meta.group - meta.block
//                                      ^^ meta.class.davi meta.group - meta.block
//                                        ^ meta.class.davi - meta.group - meta.block
//                                         ^^^ meta.class.davi meta.block - meta.group
//                                ^^^^^ keyword.declaration.class.davi
//                                      ^ punctuation.section.group.begin.davi
//                                       ^ punctuation.section.group.end.davi
//                                         ^ punctuation.section.block.begin.davi
//                                           ^ punctuation.section.block.end.davi

$f2 = #[ExampleAttribute] function () { };
//    ^^^^^^^^^^^^^^^^^^^ meta.annotation
//    ^^ punctuation.definition.annotation.begin
//      ^^^^^^^^^^^^^^^^ variable.annotation.davi - meta.path
//                      ^ punctuation.definition.annotation.end
//                        ^^^^^^^^ keyword.declaration.function

$f3 = #[ExampleAttribute] fn () => 1;
//    ^^^^^^^^^^^^^^^^^^^ meta.annotation
//    ^^ punctuation.definition.annotation.begin
//      ^^^^^^^^^^^^^^^^ variable.annotation.davi - meta.path
//                      ^ punctuation.definition.annotation.end
//                        ^^ keyword.declaration.function
//                              ^^ keyword.declaration.function.arrow


/******************************************************************************
 * Class Declaration Tests
 *****************************************************************************/

    readonly class
//  ^^^^^^^^ storage.modifier.davi
//           ^^^^^ meta.class.davi keyword.declaration.class.davi
//                ^ meta.class.davi - keyword

    class Test1
//  ^^^^^^^^^^^^ meta.class.davi - meta.block - meta.class meta.class
//  ^^^^^ keyword.declaration.class.davi
//        ^^^^^ entity.name.class.davi

    class Test2 extends implements {}
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - meta.class meta.class, - meta.block meta.block
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.class.davi - meta.block
//                                 ^^ meta.class.davi meta.block.davi
//  ^^^^^ keyword.declaration.class.davi
//        ^^^^^ entity.name.class.davi
//              ^^^^^^^ storage.modifier.extends.davi
//                      ^^^^^^^^^^ storage.modifier.implements.davi

    readonly class Test3 extends stdClass implements Countable {}
// ^ - meta.class
//           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - meta.class meta.class, - meta.block meta.block
//           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.class.davi - meta.block
//                                                             ^^ meta.class.davi meta.block.davi
//  ^^^^^^^^ storage.modifier.davi
//           ^^^^^ keyword.declaration.class.davi
//                 ^^^^^ entity.name.class.davi
//                       ^^^^^^^ storage.modifier.extends.davi
//                               ^^^^^^^^ entity.other.inherited-class.davi support.class.builtin.davi - meta.path
//                                        ^^^^^^^^^^ storage.modifier.implements.davi
//                                                   ^^^^^^^^^ entity.other.inherited-class.davi support.class.builtin.davi - meta.path

    class Test4 extends Foo, Bar implements Foo, Bar {}
// ^ - meta.class
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - meta.class meta.class, - meta.block meta.block
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.class.davi - meta.block
//                                                   ^^ meta.class.davi meta.block.davi
//  ^^^^^ keyword.declaration.class.davi
//        ^^^^^ entity.name.class.davi
//              ^^^^^^^ storage.modifier.extends.davi
//                      ^^^ entity.other.inherited-class.davi
//                         ^ - punctuation
//                           ^^^ - entity
//                               ^^^^^^^^^^ storage.modifier.implements.davi
//                                          ^^^ entity.other.inherited-class.davi
//                                             ^ punctuation.separator.sequence.davi
//                                               ^^^ entity.other.inherited-class.davi
//                                                   ^ punctuation.section.block.begin.davi
//                                                    ^ punctuation.section.block.end.davi

    class Test5 extends \Foo\ implements \Bar\ {}
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - meta.class meta.class, - meta.block meta.block
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.class.davi - meta.block
//                                             ^^ meta.class.davi meta.block.davi
//  ^^^^^ keyword.declaration.class.davi
//        ^^^^^ entity.name.class.davi
//              ^^^^^^^ storage.modifier.extends.davi
//                      ^ punctuation.accessor.namespace.davi
//                       ^^^ variable.namespace.davi
//                          ^ punctuation.accessor.namespace.davi
//                            ^^^^^^^^^^ storage.modifier.implements.davi
//                                       ^ punctuation.accessor.namespace.davi
//                                        ^^^ variable.namespace.davi
//                                           ^ punctuation.accessor.namespace.davi

    ABSTRACT CLASS /**/ #[Anno] /**/ Test6 /**/ EXTENDS /**/ #[Anno] /**/ \My\Foo /**/ IMPLEMENTS /**/ #[Anno] /**/ Bar /**/, /**/ Baz /**/ {  }
//           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.class.davi
//  ^^^^^^^^ storage.modifier.davi
//           ^^^^^ keyword.declaration.class.davi
//                 ^^^^ comment.block.davi
//                      ^^^^^^^ meta.annotation
//                              ^^^^ comment.block.davi
//                                   ^^^^^ entity.name.class.davi
//                                         ^^^^ comment.block.davi
//                                              ^^^^^^^ storage.modifier.extends.davi
//                                                      ^^^^ comment.block.davi
//                                                           ^^^^^^^ meta.annotation
//                                                                   ^^^^ comment.block.davi
//                                                                        ^^^^^^^ meta.path.davi
//                                                                        ^ punctuation.accessor.namespace.davi
//                                                                         ^^ variable.namespace.davi
//                                                                           ^ punctuation.accessor.namespace.davi
//                                                                            ^^^ entity.other.inherited-class.davi
//                                                                                ^^^^ comment.block.davi
//                                                                                     ^^^^^^^^^^ storage.modifier.implements.davi
//                                                                                                ^^^^ comment.block.davi
//                                                                                                     ^^^^^^^ meta.annotation
//                                                                                                             ^^^^ comment.block.davi
//                                                                                                                  ^^^ entity.other.inherited-class.davi
//                                                                                                                      ^^^^ comment.block.davi
//                                                                                                                          ^ punctuation.separator.sequence.davi
//                                                                                                                            ^^^^ comment.block.davi
//                                                                                                                                 ^^^ entity.other.inherited-class.davi
//                                                                                                                                     ^^^^ comment.block.davi
//                                                                                                                                          ^^^^ meta.block.davi
//                                                                                                                                          ^ punctuation.section.block.begin.davi
//                                                                                                                                             ^ punctuation.section.block.end.davi

class ClassName extends /* */ \MyNamespace\Foo implements \MyNamespace\Baz {
// <- meta.class.davi keyword.declaration.class.davi
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - meta.class meta.class, - meta.block meta.block
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.class.davi - meta.block
//                                                                         ^^ meta.class.davi meta.block.davi
//^^^ keyword.declaration.class.davi
//    ^^^^^^^^^ entity.name.class.davi
//              ^^^^^^^ storage.modifier.extends.davi
//                      ^^^^^ comment.block.davi
//                            ^^^^^^^^^^^^^^^^ meta.path.davi
//                            ^ punctuation.accessor.namespace.davi
//                             ^^^^^^^^^^^ variable.namespace.davi
//                                        ^ punctuation.accessor.namespace.davi
//                                         ^^^ entity.other.inherited-class.davi
//                                             ^^^^^^^^^^ storage.modifier.implements.davi
//                                                        ^^^^^^^^^^^^^^^^ meta.path.davi
//                                                        ^ punctuation.accessor.namespace.davi
//                                                         ^^^^^^^^^^^ variable.namespace.davi
//                                                                    ^ punctuation.accessor.namespace.davi
//                                                                     ^^^ entity.other.inherited-class.davi

    public function __construct(private \MyNamespace\Foo $val = DEFAULT_VALUE) {
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.class.davi meta.block.davi - meta.block meta.block
//                                                                             ^^ meta.class.davi meta.block.davi meta.block.davi
//                  ^^^^^^^^^^^ entity.name.function.constructor.davi
//                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.function.parameters
//                              ^^^^^^^ storage.modifier
//                                      ^^^^^^^^^^^^^^^^ meta.path
//                                                       ^^^^ variable.parameter
//                                                            ^ keyword.operator.assignment
//                                                              ^^^^^^^^^^^^^ constant.other
    }
}


/******************************************************************************
 * Enum Declaration Tests
 *****************************************************************************/

enum
// <- constant.other.davi
//^^ constant.other.davi
//  ^ - constant

enum Suit ;
// <- meta.enum.davi keyword.declaration.enum.davi
//^^^^^^^^ - meta.enum meta.enum
//        ^ - meta.enum
//^^ keyword.declaration.enum.davi
//  ^ - keyword - entity
//   ^^^^ entity.name.enum.davi
//       ^ - entity - punctuation
//        ^ punctuation.terminator.statement.davi

enum Suit : ;
// <- meta.enum.davi keyword.declaration.enum.davi
//^^^^^^^^^^ - meta.enum meta.enum
//          ^ - meta.enum
//^^ keyword.declaration.enum.davi
//  ^ - keyword - entity
//   ^^^^ entity.name.enum.davi
//       ^ - entity - punctuation
//        ^ punctuation.separator.colon.davi
//         ^ - punctuation
//          ^ punctuation.terminator.statement.davi

enum Suit {
// <- meta.enum.davi keyword.declaration.enum.davi
//^^^^^^^^^^ - meta.enum meta.enum, - meta.block meta.block
//^^^^^^^^ meta.enum.davi - meta.block
//        ^^ meta.enum.davi meta.block.davi
//^^ keyword.declaration.enum
//  ^ - keyword - entity
//   ^^^^ entity.name.enum
//       ^ - entity - punctuation
    case Hearts;
//  ^^^^ keyword.control
//       ^^^^^^ entity.name.constant
//             ^ punctuation.terminator.statement.davi
    CASE Diamonds;
//  ^^^^ keyword.control.davi
//       ^^^^^^^^ entity.name.constant.davi
//               ^ punctuation.terminator.statement.davi
    case Clubs;
    case Spades;
}

enum Suit: extends Colorful {}
// <- meta.enum.davi keyword.declaration.enum.davi
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - meta.enum meta.enum, - meta.block meta.block
//^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.enum.davi - meta.block
//                          ^^ meta.enum.davi meta.block.davi
//       ^ punctuation.separator.colon.davi
//         ^^^^^^^ invalid.illegal.disallowed.davi
//                 ^^^^^^^^ - entity
//                          ^ punctuation.section.block.begin.davi
//                           ^ punctuation.section.block.end.davi

enum Suit: string extends Colorful {}
// <- meta.enum.davi keyword.declaration.enum.davi
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - meta.enum meta.enum, - meta.block meta.block
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.enum.davi - meta.block
//                                 ^^ meta.enum.davi meta.block.davi
//       ^ punctuation.separator.colon.davi
//         ^^^^^^ storage.type.primitive.davi
//                ^^^^^^^ invalid.illegal.disallowed.davi
//                        ^^^^^^^^ - entity
//                                 ^ punctuation.section.block.begin.davi
//                                  ^ punctuation.section.block.end.davi

enum Suit: string | mixed extends Colorful {}
// <- meta.enum.davi keyword.declaration.enum.davi
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - meta.enum meta.enum, - meta.block meta.block
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.enum.davi - meta.block
//                                         ^^ meta.enum.davi meta.block.davi
//       ^ punctuation.separator.colon.davi
//         ^^^^^^ storage.type.primitive.davi
//                ^ punctuation.separator.type.union.davi
//                  ^^^^^ storage.type.primitive.davi
//                        ^^^^^^^ invalid.illegal.disallowed.davi
//                                ^^^^^^^^ - entity
//                                         ^ punctuation.section.block.begin.davi
//                                          ^ punctuation.section.block.end.davi

enum Suit: string implements Colorful {
// <- meta.enum.davi keyword.declaration.enum.davi
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - meta.enum meta.enum, - meta.block meta.block
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.enum.davi - meta.block
//                                    ^^ meta.enum.davi meta.block.davi
// ^ keyword.declaration.enum.davi
//   ^^^^ entity.name.enum.davi
//       ^ punctuation.separator.colon.davi
//         ^^^^^^ storage.type.primitive.davi
//                ^^^^^^^^^^ storage.modifier.implements.davi
//                           ^^^^^^^^ entity.other.inherited-class.davi
//                                    ^ punctuation.section.block.begin.davi
    case Hearts = 'H';
//  ^^^^ keyword.control
//       ^^^^^^ entity.name.constant
//              ^ keyword.operator.assignment
//                ^^^ string.quoted.single
    case Diamonds = 'D';
    case Clubs = 'C';
    case Spades = 'S';

    public function color(): string {
//  ^^^^^^ storage.modifier
//         ^^^^^^^^ keyword.declaration.function
//                  ^^^^^ entity.name.function
//                         ^ punctuation.separator
//                           ^^^^^^ storage.type.primitive.davi
        return match($this) {
            Suit::Hearts, Suit::Diamonds => 'Red',
            Suit::Clubs, Suit::Spaces => 'Black',
        };
    }
}

enum Test1 extends Foo, Bar implements Foo, Bar {}
// <- meta.enum.davi keyword.declaration.enum.davi
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - meta.enum meta.enum, - meta.block meta.block
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.enum.davi - meta.block
//                                              ^^ meta.enum.davi meta.block.davi
//^^ keyword.declaration.enum.davi
//   ^^^^^ entity.name.enum.davi
//         ^^^^^^^ invalid.illegal.disallowed.davi
//                 ^^^ - entity
//                    ^ - punctuation
//                      ^^^ - entity
//                          ^^^^^^^^^^ storage.modifier.implements.davi
//                                     ^^^ entity.other.inherited-class.davi
//                                        ^ punctuation.separator.sequence.davi
//                                          ^^^ entity.other.inherited-class.davi
//                                              ^ punctuation.section.block.begin.davi
//                                               ^ punctuation.section.block.end.davi


/******************************************************************************
 * Interface Declaration Tests
 *****************************************************************************/

interface
// <- meta.interface.davi keyword.declaration.interface.davi
//^^^^^^^^ meta.interface.davi - meta.block

interface MyInter {}
// <- meta.interface.davi keyword.declaration.interface.davi
//^^^^^^^^^^^^^^^^ meta.interface.davi - meta.block
//                ^^ meta.interface.davi meta.block.davi
//        ^^^^^^^ entity.name.interface.davi
//                ^ punctuation.section.block.begin.davi
//                 ^ punctuation.section.block.end.davi

interface MyInter implements Foo {}
// <- meta.interface.davi keyword.declaration.interface.davi
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.interface.davi - meta.block
//                               ^^ meta.interface.davi meta.block.davi
//        ^^^^^^^ entity.name.interface.davi
//                ^^^^^^^^^^ invalid.illegal.disallowed.davi
//                           ^^^ - entity - support
//                               ^ punctuation.section.block.begin.davi
//                                ^ punctuation.section.block.end.davi

interface MyInter2 extends \MyNamespace\Foo, /**/ \ArrayAccess {
// <- meta.interface.davi keyword.declaration.interface.davi
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.interface.davi - meta.block
//                                                             ^^ meta.interface.davi meta.block.davi
//^^^^^^^ keyword.declaration.interface.davi
//        ^^^^^^^^ entity.name.interface.davi
//                 ^^^^^^^ storage.modifier.extends.davi
//                         ^^^^^^^^^^^^^^^^ meta.path.davi
//                         ^ punctuation.accessor.namespace.davi - entity - support
//                          ^^^^^^^^^^^ variable.namespace.davi
//                                     ^ punctuation.accessor.namespace.davi - entity - support
//                                      ^^^ entity.other.inherited-class.davi
//                                         ^ punctuation.separator.sequence.davi
//                                           ^^^^ comment.block.davi
//                                                ^^^^^^^^^^^^ meta.path.davi
//                                                ^ punctuation.accessor.namespace.davi - entity - support
//                                                 ^^^^^^^^^^^ entity.other.inherited-class.davi support.class.builtin.davi
}


/******************************************************************************
 * Trait Declaration Tests
 *****************************************************************************/

trait
// <- meta.trait.davi keyword.declaration.trait.davi
//^^^ meta.trait.davi keyword.declaration.trait.davi
//   ^ meta.trait.davi - keyword

trait A
// <- meta.trait.davi keyword.declaration.trait.davi
//^^^^^^ meta.trait.davi
//^^^ keyword.declaration.trait.davi
//    ^ entity.name.trait.davi
{
// <- meta.trait.davi meta.block.davi punctuation.section.block.begin.davi
}
// <- meta.trait.davi meta.block.davi punctuation.section.block.end.davi


/******************************************************************************
 * Class Member Declaration Tests
 *****************************************************************************/

class B
// ^ keyword.declaration.class
//    ^ entity.name.class
{
    use MyNamespace\Xyz,
//  ^^^^ meta.class.davi meta.block.davi meta.use.davi - meta.path
//      ^^^^^^^^^^^^^^^ meta.class.davi meta.block.davi meta.use.davi meta.path.davi
//                     ^^ meta.class.davi meta.block.davi meta.use.davi - meta.path
//      ^^^^^^^^^^^ variable.namespace.davi
//                 ^ punctuation.accessor.namespace.davi
//                  ^^^ entity.other.inherited-class.davi
//                     ^ punctuation.separator.sequence.davi
    Y,
//  ^ meta.use entity.other.inherited-class - meta.path
    Z {
// ^^^ meta.class.davi meta.block.davi meta.use.davi - meta.block meta.block
//  ^ entity.other.inherited-class.davi - meta.path.davi
//    ^^ meta.class.davi meta.block.davi meta.use.davi meta.block.davi
//    ^ punctuation.section.block.begin.davi
        X::method1 as another1;
//      ^^^^^^^^^^ meta.use.davi meta.block.davi - meta.path
//                ^^^^^^^^^^^^^^ meta.use.davi meta.block.davi - meta.path
//      ^ support.class.davi
//       ^^ punctuation.accessor.double-colon.davi
//         ^^^^^^^ variable.function.davi
//                 ^^ keyword.other.as.davi
//                    ^^^^^^^^ entity.name.function.davi
//                            ^ punctuation.terminator.statement.davi
        Y::method2 insteadof X;
//      ^^^^^^^^^^ meta.use.davi meta.block.davi - meta.path
//                ^^^^^^^^^^^ meta.use.davi meta.block.davi - meta.path
//                           ^ meta.use.davi meta.block.davi - meta.path
//                            ^^ meta.use.davi meta.block.davi - meta.path
//      ^ support.class.davi
//       ^^ punctuation.accessor.double-colon.davi
//         ^^^^^^^ variable.function.davi
//                 ^^^^^^^^^ keyword.other.insteadof
//                           ^ support.class.davi
//                            ^ punctuation.terminator.statement.davi
        X::method2 as another2;
//      ^^^^^^^^^^ meta.use.davi meta.block.davi - meta.path
//                ^^^^^^^^^^^^^^ meta.use.davi meta.block.davi - meta.path
//      ^ support.class.davi
//       ^^ punctuation.accessor.double-colon.davi
//         ^^^^^^^ - support.class
//                 ^^ keyword.other.as
//                    ^^^^^^^^ entity.name.function.davi
//                            ^ punctuation.terminator.statement.davi
        \Foo\Bar\X::method as another3;
//      ^^^^^^^^^^ meta.use.davi meta.block.davi meta.path.davi
//                ^^^^^^^^^^^^^^^^^^^^ meta.use.davi meta.block.davi - meta.path
//      ^ punctuation.accessor.namespace.davi
//       ^^^ variable.namespace.davi
//          ^ punctuation.accessor.namespace.davi
//           ^^^ variable.namespace.davi
//              ^ punctuation.accessor.namespace.davi
//               ^ support.class.davi
//                ^^ punctuation.accessor.double-colon.davi
//                  ^^^^^^ variable.function.davi
//                         ^^ keyword.other.as.davi
//                            ^^^^^^^^ entity.name.function.davi
//                                    ^ punctuation.terminator.statement.davi
        parent::method as another4;
//      ^^^^^^ variable.language.super.davi
//            ^^ punctuation.accessor.double-colon.davi
//              ^^^^^^ variable.function.davi
//                     ^^ keyword.other.as.davi
//                        ^^^^^^^^ entity.name.function.davi
//                                ^ punctuation.terminator.statement.davi

    } protected $pro1;
//  ^ meta.class.davi meta.block.davi meta.use.davi meta.block.davi punctuation.section.block.end.davi
//   ^^^^^^^^^^^^^^^^^^ meta.class.davi meta.block.davi - meta.use
//    ^ storage.modifier

    public const STR_1
//  ^^^^^^ storage.modifier
//         ^^^^^ keyword.declaration.constant.davi
//               ^^^^^ entity.name.constant.davi

    public
//  ^^^^^^ storage.modifier
      const
//    ^^^^^ keyword.declaration.constant.davi
      STR_1
//    ^^^^^ entity.name.constant.davi
      =
//    ^ keyword.operator.assignment.davi
      '';
//    ^^ string.quoted.single.davi

    public const STR_1 = '';
//  ^^^^^^ storage.modifier
//         ^^^^^ keyword.declaration.constant.davi
//               ^^^^^ entity.name.constant.davi
//                     ^ keyword.operator.assignment

    const STR_2 = '';
//  ^^^^^ keyword.declaration.constant.davi
//        ^^^^^ entity.name.constant.davi
//              ^ keyword.operator.assignment

    CONST #[attr] /**/ STR_3 = array();
//  ^^^^^ keyword.declaration.constant.davi
//        ^^^^^^^ meta.annotation
//                ^^^^ comment.block.davi
//                     ^^^^^ entity.name.constant.davi
//                           ^ keyword.operator.assignment
//                             ^^^^^ support.function.array.davi

    // typed class constants

    private const int A
//  ^^^^^^^ storage.modifier.access.davi
//          ^^^^^ keyword.declaration.constant.davi
//                ^^^ meta.type.davi storage.type.primitive.davi
//                    ^ entity.name.constant.davi

    private const int A = 1;
//  ^^^^^^^ storage.modifier.access.davi
//          ^^^^^ keyword.declaration.constant.davi
//                ^^^ meta.type.davi storage.type.primitive.davi
//                    ^ entity.name.constant.davi
//                      ^ keyword.operator.assignment.davi
//                        ^ constant.numeric.value.davi
//                         ^ punctuation.terminator.statement.davi

    public const mixed B = 1;
//  ^^^^^^ storage.modifier.access.davi
//         ^^^^^ keyword.declaration.constant.davi
//               ^^^^^ meta.type.davi storage.type.primitive.davi
//                     ^ entity.name.constant.davi
//                       ^ keyword.operator.assignment.davi
//                         ^ constant.numeric.value.davi
//                          ^ punctuation.terminator.statement.davi

    public
//  ^^^^^^ storage.modifier.access.davi
      const
//    ^^^^^ keyword.declaration.constant.davi
      mixed
//    ^^^^^ meta.type.davi storage.type.primitive.davi
      B
//    ^ entity.name.constant.davi
      =
//    ^ keyword.operator.assignment.davi
      1;
//    ^ constant.numeric.value.davi
//     ^ punctuation.terminator.statement.davi

    public const Foo|Stringable|null D = null;
//  ^^^^^^ storage.modifier.access.davi
//         ^^^^^ keyword.declaration.constant.davi
//               ^^^^^^^^^^^^^^^^^^^ meta.block.davi meta.type.davi
//               ^^^ support.class.davi
//                  ^ punctuation.separator.type.union.davi
//                   ^^^^^^^^^^ support.class.builtin.davi
//                             ^ punctuation.separator.type.union.davi
//                              ^^^^ storage.type.primitive.davi
//                                   ^ entity.name.constant.davi
//                                     ^ keyword.operator.assignment.davi
//                                       ^^^^ constant.language.null.davi
//                                           ^ punctuation.terminator.statement.davi

    public
//  ^^^^^^ storage.modifier.access.davi
      const
//    ^^^^^ keyword.declaration.constant.davi
      Foo|Stringable|null
//    ^^^^^^^^^^^^^^^^^^^ meta.block.davi meta.type.davi
//    ^^^ support.class.davi
//       ^ punctuation.separator.type.union.davi
//        ^^^^^^^^^^ support.class.builtin.davi
//                  ^ punctuation.separator.type.union.davi
//                   ^^^^ storage.type.primitive.davi
      D
//    ^ entity.name.constant.davi
      =
//    ^ keyword.operator.assignment.davi
      null;
//    ^^^^ constant.language.null.davi
//        ^ punctuation.terminator.statement.davi

    public function __construct(
        public readonly int $val = 1
//      ^^^^^^ storage.modifier
//             ^^^^^^^^ storage.modifier
    ) {}

    public function __construct($val) {
//                  ^^^^^^^^^^^ entity.name.function.constructor.davi support.function.magic.davi
        $this->prop = $val;
    }

    public function __debugInfo() {
//                  ^^^^^^^^^^^ entity.name.function.davi support.function.magic.davi
        return [
            'propSquared' => $this->prop ** 2,
        ];
    }

    public function __toString()
//                  ^^^^^^^^^^ entity.name.function.davi support.function.magic.davi
//                            ^^ meta.function.parameters.davi punctuation.section.group
    {
        return $this->prop;
    }

    public function __toStringTest()
//                  ^^^^^^^^^^^^^^ entity.name.function.davi
//                                ^^ - entity.name.function.davi
    {
        return $this->prop;
    }

    public function __test()
//                  ^^^^^^ entity.name.function.davi
    {
    }

    public function abc(
//         ^ keyword.declaration.function
//                  ^ entity.name.function.davi
        Foo|\Foo\Bar|?int $param1,
//      ^^^ support.class
//         ^ punctuation.separator.type
//          ^ punctuation.accessor.namespace
//           ^^^ variable.namespace
//              ^ punctuation.accessor.namespace
//               ^^^ support.class
//                  ^ punctuation.separator.type
//                   ^ storage.type.nullable
//                    ^^^ storage.type
//                        ^ punctuation.definition.variable
//                         ^^^^^^ variable.parameter
        Foo|\Foo\Bar|?int $param2,
//      ^^^ support.class
//         ^ punctuation.separator.type
//          ^ punctuation.accessor.namespace
//           ^^^ variable.namespace
//              ^ punctuation.accessor.namespace
//               ^^^ support.class
//                  ^ punctuation.separator.type
//                   ^ storage.type.nullable
//                    ^^^ storage.type
//                        ^ punctuation.definition.variable
//                         ^^^^^^ variable.parameter
        callable $param3,
//      ^^^^^^^^ storage.type
//               ^ punctuation.definition.variable
//                ^^^^^^ variable.parameter
        mixed $param3,
//      ^^^^^ storage.type
//            ^ punctuation.definition.variable
//             ^^^^^^ variable.parameter
        $param4
//      ^ punctuation.definition.variable
//       ^^^^^^ variable.parameter
    ): Foo|\Foo\Bar|?int|parent|self|static {}
//     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.function.return-type.davi
//     ^^^ support.class
//        ^ punctuation.separator.type
//         ^ punctuation.accessor.namespace
//          ^^^ variable.namespace
//             ^ punctuation.accessor.namespace
//              ^^^ support.class
//                 ^ punctuation.separator.type
//                  ^ storage.type.nullable
//                   ^^^ storage.type
//                      ^ punctuation.separator.type
//                       ^^^^^^ variable.language.super.davi
//                             ^ punctuation.separator.type.union.davi
//                              ^^^^ variable.language.this.davi
//                                  ^ punctuation.separator.type.union.davi
//                                   ^^^^^^ variable.language.static.davi
    {
        echo B::class;
//      ^^^^ support.function.builtin.davi
//           ^ support.class.davi
//            ^^ punctuation.accessor.double-colon.davi
//              ^^^^^ variable.language.class.java

        echo $this->pro1::FOO;
//      ^^^^ support.function.builtin.davi
//           ^^^^^ variable.language.this.davi
//                ^^ punctuation.accessor
//                  ^^^^ variable.other.member
//                      ^^ punctuation.accessor.double-colon.davi
//                        ^^^ constant.other.member.davi

        print $this->pro1::bar();
//      ^^^^ support.function.builtin.davi
//            ^^^^^ variable.language.this.davi
//                 ^^ punctuation.accessor
//                   ^^^^ variable.other.member
//                       ^^ punctuation.accessor
//                         ^^^ variable.function

        parent
//      ^^^^^^ variable.language.super.davi
        parent::abc($var, $var2, $var3);
//      ^^^^^^ variable.language.super.davi
//            ^^ punctuation.accessor.double-colon.davi
//              ^^^ variable.function.davi

        self
//      ^^^^ variable.language.this.davi
        self::abc($var, $var2, $var3);
//      ^^^^ variable.language.this.davi
//          ^^ punctuation.accessor.double-colon.davi
//            ^^^ variable.function.davi

        static
//      ^^^^^^ storage.modifier.namespace.davi
        static::abc($var, $var2, $var3);
//      ^^^^^^ variable.language.static.davi
//            ^^ punctuation.accessor.double-colon.davi
//              ^^^ variable.function.davi

        $ClassName::abc($var, $var2, $var3);
//      ^^^^^^^^^^ variable.other.davi
//                ^^ punctuation.accessor.double-colon.davi
//                  ^^^ variable.function.davi

        $this->undo();
//      ^^^^^ variable.language.this.davi
//      ^ punctuation.definition.variable

        $var2 = 'test';
//      ^^^^^ variable.other
//      ^ punctuation.definition.variable

        foreach (A::B() as $c => $d) {}
        //        ^^ punctuation.accessor
        //          ^ variable.function
        //              ^^ keyword.other.as.davi
        //                    ^^ punctuation.separator.key-value.davi

        return new self();
//                 ^^^^ variable.language.this.davi
    }
}


/******************************************************************************
 * Typed Property Tests
 * @link https://wiki.davi.net/rfc/typed_properties_v2
 *****************************************************************************/

class TestTypedProperties {

    public ;
//  ^^^^^^ storage.modifier.access.davi
//        ^^ - meta.type
//         ^ punctuation.terminator.statement.davi

    public ( ;
//  ^^^^^^ storage.modifier.access.davi
//         ^^ meta.type.davi meta.group.davi
//           ^ punctuation.terminator.statement.davi - meta.type

    public ? ;
//  ^^^^^^ storage.modifier.access.davi
//         ^^ meta.type.davi
//         ^ storage.type.nullable.davi
//           ^ punctuation.terminator.statement.davi - meta.type

    public & ;
//  ^^^^^^ storage.modifier.access.davi
//         ^^ meta.type.davi
//         ^ punctuation.separator.type.intersection.davi
//           ^ punctuation.terminator.statement.davi - meta.type

    public | ;
//  ^^^^^^ storage.modifier.access.davi
//         ^^ meta.type.davi
//         ^ punctuation.separator.type.union.davi
//           ^ punctuation.terminator.statement.davi - meta.type

    public $var;
//  ^^^^^^ storage.modifier.access.davi
//        ^^^^^ - meta.type
//         ^^^^ variable.other.davi
//             ^ punctuation.terminator.statement.davi

    public ( $var;
//  ^^^^^^ storage.modifier.access.davi
//         ^^ meta.type.davi meta.group.davi
//           ^^^^^ - meta.type
//           ^^^^ variable.other.davi
//               ^ punctuation.terminator.statement.davi

    public ? $var;
//  ^^^^^^ storage.modifier.access.davi
//         ^^ meta.type.davi
//           ^^^^^ - meta.type
//         ^ storage.type.nullable.davi
//           ^^^^ variable.other.davi
//               ^ punctuation.terminator.statement.davi

    public & $var;
//  ^^^^^^ storage.modifier.access.davi
//        ^^^^^^^ - meta.type
//         ^ - punctuation.separator.type.intersection
//           ^^^^ variable.other.davi
//               ^ punctuation.terminator.statement.davi

    public | $var;
//  ^^^^^^ storage.modifier.access.davi
//         ^^ meta.type.davi
//           ^^^^^ - meta.type
//         ^ punctuation.separator.type.union.davi
//           ^^^^ variable.other.davi
//               ^ punctuation.terminator.statement.davi


    public static ?Foo $str = '';
//  ^^^^^^ storage.modifier.access.davi
//         ^^^^^^ storage.modifier.namespace.davi
//                ^ storage.type.nullable.davi
//                 ^^^ support.class.davi
//                     ^ variable.other.davi punctuation.definition.variable.davi
//                      ^^^ variable.other.davi - punctuation
//                          ^ keyword.operator.assignment.davi
//                            ^^ string.quoted.single.davi

    protected int $int = 0;
//  ^^^^^^^^^ storage.modifier.access.davi
//            ^^^ storage.type.primitive.davi
//                ^^^^ variable.other.davi
//                     ^ keyword.operator.assignment.davi
//                       ^ constant.numeric.value.davi
//                        ^ punctuation.terminator.statement.davi

    private bool $bool = TRUE;
//  ^^^^^^^ storage.modifier.access.davi
//          ^^^^ storage.type.primitive.davi
//               ^^^^^ variable.other.davi
//                     ^ keyword.operator.assignment.davi
//                       ^^^^ constant.language.boolean.true.davi
//                           ^ punctuation.terminator.statement.davi
    private readonly $prop;
//          ^^^^^^^^ storage.modifier

    // All types with the exception of "void" and "callable" are supported
    public int $scalarType;
//  ^^^^^^ storage.modifier.access.davi
//         ^^^ storage.type.primitive.davi
//             ^^^^^^^^^^^ variable.other.davi

    protected ClassName $classType;
//  ^^^^^^^^^ storage.modifier.access.davi
//            ^^^^^^^^^ support.class.davi
//                      ^^^^^^^^^^ variable.other.davi

    private ?ClassName $nullableClassType;
//  ^^^^^^^ storage.modifier.access.davi
//          ^ storage.type.nullable.davi
//           ^^^^^^^^^ support.class.davi
//                     ^^^^^^^^^^ variable.other.davi

    // Types are also legal on static properties
    public static iterable $staticProp;
//  ^^^^^^ storage.modifier.access.davi
//         ^^^^^^ storage.modifier.namespace.davi
//                ^^^^^^^^ storage.type.primitive.davi
//                         ^^^^^^^^^^^ variable.other.davi

    // Types can also be used with the "var" notation
    var bool $flag;
//  ^^^ keyword.declaration.variable.davi
//      ^^^^ storage.type.primitive.davi
//           ^^^^^ variable.other.davi

    // Typed properties may have default values
    public string $str = "foo";
//  ^^^^^^ storage.modifier.access.davi
//         ^^^^^^ storage.type.primitive.davi
//                ^^^^ variable.other.davi
//                     ^ keyword.operator.assignment.davi
//                       ^^^^^ string.quoted.double.davi

    public ?string $nullableStr = null;
//  ^^^^^^ storage.modifier.access.davi
//         ^ storage.type.nullable.davi
//          ^^^^^^ storage.type.primitive.davi
//                 ^^^^^^^^^^^^ variable.other.davi
//                              ^ keyword.operator.assignment.davi
//                                ^^^^ constant.language.null.davi

    // The type applies to all properties in one declaration
    public float $x, $y;
//  ^^^^^^ storage.modifier.access.davi
//         ^^^^^ storage.type.primitive.davi
//               ^^ variable.other.davi
//                 ^ punctuation.separator.sequence.davi
//                   ^^ variable.other.davi

    public static ?Foo|\My\Bar|int $str = '';
//  ^^^^^^ storage.modifier
//         ^^^^^^ storage.modifier
//                ^ storage.type.nullable
//                 ^^^ support.class
//                    ^ punctuation.separator.type
//                     ^ punctuation.accessor.namespace
//                      ^^ variable.namespace
//                        ^ punctuation.accessor.namespace
//                         ^^^ support.class
//                            ^ punctuation.separator.type
//                             ^^^ storage.type
//                                 ^ punctuation.definition.variable
//                                  ^^^ variable.other
//                                      ^ keyword.operator.assignment
}


/******************************************************************************
 * Function Declaration Tests
 *****************************************************************************/

function
// <- keyword.declaration.function.davi

function a
// <- meta.function.davi keyword.declaration.function.davi
//^^^^^^^^^ meta.function.davi
//^^^^^^ keyword.declaration.function.davi
//       ^ entity.name.function.davi

function a($a = array(),             $b = "hi") {};
//^^^^^^^^ meta.function.davi
//        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.function.parameters.davi meta.group.davi
//                                             ^ meta.function.davi - meta.block - meta.group
//                                              ^^ meta.function.davi meta.block.davi
//^^^^^^ keyword.declaration.function.davi
//       ^ entity.name.function.davi
//        ^ punctuation.section.group.begin.davi
//         ^^ variable.parameter.davi
//            ^ keyword.operator.assignment.davi
//              ^^^^^ support.function.array.davi
//                   ^ punctuation.section.group.begin.davi
//                    ^ punctuation.section.group.end.davi
//                     ^ punctuation.separator.sequence.davi
//                                   ^^ variable.parameter.davi
//                                      ^ keyword.operator.assignment.davi
//                                        ^^^^ meta.string.davi string.quoted.double.davi
//                                            ^ punctuation.section.group.end.davi
//                                              ^ punctuation.section.block.begin.davi
//                                               ^ punctuation.section.block.end.davi
//                                                ^ punctuation.terminator.statement.davi

function b($a = [],                  $b = "hi") {};
function c(array $a = array(),       $b = "hi") {};
//                    ^^^^^ meta.function-call.identifier.davi support.function.array.davi
//                         ^ meta.function-call.arguments.davi punctuation.section.group.begin.davi
//                          ^ meta.function-call.arguments.davi punctuation.section.group.end.davi

function d(array $a = [],            $b = "hi") {};
//                    ^ punctuation.section.sequence.begin
//                     ^ punctuation.section.sequence.end

function e(array $a = [1, 2, 3, 4],  $b = "hi") {};
//                    ^ punctuation.section.sequence.begin
//                               ^ punctuation.section.sequence.end

function f(array $a = null,          $b = "hi") {};
function i(
    $a,
//  ^^ variable.parameter
//    ^ punctuation.separator
    $b
//  ^^ variable.parameter
) {};


function array_values_from_keys($arr, $keys) {
    return array_map(fn($x) => $arr[$x], $keys, fn($x) => $arr[$x]);
//         ^^^^^^^^^ meta.function-call.identifier.davi
//                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.function-call.arguments.davi meta.group.davi
//                   ^^ meta.function.anonymous.davi
//                     ^^^^ meta.function.anonymous.parameters.davi meta.group.davi
//                         ^^^^^^^^^^^^ meta.function.anonymous.davi
//                                     ^^^^^^^^^ - meta.function.anonymous
//                                              ^^ meta.function.anonymous.davi
//                                                ^^^^ meta.function.anonymous.parameters.davi meta.group.davi
//                                                    ^^^^^^^^^^^^ meta.function.anonymous.davi
//                                                                ^ - meta.function.anonymous
//                                                                 ^ - meta.function-call
//                   ^^ keyword.declaration.function.davi
//                     ^ punctuation.section.group.begin.davi
//                      ^^ variable.parameter.davi
//                        ^ punctuation.section.group.end.davi
//                          ^^ keyword.declaration.function.arrow.davi
//                                     ^ punctuation.separator.sequence.davi
//                                              ^^ keyword.declaration.function.davi
//                                                ^ punctuation.section.group.begin.davi
//                                                 ^^ variable.parameter.davi
//                                                   ^ punctuation.section.group.end.davi
//                                                     ^^ keyword.declaration.function.arrow.davi
//                                                                ^ punctuation.section.group.end.davi
//                                                                 ^ punctuation.terminator.statement.davi
}

$fn = fn($x) => fn($y) => $x * $y + $z;
//    ^^^^^^^^^^ - meta.function meta.function
//    ^^ meta.function.anonymous.davi
//      ^^^^ meta.function.anonymous.parameters.davi meta.group.davi
//          ^^^^ meta.function.anonymous.davi
//              ^^ meta.function.anonymous.davi meta.function.anonymous.davi
//              ^^^^^^^^^^^^^^^^^^^^^^ - meta.function meta.function meta.function
//                ^^^^ meta.function.anonymous.parameters.davi meta.group.davi
//                    ^^^^^^^^^^^^^^^^ meta.function.anonymous.davi meta.function.anonymous.davi
//                                    ^ - meta.function
//    ^^ keyword.declaration.function.davi
//      ^ punctuation.section.group.begin.davi
//       ^^ variable.parameter.davi
//         ^ punctuation.section.group.end.davi
//           ^^ keyword.declaration.function.arrow.davi
//              ^^ keyword.declaration.function.davi
//                ^ punctuation.section.group.begin.davi
//                 ^^ variable.parameter.davi
//                   ^ punctuation.section.group.end.davi
//                     ^^ keyword.declaration.function.arrow.davi
//                                    ^ punctuation.terminator.statement.davi

$fn = fn ($value): bool => true;
//    ^^^ meta.function.anonymous.davi
//       ^^^^^^^^ meta.function.anonymous.parameters.davi meta.group.davi
//               ^^^^^^^ meta.function.anonymous.return-type.davi
//                      ^^^^^^^ meta.function.anonymous.davi
//                             ^ - meta.function
//    ^^ keyword.declaration.function.davi
//       ^ punctuation.section.group.begin.davi
//        ^^^^^^ variable.parameter.davi
//              ^ punctuation.section.group.end.davi
//               ^ punctuation.separator.colon.davi
//                 ^^^^ storage.type.primitive.davi
//                      ^^ keyword.declaration.function.arrow.davi
//                         ^^^^ constant.language.boolean.true.davi
//                             ^ punctuation.terminator.statement.davi

$fn = fn ($x): stringSpace\Test1 => null;
//    ^^^ meta.function.anonymous.davi
//       ^^^^ meta.function.anonymous.parameters.davi meta.group.davi
//           ^^^^^^^^^^^^^^^^^^^^ meta.function.anonymous.return-type.davi
//                               ^^^^^^^ meta.function.anonymous.davi
//                                      ^ - meta.function
//    ^^ keyword.declaration.function.davi
//       ^ punctuation.section.group.begin.davi
//        ^^ variable.parameter.davi
//          ^ punctuation.section.group.end.davi
//           ^ punctuation.separator.colon.davi
//             ^^^^^^^^^^^^^^^^^ meta.path.davi
//             ^^^^^^^^^^^ variable.namespace.davi
//                        ^ punctuation.accessor.namespace.davi
//                         ^^^^^ support.class.davi
//                               ^^ keyword.declaration.function.arrow.davi
//                                  ^^^^ constant.language.null.davi
//                                      ^ punctuation.terminator.statement.davi

$var = fn($x)
//     ^^ meta.function.anonymous.davi
//       ^^^^ meta.function.anonymous.parameters.davi meta.group.davi
//           ^ meta.function.anonymous.davi
//     ^^ keyword.declaration.function.davi
//       ^ punctuation.section.group.begin.davi
//        ^^ variable.parameter.davi
//          ^ punctuation.section.group.end.davi
   => $x * 2;
//^^^^^^^^^^ meta.function.anonymous.davi
//          ^ - meta.function
// ^^ keyword.declaration.function.arrow
//          ^ punctuation.terminator.statement.davi

$var = fn($x)
//     ^^ meta.function-call.identifier.davi - meta.function.anonymous
//     ^^ variable.function.davi - keyword.declaration.function
;

$var = fn($foo) => return $foo;
//     ^^^^^^^^^^^^ meta.function.anonymous
//                 ^^^^^^^^^^^^^ - meta.function

$var = function(array $ar=array(), ClassName $cls) use ($var1, &$var2) {
//     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - meta.function meta.function
//     ^^^^^^^^ meta.function.davi - meta.group
//             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.function.parameters.davi meta.group.davi
//                                                ^ meta.function.davi
//                                                 ^^^^ meta.function.use.davi - meta.group
//                                                     ^^^^^^^^^^^^^^^ meta.function.use.davi meta.group.davi
//                                                                    ^ meta.function.davi - meta.block
//                                                                     ^^ meta.function.davi meta.block.davi
//     ^^^^^^^^ keyword.declaration.function.davi
//             ^ meta.group.davi punctuation.section.group.begin.davi
//              ^^^^^ storage.type.primitive.davi
//                    ^^^ variable.parameter.davi
//                       ^ keyword.operator.assignment.davi
//                        ^^^^^ support.function.array.davi
//                             ^ punctuation.section.group.begin.davi
//                              ^ punctuation.section.group.end.davi
//                               ^ punctuation.separator.sequence.davi
//                                 ^^^^^^^^^ support.class.davi
//                                           ^^^^ variable.parameter.davi
//                                               ^ punctuation.section.group.end.davi
//                                                 ^^^ keyword.declaration.use.davi
//                                                     ^ punctuation.section.group.begin.davi
//                                                      ^^^^^ variable.other.davi
//                                                           ^ punctuation.separator.sequence.davi
//                                                             ^ keyword.operator.reference.davi
//                                                              ^^^^^ variable.other.davi
//                                                                   ^ punctuation.section.group.end.davi
//                                                                     ^ punctuation.section.block.begin.davi

   some_function(fn() => throw $exception);
//              ^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.function-call.arguments.davi meta.group.davi
//                       ^^^^^^^^^^^^^^^^ meta.function.anonymous.davi
//                       ^^^^^ keyword.control.flow.throw.davi
//                             ^^^^^^^^^^ variable.other.davi
//                                       ^ punctuation.section.group.end.davi

   some_function(fn() => throw $exception, 'some other argument');
//              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.function-call.arguments.davi meta.group.davi
//                       ^^^^^^^^^^^^^^^^ meta.function.anonymous.davi
//                                       ^^^^^^^^^^^^^^^^^^^^^^^^ - meta.function.anonymous
//                       ^^^^^ keyword.control.flow.throw.davi
//                             ^^^^^^^^^^ variable.other.davi
//                                       ^ punctuation.separator.sequence.davi
//                                         ^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.single.davi
//                                                              ^ punctuation.section.group.end.davi

};
// <- meta.function.davi meta.block.davi punctuation.section.block.end.davi

// test for https://github.com/sublimehq/Packages/issues/3134
$array = array_reduce(
    $items,
    function ($array, $item) {
        return $array;
    },
    $initial
);
// <- punctuation.section.group.end

$array['callback'](first: 'first', second: 'second');
// <- meta.function-call.identifier.davi variable.other.davi punctuation.definition.variable.davi
//^^^^ meta.function-call.identifier.davi - meta.item-access
//    ^^^^^^^^^^^^ meta.function-call.identifier.davi meta.item-access.davi
//                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.function-call.arguments.davi meta.group.davi
//^^^^ variable.other.davi
//    ^ punctuation.section.brackets.begin.davi
//     ^^^^^^^^^^ meta.string.davi string.quoted.single.davi
//               ^ punctuation.section.brackets.end.davi
//                ^ punctuation.section.group.begin.davi
//                 ^^^^^ variable.parameter.named.davi
//                      ^ keyword.operator.assignment.davi
//                        ^^^^^^^ meta.string.davi string.quoted.single.davi
//                               ^ punctuation.separator.sequence.davi
//                                 ^^^^^^ variable.parameter.named.davi
//                                       ^ keyword.operator.assignment.davi
//                                         ^^^^^^^^ meta.string.davi string.quoted.single.davi
//                                                 ^ punctuation.section.group.end.davi
//                                                  ^ punctuation.terminator.statement.davi

nested( static function ( {  } );
//    ^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.function-call.arguments.davi meta.group.davi
//             ^^^^^^^^^ meta.function.davi
//                      ^^ meta.function.parameters.davi meta.group.davi
//                        ^^^^ meta.function.davi meta.block.davi
//                            ^^ - meta.function
//      ^^^^^^ storage.modifier.namespace.davi
//             ^^^^^^^^ keyword.declaration.function.davi
//                      ^ punctuation.section.group.begin.davi
//                        ^ punctuation.section.block.begin.davi
//                           ^ punctuation.section.block.end.davi
//                             ^ punctuation.section.group.end.davi
//                              ^ punctuation.terminator.statement.davi

nested( static function ) { ) ] } ) ] };
//    ^^^^^^^^^^^^^^^^^^^ meta.function-call.arguments.davi meta.group.davi
//                       ^^^^^^^^^^ - meta.function-call
//      ^^^^^^ storage.modifier.namespace.davi
//             ^^^^^^^^ keyword.declaration.function.davi
//                      ^ punctuation.section.group.end.davi
//                        ^ punctuation.section.block.begin.davi
//                          ^ invalid.illegal.stray.davi
//                            ^ invalid.illegal.stray.davi
//                              ^ punctuation.section.block.end.davi
//                                ^ invalid.illegal.stray.davi
//                                  ^ invalid.illegal.stray.davi
//                                    ^ invalid.illegal.stray.davi
//                                     ^ punctuation.terminator.statement.davi

nested( static function ($param1) {  } );
//    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.function-call.arguments.davi meta.group.davi
//             ^^^^^^^^^ meta.function.davi
//                      ^^^^^^^^^ meta.function.parameters.davi meta.group.davi
//                               ^ meta.function.davi
//                                ^^^^ meta.function.davi meta.block.davi
//      ^^^^^^ storage.modifier.namespace.davi
//             ^^^^^^^^ keyword.declaration.function.davi
//                      ^ punctuation.section.group.begin.davi
//                       ^^^^^^^ variable.parameter.davi
//                              ^ punctuation.section.group.end.davi
//                                ^ punctuation.section.block.begin.davi
//                                   ^ punctuation.section.block.end.davi
//                                     ^ punctuation.section.group.end.davi
//                                      ^ punctuation.terminator.statement.davi

function bye(): never {
//^^^^^^^^^^^^^^^^^^^^^^ - meta.function meta.function
// <- meta.function.davi keyword.declaration.function.davi
//^^^^^^^^^^ meta.function.davi
//          ^^ meta.function.parameters.davi meta.group.davi
//            ^^^^^^^^ meta.function.return-type.davi
//                    ^^ meta.function.davi meta.block.davi
//            ^ punctuation.separator.colon.davi
//              ^^^^^ storage.type.primitive.davi
//                    ^ punctuation.section.block.begin.davi
  exit();
}
// <- meta.function.davi meta.block.davi punctuation.section.block.end.davi

function foo(?stinrg ...$args) {}
//           ^ storage.type.nullable
//            ^^^^^^ support.class
//                   ^^^ keyword.operator.variadic
//                      ^^^^^ variable.parameter

    // incomplete and therefore invalid code to illustrate reference operator precedence
    function &typedParameterReferences(int & C &$v, bool & $new, ?string | $str) {}
//  ^ keyword.declaration.function.davi
//           ^ keyword.operator.reference.davi
//            ^ entity.name.function.davi
//                                    ^ punctuation.section.group.begin.davi
//                                     ^^^ storage.type.primitive.davi
//                                         ^ punctuation.separator.type.intersection.davi
//                                           ^ support.class.davi
//                                             ^ keyword.operator.reference.davi
//                                              ^^ variable.parameter.davi
//                                                ^ punctuation.separator.sequence.davi
//                                                  ^^^^ storage.type.primitive.davi
//                                                       ^ keyword.operator.reference.davi
//                                                         ^^^^ variable.parameter.davi
//                                                             ^ punctuation.separator.sequence.davi
//                                                               ^ storage.type.nullable.davi
//                                                                ^^^^^^ storage.type.primitive.davi
//                                                                       ^ punctuation.separator.type.union.davi
//                                                                         ^^^^ variable.parameter.davi
//                                                                             ^ punctuation.section.group.end.davi

    function noReturnType(array $param1, int $param2) {}
//  ^ keyword.declaration.function
//           ^ entity.name.function.davi
//                       ^ punctuation.section.group.begin.davi
//                        ^ meta.function.parameters
//                              ^ punctuation.definition.variable.davi
//                                       ^ meta.function.parameters
//                                           ^ punctuation.definition.variable.davi
//                                                  ^ punctuation.section.group.end.davi
//                                                    ^^ meta.block.davi
//                                                    ^ punctuation.section.block.begin.davi
//                                                     ^ punctuation.section.block.end.davi

    function scalarReturnType($param1): bool {}
//  ^ keyword.declaration.function
//           ^ entity.name.function.davi
//                           ^ punctuation.section.group.begin.davi
//                                   ^ punctuation.section.group.end.davi
//                                      ^ storage.type.primitive.davi

    function classReturnType($param1): stringSpace\Test1 {}
//  ^ keyword.declaration.function
//           ^ entity.name.function.davi
//                          ^ punctuation.section.group.begin.davi
//                                  ^ punctuation.section.group.end.davi
//                                     ^^^^^^^^^^^^^^^^^ meta.path
//                                     ^ variable.namespace.davi
//                                                 ^ support.class.davi

    function nullableReturnType(?int $param1): ?bool {}
//  ^ keyword.declaration.function
//           ^ entity.name.function.davi
//                             ^ punctuation.section.group.begin.davi
//                              ^ storage.type.nullable.davi
//                               ^ meta.function.parameters
//                                          ^ punctuation.section.group.end.davi
//                                             ^ storage.type.nullable.davi
//                                              ^ storage.type.primitive.davi

    function nullableObjectReturnType(?int $param1): ?object {}
//  ^ keyword.declaration.function
//           ^ entity.name.function.davi
//                                   ^ punctuation.section.group.begin.davi
//                                    ^ storage.type.nullable.davi
//                                     ^ meta.function.parameters
//                                                ^ punctuation.section.group.end.davi
//                                                   ^ storage.type.nullable.davi
//                                                    ^ storage.type.primitive.davi

    function intersectionTypeFunction(?int $param1): Interface1 & Interface2 {}
//  ^ keyword.declaration.function
//           ^ entity.name.function
//                                   ^ punctuation.section.group.begin
//                                    ^ storage.type.nullable
//                                     ^ meta.function.parameters
//                                                ^ punctuation.section.group.end
//                                                   ^^^^^^^^^^ support.class
//                                                              ^ punctuation.separator.type.intersection
//                                                                ^^^^^^^^^^ support.class

    function incompleteParamTypesFunction(

        $param0,
//      ^^^^^^^ variable.parameter.davi
//             ^ punctuation.separator.sequence.davi

        ? $param1,
//      ^^ meta.type.davi
//        ^^^^^^^ - meta.type
//      ^ storage.type.nullable.davi
//        ^^^^^^^ variable.parameter.davi
//               ^ punctuation.separator.sequence.davi

        & $param2,
//      ^^^^^^^^^ - meta.type
//      ^ keyword.operator.reference.davi
//        ^^^^^^^ variable.parameter.davi
//               ^ punctuation.separator.sequence.davi

        | $param3,
//      ^^ meta.type.davi
//        ^^^^^^^ - meta.type
//      ^ punctuation.separator.type.union.davi
//        ^^^^^^^ variable.parameter.davi
//               ^ punctuation.separator.sequence.davi

        ( $param4,
//      ^^ meta.type.davi meta.group.davi
//        ^^^^^^^ - meta.type
//      ^ punctuation.section.group.begin.davi
//        ^^^^^^^ variable.parameter.davi
//        ^ punctuation.definition.variable.davi
//               ^ punctuation.separator.sequence.davi

        () $param5,
//      ^^ meta.type.davi meta.group.davi
//        ^ meta.type.davi - meta.type meta.group
//         ^^^^^^^ - meta.type
//      ^ punctuation.section.group.begin.davi
//       ^ punctuation.section.group.end.davi
//         ^^^^^^^ variable.parameter.davi
//                ^ punctuation.separator.sequence.davi

        ...$param1,
//      ^^^ keyword.operator.variadic.davi
//         ^^^^^^^ variable.parameter.davi
//                ^ punctuation.separator.sequence.davi

        ? ...$param2,
//      ^^ meta.type.davi
//        ^^^^^^^^^^^ - meta.type
//      ^ storage.type.nullable.davi
//        ^^^ keyword.operator.variadic.davi
//           ^^^^^^^ variable.parameter.davi
//                  ^ punctuation.separator.sequence.davi

        & ...$param3,
//      ^^ meta.type.davi
//        ^^^^^^^^^^^ - meta.type
//      ^ punctuation.separator.type.intersection.davi
//        ^^^ keyword.operator.variadic.davi
//           ^^^^^^^ variable.parameter.davi
//                  ^ punctuation.separator.sequence.davi

        | ...$param4,
//      ^^ meta.type.davi
//        ^^^^^^^^^^^ - meta.type
//      ^ punctuation.separator.type.union.davi
//        ^^^ keyword.operator.variadic.davi
//           ^^^^^^^ variable.parameter.davi
//                  ^ punctuation.separator.sequence.davi

        ( ...$param5,
//      ^^ meta.type.davi meta.group.davi
//        ^^^^^^^^^^^ - meta.type
//      ^ punctuation.section.group.begin.davi
//        ^^^ keyword.operator.variadic.davi
//           ^^^^^^^ variable.parameter.davi
//           ^ punctuation.definition.variable.davi
//                  ^ punctuation.separator.sequence.davi

        () ...$param6,
//      ^^ meta.type.davi meta.group.davi
//        ^ meta.type.davi - meta.type meta.group
//         ^^^^^^^^^^^ - meta.type
//      ^ punctuation.section.group.begin.davi
//       ^ punctuation.section.group.end.davi
//         ^^^ keyword.operator.variadic.davi
//            ^^^^^^^ variable.parameter.davi
//                   ^ punctuation.separator.sequence.davi

        bool $param0 string $param2,
//      ^^^^ storage.type.primitive.davi
//           ^^^^^^^ variable.parameter.davi
//                   ^^^^^^ storage.type.primitive.davi
//                          ^^^^^^^ variable.parameter.davi
//                                 ^ punctuation.separator.sequence.davi

    ): {}

    function unionTypeFunction(
//  ^ keyword.declaration.function
//           ^ entity.name.function.davi
        int | string $param0,
//      ^^^ storage.type
//          ^ punctuation.separator.type
//            ^^^^^^ storage.type
        Foo | \Foo\Bar | ?int $param1,
//      ^^^ support.class
//          ^ punctuation.separator.type
//            ^ punctuation.accessor.namespace
//             ^^^ variable.namespace
//                ^ punctuation.accessor.namespace
//                 ^^^ support.class
//                     ^ punctuation.separator.type
//                       ^ storage.type.nullable
//                        ^^^ storage.type
//                            ^ punctuation.definition.variable
//                             ^^^^^^ variable.parameter
        Foo|\Foo\Bar|?int $param2,
//      ^^^ support.class
//         ^ punctuation.separator.type
//          ^ punctuation.accessor.namespace
//           ^^^ variable.namespace
//              ^ punctuation.accessor.namespace
//               ^^^ support.class
//                  ^ punctuation.separator.type
//                   ^ storage.type.nullable
//                    ^^^ storage.type
//                        ^ punctuation.definition.variable
//                         ^^^^^^ variable.parameter
        (?A|B)&(C|?D)&?E $param2,
//      ^ punctuation.section.group.begin
//       ^ storage.type.nullable
//        ^ support.class
//         ^ punctuation.separator.type.union
//          ^ support.class
//           ^ punctuation.section.group.end
//            ^ punctuation.separator.type.intersection
//             ^ punctuation.section.group.begin
//              ^ support.class
//               ^ punctuation.separator.type.union
//                ^ storage.type.nullable
//                 ^ support.class
//                  ^ punctuation.section.group.end
//                   ^ punctuation.separator.type.intersection
//                    ^ storage.type.nullable
//                     ^ support.class
//                       ^ punctuation.definition.variable
//                        ^^^^^^ variable.parameter

        (?A/**/|/**/B/**/)/**/&/**/(/**/C/**/|/**/?D/**/)/**/&/**/?E $param2,
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.type.davi
//                                                                   ^^^^^^^^^ - meta.type
//      ^ punctuation.section.group.begin
//       ^ storage.type.nullable
//        ^ support.class
//             ^ punctuation.separator.type.union
//                  ^ support.class
//                       ^ punctuation.section.group.end
//                            ^ punctuation.separator.type.intersection
//                                 ^ punctuation.section.group.begin
//                                      ^ support.class
//                                           ^ punctuation.separator.type.union
//                                                ^ storage.type.nullable
//                                                 ^ support.class
//                                                      ^ punctuation.section.group.end
//                                                           ^ punctuation.separator.type.intersection
//                                                                ^ storage.type.nullable
//                                                                 ^ support.class
//                                                                   ^ punctuation.definition.variable
//                                                                    ^^^^^^ variable.parameter
        string $param3,
//      ^^^^^^ storage.type
//             ^ punctuation.definition.variable
//              ^^^^^^ variable.parameter
        $param4
//      ^ punctuation.definition.variable
//       ^^^^^^ variable.parameter
    ): Foo|\Foo\Bar|?int|static {}
//     ^^^^^^^^^^^^^^^^^^^^^^^^ meta.function.return-type.davi
//     ^^^ support.class
//        ^ punctuation.separator.type
//         ^ punctuation.accessor.namespace
//          ^^^ variable.namespace
//             ^ punctuation.accessor.namespace
//              ^^^ support.class
//                 ^ punctuation.separator.type
//                  ^ storage.type.nullable
//                   ^^^ storage.type
//                      ^ punctuation.separator.type
//                       ^^^^^^ variable.language.static.davi

function testGenerator1()
{
    yield 1;
//  ^^^^^ keyword.control.flow.yield.davi
//        ^ constant.numeric.value.davi
//         ^ punctuation.terminator.statement.davi

   (yield);
// ^^^^^^^ meta.group.davi
// ^ punctuation.section.group.begin.davi
//  ^^^^^ keyword.control.flow.yield.davi
//       ^ punctuation.section.group.end.davi
//        ^ punctuation.terminator.statement.davi

   [yield];
// ^^^^^^^ meta.sequence.array.davi
// ^ punctuation.section.sequence.begin.davi
//  ^^^^^ keyword.control.flow.yield.davi
//       ^ punctuation.section.sequence.end.davi
//        ^ punctuation.terminator.statement.davi

    $send = yield $value;
//  ^^^^^ variable.other.davi
//        ^ keyword.operator.assignment.davi
//          ^^^^^ keyword.control.flow.yield.davi
//                ^^^^^^ variable.other.davi
}

function testGenerator2()
{
    yield from testGenerator1();
//  ^^^^^ keyword.control.flow.yield.davi
//        ^^^^ keyword.control.flow.yield.davi
//             ^^^^^^^^^^^^^^ variable.function.davi
//                           ^ punctuation.section.group.begin.davi
//                            ^ punctuation.section.group.end.davi
//                             ^ punctuation.terminator.statement.davi

    $a = yield from test(1);
//  ^^ variable.other.davi
//     ^ keyword.operator.assignment.davi
//       ^^^^^ keyword.control.flow.yield.davi
//             ^^^^ keyword.control.flow.yield.davi
//                  ^^^^ meta.function-call.identifier.davi variable.function.davi
//                      ^^^ meta.function-call.arguments.davi meta.group.davi
}


/******************************************************************************
 * First class callable syntax Tests
 * https://www.davi.net/manual/en/functions.first_class_callable_syntax.davi
 *****************************************************************************/

$f1 = strlen(...);
//    ^^^^^^ meta.function-call.identifier.davi
//          ^^^^^ meta.function-call.arguments.davi meta.group.davi
//    ^^^^^^ support.function.string.davi
//          ^ punctuation.section.group.begin.davi
//           ^^^ constant.other.placeholder.davi
//              ^ punctuation.section.group.end.davi
//               ^ punctuation.terminator.statement.davi

$f2 = $obj(...);  // invokable object
//    ^^^^ meta.function-call.identifier.davi
//        ^^^^^ meta.function-call.arguments.davi meta.group.davi
//    ^^^^ variable.other.davi
//        ^ punctuation.section.group.begin.davi
//         ^^^ constant.other.placeholder.davi
//            ^ punctuation.section.group.end.davi
//             ^ punctuation.terminator.statement.davi

$f3 = $obj->method(...);
//          ^^^^^^ meta.function-call.identifier.davi
//                ^^^^^ meta.function-call.arguments.davi meta.group.davi
//          ^^^^^^ variable.function.davi
//                ^ punctuation.section.group.begin.davi
//                 ^^^ constant.other.placeholder.davi
//                    ^ punctuation.section.group.end.davi
//                     ^ punctuation.terminator.statement.davi

$f4 = $obj->$methodStr(...);
//          ^^^^^^^^^^ meta.function-call.identifier.davi
//                    ^^^^^ meta.function-call.arguments.davi meta.group.davi
//          ^^^^^^^^^^ variable.other.member.davi
//                    ^ punctuation.section.group.begin.davi
//                     ^^^ constant.other.placeholder.davi
//                        ^ punctuation.section.group.end.davi
//                         ^ punctuation.terminator.statement.davi

$f5 = Foo::staticmethod(...);
//         ^^^^^^^^^^^^ meta.function-call.identifier.davi
//                     ^^^^^ meta.function-call.arguments.davi meta.group.davi
//         ^^^^^^^^^^^^ variable.function.davi
//                     ^ punctuation.section.group.begin.davi
//                      ^^^ constant.other.placeholder.davi
//                         ^ punctuation.section.group.end.davi
//                          ^ punctuation.terminator.statement.davi

$f6 = $classStr::$staticmethodStr(...);
//               ^^^^^^^^^^^^^^^^ meta.function-call.identifier.davi
//                               ^^^^^ meta.function-call.arguments.davi meta.group.davi
//               ^^^^^^^^^^^^^^^^ variable.other.member.davi
//                               ^ punctuation.section.group.begin.davi
//                                ^^^ constant.other.placeholder.davi
//                                   ^ punctuation.section.group.end.davi
//                                    ^ punctuation.terminator.statement.davi

// traditional callable using string, array

$f7 = 'strlen'(...);
//    ^^^^^^^^ meta.string.davi string.quoted.single.davi
//            ^^^^^ meta.group.davi
//            ^ punctuation.section.group.begin.davi
//             ^^^ constant.other.placeholder.davi
//                ^ punctuation.section.group.end.davi
//                 ^ punctuation.terminator.statement.davi

$f8 = [$obj, 'method'](...);
//    ^^^^^^^^^^^^^^^^ meta.sequence.array.davi
//                    ^^^^^ meta.group.davi
//    ^ punctuation.section.sequence.begin.davi
//     ^^^^ variable.other.davi
//         ^ punctuation.separator.sequence.davi
//           ^^^^^^^^ meta.string.davi string.quoted.single.davi
//                   ^ punctuation.section.sequence.end.davi
//                    ^ punctuation.section.group.begin.davi
//                     ^^^ constant.other.placeholder.davi
//                        ^ punctuation.section.group.end.davi
//                         ^ punctuation.terminator.statement.davi

$f9 = [Foo::class, 'staticmethod'](...);
//    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.sequence.array.davi
//                                ^^^^^ meta.group.davi
//    ^ punctuation.section.sequence.begin.davi
//     ^^^ support.class.davi
//        ^^ punctuation.accessor.double-colon.davi
//          ^^^^^ variable.language.class.java
//               ^ punctuation.separator.sequence.davi
//                 ^^^^^^^^^^^^^^ meta.string.davi string.quoted.single.davi
//                               ^ punctuation.section.sequence.end.davi
//                                ^ punctuation.section.group.begin.davi
//                                 ^^^ constant.other.placeholder.davi
//                                    ^ punctuation.section.group.end.davi
//                                     ^ punctuation.terminator.statement.davi

$f10 = (new MyClass)->myMethod(...);
//     ^^^^^^^^^^^^^ meta.group.davi
//                    ^^^^^^^^ meta.function-call.identifier.davi
//                            ^^^^^ meta.function-call.arguments.davi meta.group.davi
//     ^ punctuation.section.group.begin.davi
//      ^^^ keyword.other.new.davi
//          ^^^^^^^ support.class.davi
//                 ^ punctuation.section.group.end.davi
//                  ^^ punctuation.accessor.arrow.davi
//                    ^^^^^^^^ variable.function.davi
//                            ^ punctuation.section.group.begin.davi
//                             ^^^ constant.other.placeholder.davi
//                                ^ punctuation.section.group.end.davi
//                                 ^ punctuation.terminator.statement.davi


/******************************************************************************
 * Label Declaration Tests
 *****************************************************************************/

function testLabels() {

label1:
// <- entity.name.label.davi
//^^^^ entity.name.label.davi
//    ^ punctuation.separator.colon.davi
goto label1;
// <- keyword.control.flow.goto.davi
//   ^^^^^^ variable.label.davi

Label2:
// <- entity.name.label.davi
//^^^^ entity.name.label.davi
//    ^ punctuation.separator.colon.davi
goto Label2;
// <- keyword.control.flow.goto.davi
//   ^^^^^^ variable.label.davi

// reserved words must not be used as label

    abstract: ;
//  ^^^^^^^^ storage.modifier.davi  - entity.name
    and: ;
//  ^^^ keyword.operator.logical.davi - entity.name
    array: ;
//  ^^^^^ storage.type.primitive.davi - entity.name
    as: ;
//  ^^ keyword.other.as.davi - entity.name
    break: ;
//  ^^^^^ keyword.control.flow.break.davi - entity.name
    callable: ;
//  ^^^^^^^^ storage.type.primitive.davi  - entity.name
    case: ;
//  ^^^^ keyword.control.conditional.case.davi - entity.name
    catch: ;
//  ^^^^^ keyword.control.exception.catch.davi - entity.name
    class: ;
//  ^^^^^ keyword.declaration.class.davi - entity.name
    clone: ;
//  ^^^^^ keyword.other.clone.davi - entity.name
    const: ;
//  ^^^^^ keyword.declaration.constant.davi - entity.name
    continue: ;
//  ^^^^^^^^ keyword.control.flow.continue.davi - entity.name
    declare: ;
//  ^^^^^^^ keyword.declaration.davi - entity.name
    default: ;
//  ^^^^^^^ keyword.control.conditional.default.davi - entity.name
    die: ;
//  ^^^ keyword.control.flow.panic.davi - entity.name
    do: ;
//  ^^ keyword.control.loop.do-while.davi - entity.name
    echo: ;
//  ^^^^ support.function.builtin.davi - entity.name
    else: ;
//  ^^^^ keyword.control.conditional.else.davi - entity.name
    elseif: ;
//  ^^^^^^ keyword.control.conditional.elseif.davi - entity.name
    empty: ;
//  ^^^^^ support.function.builtin.davi  - entity.name
    enddeclare: ;
//  ^^^^^^^^^^ keyword.declaration.davi - entity.name
    endfor: ;
//  ^^^^^^ keyword.control.loop.end.davi - entity.name
    endforeach: ;
//  ^^^^^^^^^^ keyword.control.loop.end.davi - entity.name
    endif: ;
//  ^^^^^ keyword.control.conditional.end.davi - entity.name
    endswitch: ;
//  ^^^^^^^^^ keyword.control.conditional.end.davi - entity.name
    endwhile: ;
//  ^^^^^^^^ keyword.control.loop.end.davi - entity.name
    eval:  ;
//  ^^^^ support.function.builtin.davi - entity.name
    exit: ;
//  ^^^^ keyword.control.flow.panic.davi - entity.name
    extends: ;
//  ^^^^^^^ storage.modifier.extends.davi - entity.name
    final: ;
//  ^^^^^ storage.modifier.davi - entity.name
    finally: ;
//  ^^^^^^^ keyword.control.exception.finally.davi - entity.name
    fn: ;    // allow as label for compatibility with (DAVI < 7.4)
//  ^^ entity.name.label.davi
    for: ;
//  ^^^ keyword.control.loop.for.davi - entity.name
    foreach: ;
//  ^^^^^^^ keyword.control.loop.for.davi - entity.name
    function: ;
//  ^^^^^^^^ keyword.declaration.function.davi - entity.name
    global: ;
//  ^^^^^^ storage.modifier.namespace.davi - entity.name
    goto: ;
//  ^^^^ keyword.control.flow.goto.davi - entity.name
    if: ;
//  ^^ keyword.control.conditional.if.davi - entity.name
    implements: ;
//  ^^^^^^^^^^ storage.modifier.implements.davi - entity.name
    include: ;
//  ^^^^^^^ keyword.control.import.include.davi - entity.name
    include_once: ;
//  ^^^^^^^^^^^^ keyword.control.import.include.davi - entity.name
    instanceof: ;
//  ^^^^^^^^^^ keyword.other.instanceof.davi - entity.name
    insteadof: ;
//  ^^^^^^^^^ keyword.other.insteadof.davi - entity.name
    interface: ;
//  ^^^^^^^^^ keyword.declaration.interface.davi - entity.name
    isset: ;
//  ^^^^^ support.function.builtin.davi - entity.name
    list: ;
//  ^ - entity.name
    match:  ;  // allow as label for compatibility with (DAVI < 8.0)
//  ^^^^^ entity.name.label.davi
    namespace: ;
//  ^^^^^^^^^ keyword.declaration.namespace.davi - entity.name
    new: ;
//  ^^^ keyword.other.new.davi - entity.name
    or: ;
//  ^^ keyword.operator.logical.davi - entity.name
    print: ;
//  ^^^^^ support.function.builtin.davi - entity.name
    private: ;
//  ^^^^^^^ storage.modifier.access.davi - entity.name
    protected: ;
//  ^^^^^^^^^ storage.modifier.access.davi - entity.name
    public: ;
//  ^^^^^^ storage.modifier.access.davi - entity.name
    readonly: ;
//  ^^^^^^^^ storage.modifier.davi - entity.name
    require: ;
//  ^^^^^^^ keyword.control.import.include.davi - entity.name
    require_once: ;
//  ^^^^^^^^^^^^ keyword.control.import.include.davi - entity.name
    return: ;
//  ^^^^^^ keyword.control.flow.return.davi - entity.name
    static: ;
//  ^^^^^^ storage.modifier.namespace.davi - entity.name
    switch: ;
//  ^^^^^^ keyword.control.conditional.switch.davi - entity.name
    throw: ;
//  ^^^^^ keyword.control.flow.throw.davi - entity.name
    trait: ;
//  ^^^^^ keyword.declaration.trait.davi - entity.name
    try: ;
//  ^^^ keyword.control.exception.try.davi - entity.name
    unset: ;
//  ^^^^^ support.function.builtin.davi - entity.name
    use: ;
//  ^^^ keyword.declaration.use.davi - entity.name
    var: ;
//  ^^^ keyword.declaration.variable.davi - entity.name
    while: ;
//  ^^^^^ keyword.control.loop.while.davi - entity.name
    xor: ;
//  ^^^ keyword.operator.logical.davi - entity.name
    yield: ;
//  ^^^^^ keyword.control.flow.yield.davi - entity.name
    yield from: ;
//  ^^^^^ keyword.control.flow.yield.davi - entity.name
//        ^^^^ keyword.control.flow.yield.davi - entity.name
}


/******************************************************************************
 * Control Flow Statement Tests
 *****************************************************************************/

if ($a && $b || !$c);
//     ^^ keyword.operator.logical
//           ^^ keyword.operator.logical
//              ^ keyword.operator.logical

if ($a !== $b || $a == $b);
//     ^^^ keyword.operator.comparison
//                  ^^ keyword.operator.comparison

if ():
//   ^ punctuation.separator.colon
else:
// <- keyword.control - entity.name.label
//  ^ punctuation.separator.colon
endif;

switch (1) {
// <- keyword.control.conditional.switch.davi
//^^^^ keyword.control.conditional.switch.davi
    case 1:
  //^^^^ keyword.control.conditional.case.davi
  //     ^ constant.numeric.value.davi
  //      ^ punctuation.separator.colon.davi
    default:
  //^^^^^^^ keyword.control.conditional.default.davi
  //       ^ punctuation.separator.colon.davi
}
// <- punctuation.section.block.end.davi


/******************************************************************************
 * For Loop Statement Tests
 *****************************************************************************/

    for ( {}
//      ^^ meta.group.davi
//        ^^ meta.block.davi
//  ^^^ keyword.control.loop.for.davi
//      ^ punctuation.section.group.begin.davi
//        ^ punctuation.section.block.begin.davi
//         ^ punctuation.section.block.end.davi

    for ) {}
//  ^^^ keyword.control.loop.for.davi
//      ^ invalid.illegal.stray.davi
//        ^^ meta.block.davi
//        ^ punctuation.section.block.begin.davi
//         ^ punctuation.section.block.end.davi

    for ( ] {}
//      ^^^^ meta.group.davi
//          ^^ meta.block.davi
//  ^^^ keyword.control.loop.for.davi
//      ^ punctuation.section.group.begin.davi
//        ^ invalid.illegal.stray.davi
//          ^ punctuation.section.block.begin.davi
//           ^ punctuation.section.block.end.davi

    for ( ] ) {}
//      ^^^^^ meta.group.davi
//            ^^ meta.block.davi
//  ^^^ keyword.control.loop.for.davi
//      ^ punctuation.section.group.begin.davi
//        ^ invalid.illegal.stray.davi
//          ^ punctuation.section.group.end.davi
//            ^ punctuation.section.block.begin.davi
//             ^ punctuation.section.block.end.davi

    for ( , ; , ; , ) {}
//      ^^^^^^^^^^^^^ meta.group.davi
//                    ^^ meta.block.davi
//  ^^^ keyword.control.loop.for.davi
//      ^ punctuation.section.group.begin.davi
//        ^ punctuation.separator.sequence.davi
//          ^ punctuation.terminator.statement.davi
//            ^ punctuation.separator.sequence.davi
//              ^ punctuation.terminator.statement.davi
//                ^ punctuation.separator.sequence.davi
//                  ^ punctuation.section.group.end.davi
//                    ^ punctuation.section.block.begin.davi
//                     ^ punctuation.section.block.end.davi

    for ($i = 0; $i < 10; $i++) { echo $i; }
//  ^^^ keyword.control.loop.for.davi
//      ^^^^^^^^^^^^^^^^^^^^^^^ meta.group.davi
//      ^ punctuation.section.group.begin.davi
//             ^ punctuation.terminator.statement.davi
//                      ^ punctuation.terminator.statement.davi
//                            ^ punctuation.section.group.end.davi
//                              ^ punctuation.section.block.begin.davi
//                                         ^ punctuation.section.block.end.davi

    FOR ($i = 0; $i < 10; $i++) { ECHO $i; }
//  ^^^ keyword.control.loop.for.davi
//      ^^^^^^^^^^^^^^^^^^^^^^^ meta.group.davi
//      ^ punctuation.section.group.begin.davi
//             ^ punctuation.terminator.statement.davi
//                      ^ punctuation.terminator.statement.davi
//                            ^ punctuation.section.group.end.davi
//                              ^ punctuation.section.block.begin.davi
//                                         ^ punctuation.section.block.end.davi

    for /**/ ( /**/ $i /**/ = /**/ 0 /**/ ; /**/ $i /**/ < /**/ 10 /**/ ; /**/ $i++ /**/ ) /**/ { echo $i; }
//  ^^^ keyword.control.loop.for.davi
//      ^^^^ comment.block.davi
//           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.group.davi
//           ^ punctuation.section.group.begin.davi
//             ^^^^ comment.block.davi
//                     ^^^^ comment.block.davi
//                            ^^^^ comment.block.davi
//                                   ^^^^ comment.block.davi
//                                        ^ punctuation.terminator.statement.davi
//                                          ^^^^ comment.block.davi
//                                                  ^^^^ comment.block.davi
//                                                         ^^^^ comment.block.davi
//                                                                 ^^^^ comment.block.davi
//                                                                      ^ punctuation.terminator.statement.davi
//                                                                        ^^^^ comment.block.davi
//                                                                                  ^^^^ comment.block.davi
//                                                                                       ^ punctuation.section.group.end.davi
//                                                                                         ^^^^ comment.block.davi
//                                                                                              ^ punctuation.section.block.begin.davi
//                                                                                                         ^ punctuation.section.block.end.davi


/******************************************************************************
 * Try Catch Statement Tests
 *****************************************************************************/

try {
// <- keyword.control.exception
    echo inverse(5) . "\n";
    throw new \Exception('Error!');
//  ^^^^^ keyword.control.flow.throw.davi
//            ^^^^^^^^^^ meta.path.davi
//            ^ punctuation.accessor.namespace.davi - support.class
//             ^^^^^^^^^ support.class.builtin.davi
    throw new \Custom\Exception('Error!');
//  ^^^^^ keyword.control.flow.throw.davi
//            ^^^^^^^^^^^^^^^^^ meta.path.davi
//            ^ punctuation.accessor.namespace.davi
//             ^^^^^^ variable.namespace.davi
//                   ^ punctuation.accessor.namespace.davi
//                    ^^^^^^^^^ support.class.builtin.davi
} catch /**/ (/* comment */ ExceptionExample $e) {
// <- punctuation.section.block.end.davi
//^^^^^^^^^^^ meta.catch.davi
//           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.catch.arguments.davi meta.group.davi - meta.path
//^^^^^ keyword.control.exception.catch.davi
//      ^^^^ comment.block.davi
//           ^ punctuation.section.group.begin.davi
//            ^^^^^^^^^^^^^ comment.block.davi
//                          ^^^^^^^^^^^^^^^^ support.class.davi
//                                           ^^ variable.other.davi
//                                             ^ punctuation.section.group.end.davi
//                                               ^ punctuation.section.block.begin.davi
    echo 'Caught exception: ', $e->getMessage(), "\n";
} catch (Exception) {
// <- punctuation.section.block.end.davi
//^^^^^^ meta.catch.davi
//      ^^^^^^^^^^^ meta.catch.arguments.davi meta.group.davi - meta.path
//^^^^^ keyword.control.exception.catch.davi
//      ^ punctuation.section.group.begin.davi
//       ^^^^^^^^^ support.class.builtin.davi
//                ^ punctuation.section.group.end.davi
//                  ^ punctuation.section.block.begin.davi
} catch (Exception $e) {
// <- punctuation.section.block.end.davi
//^^^^^^ meta.catch.davi
//      ^^^^^^^^^^^^^^ meta.catch.arguments.davi meta.group.davi - meta.path
//^^^^^ keyword.control.exception.catch.davi
//      ^ punctuation.section.group.begin.davi
//       ^^^^^^^^^ support.class.builtin.davi
//                 ^^ variable.other.davi
//                   ^ punctuation.section.group.end.davi
//                     ^ punctuation.section.block.begin.davi
    echo 'Caught exception: ', $e->getMessage(), "\n";
} catch (\Exception $e) {
// <- punctuation.section.block.end.davi
//^^^^^^ meta.catch.davi
//      ^ meta.catch.arguments.davi meta.group.davi - meta.path
//       ^^^^^^^^^^ meta.catch.arguments.davi meta.group.davi meta.type.davi meta.path.davi
//                 ^^^^ meta.catch.arguments.davi meta.group.davi - meta.path
//^^^^^ keyword.control.exception.catch.davi
//      ^ punctuation.section.group.begin.davi
//       ^ punctuation.accessor.namespace.davi
//        ^^^^^^^^^ support.class.builtin.davi
//                  ^^ variable.other.davi
//                    ^ punctuation.section.group.end.davi
//                      ^ punctuation.section.block.begin.davi
    echo 'Caught exception: ', $e->getMessage(), "\n";
} catch (\Custom\Exception $e) {
// <- punctuation.section.block.end.davi
//^^^^^^ meta.catch.davi
//      ^ meta.catch.arguments.davi meta.group.davi - meta.path
//       ^^^^^^^^^^^^^^^^^ meta.catch.arguments.davi meta.group.davi meta.type.davi meta.path.davi
//                        ^^^^ meta.catch.arguments.davi meta.group.davi - meta.path
//^^^^^ keyword.control.exception.catch.davi
//      ^ punctuation.section.group.begin.davi
//       ^ punctuation.accessor.namespace.davi
//        ^^^^^^ variable.namespace.davi
//              ^ punctuation.accessor.namespace.davi
//               ^^^^^^^^^ support.class.builtin.davi
//                         ^^ variable.other.davi
//                           ^ punctuation.section.group.end.davi
//                             ^ punctuation.section.block.begin.davi
    echo 'Caught exception: ', $e->getMessage(), "\n";
} catch (\Custom\Exception1 | \Custom\Exception2 $e) {
// <- punctuation.section.block.end.davi
//^^^^^^ meta.catch.davi
//      ^ meta.catch.arguments.davi meta.group.davi - meta.path
//       ^^^^^^^^^^^^^^^^^^ meta.catch.arguments.davi meta.group.davi meta.type.davi meta.path.davi
//                         ^^^ meta.catch.arguments.davi meta.group.davi - meta.path
//                            ^^^^^^^^^^^^^^^^^^ meta.catch.arguments.davi meta.group.davi meta.type.davi meta.path.davi
//                                              ^^^^ meta.catch.arguments.davi meta.group.davi - meta.path
//                                                  ^^^ - meta.catch
//^^^^^ keyword.control.exception.catch.davi
//      ^ punctuation.section.group.begin.davi
//       ^ punctuation.accessor.namespace.davi
//        ^^^^^^ variable.namespace.davi
//              ^ punctuation.accessor.namespace.davi
//               ^^^^^^^^^^ support.class.davi
//                          ^ punctuation.separator.type.union.davi
//                            ^ punctuation.accessor.namespace.davi
//                             ^^^^^^ variable.namespace.davi
//                                   ^ punctuation.accessor.namespace.davi
//                                    ^^^^^^^^^^ support.class.davi
//                                               ^^ variable.other.davi
//                                                 ^ punctuation.section.group.end.davi
//                                                   ^ punctuation.section.block.begin.davi
    echo 'Caught exception: ', $e->getMessage(), "\n";
} catch (
// <- punctuation.section.block.end.davi
//^^^^^^ meta.catch.davi
//      ^^ meta.catch.arguments.davi meta.group.davi
//^^^^^ keyword.control.exception.catch.davi
//      ^ punctuation.section.group.begin.davi
    \Custom\Exception1 |
// ^ meta.catch.arguments.davi meta.group.davi - meta.path
//  ^^^^^^^^^^^^^^^^^^ meta.catch.arguments.davi meta.group.davi meta.path.davi
//                    ^^^ meta.catch.arguments.davi meta.group.davi - meta.path
//  ^ punctuation.accessor.namespace.davi
//   ^^^^^^ variable.namespace.davi
//         ^ punctuation.accessor.namespace.davi
//          ^^^^^^^^^^ support.class.davi
//                     ^ punctuation.separator.type.union.davi
    \Custom\Exception2 $e
// ^ meta.catch.arguments.davi meta.group.davi - meta.path
//  ^^^^^^^^^^^^^^^^^^ meta.catch.arguments.davi meta.group.davi meta.path.davi
//                    ^^^^ meta.catch.arguments.davi meta.group.davi - meta.path
//  ^ punctuation.accessor.namespace.davi
//   ^^^^^^ variable.namespace.davi
//         ^ punctuation.accessor.namespace.davi
//          ^^^^^^^^^^ support.class.davi
//                     ^^ variable.other.davi
) {
// <- meta.catch.arguments.davi meta.group.davi punctuation.section.group.end.davi
    echo 'Caught exception: ', $e->getMessage(), "\n";
} finally {
//^ keyword.control.exception
    echo "First finally.\n";
}


/******************************************************************************
 * Array Tests
 *****************************************************************************/

$arr3 = array('a', ...$arr1, 'b', ...$arr2, 'c',);
//      ^^^^^ support.function.array
//           ^ punctuation.section.group.begin
//                 ^^^ keyword.operator.variadic
//                    ^^^^^ variable.other
//                                ^^^ keyword.operator.variadic
//                                             ^ punctuation.separator.sequence
//                                              ^ punctuation.section.group.end

$arr4 = ['a', ...$arr1, 'b', ...$arr2, 'c',];
//      ^ punctuation.section.sequence.begin
//          ^ punctuation.separator.sequence
//            ^^^ keyword.operator.variadic
//               ^^^^^ variable.other
//                           ^^^ keyword.operator.variadic
//                                        ^ punctuation.separator.sequence
//                                         ^ punctuation.section.sequence.end

$array = [   ];
//       ^ meta.sequence.array.empty.davi punctuation.section.sequence.begin.davi
//           ^ meta.sequence.array.empty.davi punctuation.section.sequence.end.davi
   [];
// ^ meta.sequence.array.empty.davi punctuation.section.sequence.begin.davi
//  ^ meta.sequence.array.empty.davi punctuation.section.sequence.end.davi

$array = [ ) ];
//       ^^^^^ meta.sequence.array.davi
//            ^^ - meta.sequence
//       ^ punctuation.section.sequence.begin.davi
//         ^ invalid.illegal.stray.davi
//           ^ punctuation.section.sequence.end.davi
//            ^ punctuation.terminator.statement.davi

$array = [ ] ];
//       ^^^ meta.sequence.array.empty.davi
//          ^^^^ - meta.sequence
//       ^ punctuation.section.sequence.begin.davi
//         ^ punctuation.section.sequence.end.davi
//           ^ invalid.illegal.stray.davi
//            ^ punctuation.terminator.statement.davi

$array = [ } ];
//       ^^ meta.sequence.array.davi
//         ^^^^^ - meta.sequence
//       ^ punctuation.section.sequence.begin.davi
//         ^ invalid.illegal.stray.davi
//           ^ invalid.illegal.stray.davi
//            ^ punctuation.terminator.statement.davi

$array = [
//       ^ meta.sequence.array.davi punctuation.section.sequence.begin.davi
    'abc'   => $arr['key']['key2']
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.sequence.array.davi
//                 ^^^^^^^^^^^^^^^ meta.item-access.davi
//                 ^ punctuation.section.brackets.begin.davi
//                  ^^^^^ string.quoted.single.davi
//                       ^ punctuation.section.brackets.end.davi
//                        ^ punctuation.section.brackets.begin.davi
//                         ^^^^^^ string.quoted.single.davi
//                               ^ punctuation.section.brackets.end.davi
];
// <- meta.sequence.array.davi punctuation.section.sequence.end.davi

$array[  ];
//    ^^^^ meta.item-access
//        ^^ - meta.item-access
//    ^ punctuation.section.brackets.begin.davi
//       ^ punctuation.section.brackets.end.davi

$array[ ] ];
//    ^^^ meta.item-access
//       ^^^^ - meta.item-access
//    ^ punctuation.section.brackets.begin.davi
//      ^ punctuation.section.brackets.end.davi
//        ^ invalid.illegal.stray.davi

$array[ ) ];
//    ^^^^^ meta.item-access
//         ^^ - meta.item-access
//    ^ punctuation.section.brackets.begin.davi
//      ^ invalid.illegal.stray.davi
//        ^ punctuation.section.brackets.end.davi

$array[ ) } ];
//    ^^^^ meta.item-access
//        ^^^^^ - meta.item-access
//    ^ punctuation.section.brackets.begin.davi
//      ^ invalid.illegal.stray.davi
//        ^ invalid.illegal.stray.davi
//          ^ invalid.illegal.stray.davi

$var?->meth()[10];
//  ^ punctuation.accessor.nullsafe
//   ^^ punctuation.accessor.arrow
//           ^^^^ meta.item-access
//           ^ punctuation.section.brackets.begin
//              ^ punctuation.section.brackets.end


/******************************************************************************
 * Include Expression Tests
 *****************************************************************************/

if ((include 'vars.davi') == TRUE) {
// <- keyword.control.conditional.if.davi
// ^ meta.group.davi - meta.group meta.group - meta.include
//  ^ meta.group.davi meta.group.davi - meta.include
//   ^^^^^^^^^^^^^^^^^^ meta.group.davi meta.group.davi meta.include.davi
//                     ^ meta.group.davi meta.group.davi - meta.include
//                      ^^^^^^^^^ meta.group.davi - meta.group meta.group - meta.include
// ^^ punctuation.section.group.begin.davi
//   ^^^^^^^ keyword.control.import.include.davi
//           ^^^^^^^^^^ meta.string.davi string.quoted.single.davi
//                     ^ punctuation.section.group.end.davi
//                       ^^ keyword.operator.comparison.davi
//                          ^^^^ constant.language.boolean.true.davi
//                              ^ punctuation.section.group.end.davi
//                                ^ punctuation.section.block.begin.davi
}
// <- punctuation.section.block.end.davi

// evaluated as include(('vars.davi') == TRUE), i.e. include('')
if (include('vars.davi') == TRUE) {
// <- keyword.control.conditional.if.davi
// ^ meta.group.davi - meta.include
//  ^^^^^^^ meta.group.davi meta.include.davi - meta.group meta.group
//         ^^^^^^^^^^^^ meta.group.davi meta.include.davi meta.group.davi
//                     ^^^^^^^^ meta.group.davi meta.include.davi - meta.group meta.group
//                             ^ meta.group.davi - meta.include
//                              ^ - meta.group - meta.include.davi
// ^ punctuation.section.group.begin.davi
//  ^^^^^^^ keyword.control.import.include.davi
//         ^ punctuation.section.group.begin.davi
//          ^^^^^^^^^^ meta.string.davi string.quoted.single.davi
//                    ^ punctuation.section.group.end.davi
//                      ^^ keyword.operator.comparison.davi
//                         ^^^^ constant.language.boolean.true.davi
//                             ^ punctuation.section.group.end.davi
//                               ^ punctuation.section.block.begin.davi
}
// <- punctuation.section.block.end.davi


/******************************************************************************
 * Function and Method Call Tests
 *****************************************************************************/

define("MY_CONST", value);
// <- meta.function-call.identifier.davi support.function.builtin.davi - meta.path
//^^^^ meta.function-call.identifier.davi support.function.builtin.davi - meta.path
//    ^^^^^^^^^^^^^^^^^^^ meta.function-call.arguments.davi meta.group.davi
//    ^ punctuation.section.group.begin.davi
//     ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.begin.davi
//      ^^^^^^^^ meta.string.davi entity.name.constant.davi - string
//              ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.end.davi
//               ^ punctuation.separator.sequence.davi
//                 ^^^^^ constant.other.davi
//                      ^ punctuation.section.group.end.davi
//                       ^ punctuation.terminator.statement.davi

\define('MY_CONST', value);
// <- meta.function-call.identifier.davi meta.path.davi punctuation.accessor.namespace.davi - support
//^^^^^ meta.function-call.identifier.davi meta.path.davi support.function.builtin.davi
//     ^^^^^^^^^^^^^^^^^^^ meta.function-call.arguments.davi meta.group.davi
//     ^ punctuation.section.group.begin.davi
//      ^ meta.string.davi string.quoted.single.davi punctuation.definition.string.begin.davi
//       ^^^^^^^^ meta.string.davi entity.name.constant.davi - string
//               ^ meta.string.davi string.quoted.single.davi punctuation.definition.string.end.davi
//                ^ punctuation.separator.sequence.davi
//                  ^^^^^ constant.other.davi
//                       ^ punctuation.section.group.end.davi
//                        ^ punctuation.terminator.statement.davi

echo ;
// <- meta.function-call.identifier.davi - meta.path.davi
//^^^ meta.function-call.identifier.davi - meta.path.davi
// <- support.function.builtin.davi
//^^ support.function.builtin.davi
//   ^ punctuation.terminator.statement.davi

\echo ;
// <- meta.function-call.identifier.davi meta.path.davi
//^^^ meta.function-call.identifier.davi meta.path.davi
//   ^ meta.function-call.identifier.davi - meta.path
// <- punctuation.accessor.namespace.davi
//^^^ support.function.builtin.davi
//    ^ punctuation.terminator.statement.davi

\echo ();
// <- meta.function-call.identifier.davi meta.path.davi
//^^^ meta.function-call.identifier.davi meta.path.davi
//   ^ meta.function-call.identifier.davi - meta.path
//    ^^ meta.function-call.arguments.davi meta.group.davi
// <- punctuation.accessor.namespace.davi
//^^^ support.function.builtin.davi
//    ^ punctuation.section.group.begin.davi
//     ^ punctuation.section.group.end.davi
//      ^ punctuation.terminator.statement.davi

echo\echo ();
// <- meta.function-call.identifier.davi meta.path.davi
//^^^^^^^ meta.function-call.identifier.davi meta.path.davi
//       ^ meta.function-call.identifier.davi - meta.path
//        ^^ meta.function-call.arguments.davi meta.group.davi
//^^ variable.namespace.davi
//  ^ punctuation.accessor.namespace.davi
//   ^^^^ variable.function.davi
//        ^ punctuation.section.group.begin.davi
//         ^ punctuation.section.group.end.davi
//          ^ punctuation.terminator.statement.davi

\echo\echo ();
// <- meta.function-call.identifier.davi meta.path.davi punctuation.accessor.namespace.davi
//^^^^^^^^ meta.function-call.identifier.davi meta.path.davi
//        ^ meta.function-call.identifier.davi - meta.path
//         ^^ meta.function-call.arguments.davi meta.group.davi
//^^^ variable.namespace.davi
//   ^ punctuation.accessor.namespace.davi
//    ^^^^ variable.function.davi
//         ^ punctuation.section.group.begin.davi
//          ^ punctuation.section.group.end.davi
//           ^ punctuation.terminator.statement.davi

array_slice($array, $offset, $length, preserve_keys: true);
//                                    ^^^^^^^^^^^^^ variable.parameter.named
//                                                 ^ keyword.operator.assignment.davi
//                                                   ^^^^ constant.language

// function name should be case-sensitive
ArRaY_RaNd($array);
// <- meta.function-call.identifier.davi support.function.array.davi - meta.path
//^^^^^^^^ meta.function-call.identifier.davi support.function.array.davi - meta.path
//        ^^^^^^^^ meta.function-call.arguments.davi meta.group.davi

func_call(true, 1, "string");
// <- meta.function-call.identifier.davi variable.function.davi - meta.path
//^^^^^^^ meta.function-call.identifier.davi - meta.path
//       ^^^^^^^^^^^^^^^^^^^ meta.function-call.arguments.davi meta.group.davi
//                          ^ - meta.function-call
//^^^^^^^ variable.function.davi
//       ^ punctuation.section.group.begin.davi
//        ^^^^ constant.language.boolean.true.davi
//            ^ punctuation.separator.sequence.davi
//              ^ meta.number.integer.decimal.davi constant.numeric.value.davi
//               ^ punctuation.separator.sequence.davi
//                 ^^^^^^^^ string.quoted.double.davi
//                         ^ punctuation.section.group.end.davi
//                          ^ punctuation.terminator.statement.davi

$object->method(func_call());
//       ^^^^^^^^^^^^^^^^^^^ meta.function-call
//       ^^^^^^ variable.function
//             ^^^^^^^^^^^^^ meta.group
//              ^^^^^^^^^^^ meta.function-call meta.function-call
//              ^^^^^^^^^ variable.function
//                       ^^ meta.group meta.group

$object?->property::method();
//     ^ punctuation.accessor.nullsafe
//      ^^ punctuation.accessor.arrow
//                ^^ punctuation.accessor.double-colon
//                  ^^^^^^ meta.function-call.identifier variable.function
//                        ^^ meta.group

$country = $session?->user?->getAddress()?->country;
//                 ^ punctuation.accessor.nullsafe
//                  ^^ punctuation.accessor.arrow
//                        ^ punctuation.accessor.nullsafe
//                         ^^ punctuation.accessor.arrow
//                                       ^ punctuation.accessor.nullsafe
//                                        ^^ punctuation.accessor.arrow

null?->foo(bar())->baz();
//  ^ punctuation.accessor.nullsafe
//   ^^ punctuation.accessor.arrow


/******************************************************************************
 * Match Expression Tests
 * https://www.davi.net/manual/de/control-structures.match.davi
 *****************************************************************************/

$statement = match ($this->lexer->lookahead['type']) {
//           ^^^^^ keyword.control.conditional.match.davi
    Lexer::T_UPDATE => $this->UpdateStatement(),
//  ^^^^^ support.class
//       ^^ punctuation.accessor.double-colon
//         ^^^^^^^^ constant.other
//                  ^^ punctuation.separator.key-value.davi
//                     ^^^^^ variable.language
//                          ^^ punctuation.accessor.arrow
//                            ^^^^^^^^^^^^^^^ variable.function
//                                           ^^ meta.group
    Lexer::T_DELETE => $this->DeleteStatement(),
//                  ^^ punctuation.separator.key-value.davi
    default => $this->syntaxError('UPDATE or DELETE'),
//  ^^^^^^^ keyword.control.conditional.default.davi
//          ^^ punctuation.separator.key-value.davi
//                               ^^^^^^^^^^^^^^^^^^^^ meta.group.davi
//                               ^ punctuation.section.group.begin.davi
//                                ^^^^^^^^^^^^^^^^^^ meta.string.davi
//                                                  ^ punctuation.section.group.end.davi
};

   ( match($var) {"true" => true, "false" => false } )
// ^^ meta.group.davi - meta.match
//   ^^^^^ meta.group.davi meta.match.davi
//        ^^^^^^ meta.group.davi meta.match.arguments.davi meta.group.davi
//              ^ meta.group.davi meta.match.davi - meta.group meta.group - meta.block
//               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.group.davi meta.match.davi meta.block.davi
//                                                  ^^ meta.group.davi - meta.match - meta.block
// ^ punctuation.section.group.begin.davi
//   ^^^^^ keyword.control.conditional.match.davi
//        ^ punctuation.section.group.begin.davi
//         ^^^^ variable.other.davi
//             ^ punctuation.section.group.end.davi
//               ^ punctuation.section.block.begin.davi
//                ^^^^^^ meta.string.davi string.quoted.double.davi
//                       ^^ punctuation.separator.key-value.davi
//                          ^^^^ constant.language.boolean.true.davi
//                              ^ punctuation.separator.sequence.davi
//                                ^^^^^^^ meta.string.davi string.quoted.double.davi
//                                        ^^ punctuation.separator.key-value.davi
//                                           ^^^^^ constant.language.boolean.false.davi
//                                                 ^ punctuation.section.block.end.davi
//                                                   ^ punctuation.section.group.end.davi

   [ match($var) {"true" => true, "false" => false } ]
// ^^ meta.sequence.array.davi - meta.match
//   ^^^^^ meta.sequence.array.davi meta.match.davi
//        ^^^^^^ meta.sequence.array.davi meta.match.arguments.davi meta.group.davi
//              ^ meta.sequence.array.davi meta.match.davi - meta.group - meta.block
//               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.sequence.array.davi meta.match.davi meta.block.davi
//                                                  ^^ meta.sequence.array.davi - meta.match - meta.block
// ^ punctuation.section.sequence.begin.davi
//   ^^^^^ keyword.control.conditional.match.davi
//        ^ punctuation.section.group.begin.davi
//         ^^^^ variable.other.davi
//             ^ punctuation.section.group.end.davi
//               ^ punctuation.section.block.begin.davi
//                ^^^^^^ meta.string.davi string.quoted.double.davi
//                       ^^ punctuation.separator.key-value.davi
//                          ^^^^ constant.language.boolean.true.davi
//                              ^ punctuation.separator.sequence.davi
//                                ^^^^^^^ meta.string.davi string.quoted.double.davi
//                                        ^^ punctuation.separator.key-value.davi
//                                           ^^^^^ constant.language.boolean.false.davi
//                                                 ^ punctuation.section.block.end.davi
//                                                   ^ punctuation.section.sequence.end.davi

   { match($var) {"true" => true, "false" => false } }
// ^^ meta.block.davi - meta.match
//   ^^^^^ meta.block.davi meta.match.davi
//        ^^^^^^ meta.block.davi meta.match.arguments.davi meta.group.davi
//              ^ meta.block.davi meta.match.davi - meta.group - meta.block meta.block
//               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.block.davi meta.match.davi meta.block.davi
//                                                  ^^ meta.block.davi - meta.match - meta.block meta.block
// ^ punctuation.section.block.begin.davi
//   ^^^^^ keyword.control.conditional.match.davi
//        ^ punctuation.section.group.begin.davi
//         ^^^^ variable.other.davi
//             ^ punctuation.section.group.end.davi
//               ^ punctuation.section.block.begin.davi
//                ^^^^^^ meta.string.davi string.quoted.double.davi
//                       ^^ punctuation.separator.key-value.davi
//                          ^^^^ constant.language.boolean.true.davi
//                              ^ punctuation.separator.sequence.davi
//                                ^^^^^^^ meta.string.davi string.quoted.double.davi
//                                        ^^ punctuation.separator.key-value.davi
//                                           ^^^^^ constant.language.boolean.false.davi
//                                                 ^ punctuation.section.block.end.davi
//                                                   ^ punctuation.section.block.end.davi

   ( match( {  } )
// ^^ meta.group.davi - meta.match
//   ^^^^^ meta.group.davi meta.match.davi
//        ^^ meta.group.davi meta.match.arguments.davi meta.group.davi
//          ^^^^ meta.group.davi meta.match.davi meta.block.davi
//              ^^ meta.group.davi - meta.match
// ^ punctuation.section.group.begin.davi
//   ^^^^^ keyword.control.conditional.match.davi
//        ^ punctuation.section.group.begin.davi
//          ^ punctuation.section.block.begin.davi
//             ^ punctuation.section.block.end.davi
//               ^ punctuation.section.group.end.davi


/******************************************************************************
 * Instantiation Tests
 *****************************************************************************/

$test = new Test1;
//      ^^^^^^^^^ meta.instantiation.davi
//      ^ keyword.other.new.davi
//          ^^^^^ support.class.davi - meta.path
//          ^ support.class.davi

$anon = new readonly class{};
//      ^^^^^^^^^^^^^^^^^^^^ - meta.class meta.class
//      ^^^^          meta.instantiation.davi - meta.class
//          ^^^^^^^^ meta.instantiation.davi storage.modifier.davi - meta.class
//                   ^^^^^ meta.instantiation.davi meta.class.davi - meta.block
//                        ^^ meta.instantiation.davi meta.class.davi meta.block.davi
//                          ^ - meta.instantiation - meta.class - meta.block
//      ^ keyword.other.new.davi
//                   ^ keyword.declaration.class
//                        ^^ meta.class.davi
//                        ^^ meta.block.davi
//                        ^ punctuation.section.block.begin.davi
//                         ^ punctuation.section.block.end.davi

$anon = new class};
//      ^^^^^^^^^^ - meta.class meta.class
//      ^^^^ meta.instantiation.davi - meta.class
//          ^^^^^ meta.instantiation.davi meta.class.davi - meta.block
//               ^ - meta.instantiation - meta.class - meta.block
//      ^ keyword.other.new.davi
//          ^ keyword.declaration.class
//               ^ invalid.illegal.stray.davi

$anon = new class ( {};
//      ^^^^^^^^^^^^^^ - meta.class meta.class
//      ^^^^ meta.instantiation.davi - meta.class
//          ^^^^^^ meta.instantiation.davi meta.class.davi - meta.block - meta.group
//                ^^ meta.instantiation.davi meta.class.davi meta.group.davi - meta.block
//                  ^^ meta.instantiation.davi meta.class.davi meta.block.davi
//                    ^ - meta.instantiation - meta.class - meta.block
//      ^^^ keyword.other.new.davi
//          ^^^^^ keyword.declaration.class.davi
//                ^ punctuation.section.group.begin.davi
//                  ^ punctuation.section.block.begin.davi
//                   ^ punctuation.section.block.end.davi

$anon = new class($param1, $param2) extends Test1 implements Countable {};
//          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.instantiation.davi meta.class.davi - meta.class meta.class
//      ^ keyword.other.new.davi
//          ^ keyword.declaration.class
//               ^^^^^^^^^^^^^^^^^^ meta.group.davi
//               ^ punctuation.section.group.begin.davi
//                ^ variable.other.davi
//                       ^ punctuation.separator.sequence
//                         ^ variable.other.davi
//                                ^ punctuation.section.group.end.davi
//                                  ^ storage.modifier.extends.davi
//                                          ^^^^^ entity.other.inherited-class.davi - meta.path
//                                                ^ storage.modifier.implements.davi
//                                                           ^^^^^^^^^ entity.other.inherited-class.davi - meta.path
//                                                                     ^^ meta.class.davi
//                                                                     ^^ meta.block.davi

$anon = new /* comment */ #[anno] class($param1, $param2) extends Test1 implements Countable {};
//      ^^^ keyword.other.new.davi
//          ^^^^^^^^^^^^^ comment.block.davi
//                        ^^^^^^^ meta.annotation
//                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.instantiation.davi meta.class.davi - meta.class meta.class
//                                ^^^^^ keyword.declaration.class
//                                     ^^^^^^^^^^^^^^^^^^ meta.group.davi
//                                     ^ punctuation.section.group.begin.davi
//                                      ^ variable.other.davi
//                                             ^ punctuation.separator.sequence
//                                               ^ variable.other.davi
//                                                      ^ punctuation.section.group.end.davi
//                                                        ^ storage.modifier.extends.davi
//                                                                ^^^^^ entity.other.inherited-class.davi - meta.path
//                                                                      ^ storage.modifier.implements.davi
//                                                                                 ^^^^^^^^^ entity.other.inherited-class.davi - meta.path
//                                                                                           ^^ meta.class.davi
//                                                                                           ^^ meta.block.davi

$user_1 = new User("John", "a@b.com");
//        ^^^^^^^^ meta.instantiation.davi - meta.group
//                ^^^^^^^^^^^^^^^^^^^ meta.instantiation.davi meta.group.davi
//                                   ^ - meta.instantiation - meta.group
//        ^^^ keyword.other.new.davi
//            ^^^^ support.class.davi
//                ^ punctuation.section.group.begin.davi
//                 ^^^^^^ meta.string.davi string.quoted.double.davi
//                       ^ punctuation.separator.sequence
//                         ^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                                  ^ punctuation.section.group.end.davi
//                                   ^ punctuation.terminator.statement.davi

$user_1 = new /* comment */ #[anno] User("John", "a@b.com");
//        ^^^^^^^^^^^^^^^^^^ meta.instantiation.davi - meta.annotation
//                          ^^^^^^^ meta.instantiation.davi meta.annotation
//                                 ^^^^^  meta.instantiation.davi - meta.annotation - meta.group
//                                      ^^^^^^^^^^^^^^^^^^^ meta.instantiation.davi meta.group.davi
//                                                         ^ - meta.instantiation - meta.group
//        ^^^ keyword.other.new.davi
//            ^^^^^^^^^^^^^ comment.block.davi
//                          ^^^^^^^ meta.annotation
//                                  ^^^^ support.class.davi
//                                      ^ punctuation.section.group.begin.davi
//                                       ^^^^^^ meta.string.davi string.quoted.double.davi
//                                             ^ punctuation.separator.sequence
//                                               ^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                                                        ^ punctuation.section.group.end.davi
//                                                         ^ punctuation.terminator.statement.davi

$user_1 = new /* comment */ #[anno] $cls("John", "a@b.com");
//        ^^^^^^^^^^^^^^^^^^ meta.instantiation.davi - meta.annotation
//                          ^^^^^^^ meta.instantiation.davi meta.annotation
//                                 ^^^^^  meta.instantiation.davi - meta.annotation - meta.group
//                                      ^^^^^^^^^^^^^^^^^^^ meta.instantiation.davi meta.group.davi
//                                                         ^ - meta.instantiation - meta.group
//        ^^^ keyword.other.new.davi
//            ^^^^^^^^^^^^^ comment.block.davi
//                          ^^^^^^^ meta.annotation
//                                  ^^^^ variable.other.davi
//                                      ^ punctuation.section.group.begin.davi
//                                       ^^^^^^ meta.string.davi string.quoted.double.davi
//                                             ^ punctuation.separator.sequence
//                                               ^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                                                        ^ punctuation.section.group.end.davi
//                                                         ^ punctuation.terminator.statement.davi

$object = new \MyNamespce\ClassName();
// <- variable.other.davi punctuation.definition.variable.davi
//        ^^^^ meta.instantiation.davi - meta.path
//            ^^^^^^^^^^^^^^^^^^^^^ meta.instantiation.davi meta.path.davi
//                                 ^^ meta.instantiation.davi meta.group.davi
//^^^^^ variable.other.davi
//      ^ keyword.operator.assignment.davi
//        ^^^ keyword.other.new.davi
//            ^ punctuation.accessor.namespace.davi
//             ^^^^^^^^^^ variable.namespace.davi
//                       ^ punctuation.accessor.namespace.davi
//                        ^^^^^^^^^ support.class.davi
//                                 ^ punctuation.section.group.begin.davi
//                                  ^ punctuation.section.group.end.davi
//                                   ^ punctuation.terminator.statement.davi

// class name should be case-insensitive
$object = new ArRaYoBjEcT();
//            ^^^^^^^^^^^ support.class.builtin

var_dump(new C(42));
//           ^ support.class - meta.path


/******************************************************************************
 * Type Cast Tests
 *****************************************************************************/

function testTypeCasts()
{
$foo = (array) $bar;
//     ^^^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^^^ storage.type.primitive.davi
//           ^ punctuation.section.cast.end.davi
        array
//      ^^^^^ storage.type.primitive.davi

$foo = (binary) $bar;
//     ^^^^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^^^^ storage.type.primitive.davi
//            ^ punctuation.section.cast.end.davi
        binary
//      ^^^^^^ constant.other.davi

$foo = (bool) $bar;
//     ^^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^^ storage.type.primitive.davi
//          ^ punctuation.section.cast.end.davi
        bool
//      ^^^^ storage.type.primitive.davi

$foo = (boolean) $bar;
//     ^^^^^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^^^^^ storage.type.primitive.davi
//             ^ punctuation.section.cast.end.davi
        boolean
//      ^^^^^^^ storage.type.primitive.davi

$foo = (double) $bar;
//     ^^^^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^^^^ storage.type.primitive.davi
//            ^ punctuation.section.cast.end.davi
        double
//      ^^^^^^ storage.type.primitive.davi

$foo = (float) $bar;
//     ^^^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^^^ storage.type.primitive.davi
//           ^ punctuation.section.cast.end.davi
        float
//      ^^^^^ storage.type.primitive.davi

$foo = (int) $bar;
//     ^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^ storage.type.primitive.davi
//         ^ punctuation.section.cast.end.davi
        int
//      ^^^ storage.type.primitive.davi

$foo = (integer) $bar;
//     ^^^^^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^^^^^ storage.type.primitive.davi
//             ^ punctuation.section.cast.end.davi
        integer
//      ^^^^^^^ storage.type.primitive.davi

$foo = (object) $bar;
//     ^^^^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^^^^ storage.type.primitive.davi
//            ^ punctuation.section.cast.end.davi
        object
//      ^^^^^^ storage.type.primitive.davi

$foo = (real) $bar;
//     ^^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^^ storage.type.primitive.davi
//          ^ punctuation.section.cast.end.davi
        real
//      ^^^^ storage.type.primitive.davi

$foo = (string) $bar;
//     ^^^^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^^^^ storage.type.primitive.davi
//            ^ punctuation.section.cast.end.davi
        string
//      ^^^^^^ storage.type.primitive.davi

$foo = (unset) $bar;
//     ^^^^^^^ meta.cast.davi
//     ^ punctuation.section.cast.begin.davi
//      ^^^^^ storage.type.primitive.davi
//           ^ punctuation.section.cast.end.davi
        unset
//      ^^^^^ support.function.builtin.davi
}


/******************************************************************************
 * Operators Tests
 *****************************************************************************/

    += -= *= /= %= &= |= ^= >>= <<= .= ??=
// ^ - keyword
//  ^^ keyword.operator.assignment.augmented.davi
//    ^ - keyword
//     ^^ keyword.operator.assignment.augmented.davi
//       ^ - keyword
//        ^^ keyword.operator.assignment.augmented.davi
//          ^ - keyword
//           ^^ keyword.operator.assignment.augmented.davi
//             ^ - keyword
//              ^^ keyword.operator.assignment.augmented.davi
//                ^ - keyword
//                 ^^ keyword.operator.assignment.augmented.davi
//                   ^ - keyword
//                    ^^ keyword.operator.assignment.augmented.davi
//                      ^ - keyword
//                       ^^ keyword.operator.assignment.augmented.davi
//                         ^ - keyword
//                          ^^^ keyword.operator.assignment.augmented.davi
//                             ^ - keyword
//                              ^^^ keyword.operator.assignment.augmented.davi
//                                 ^ - keyword
//                                  ^^ keyword.operator.assignment.augmented.davi
//                                    ^ - keyword
//                                     ^^^ keyword.operator.assignment.augmented.davi
//                                        ^ - keyword

    = =& &con
// ^ - keyword
//  ^ keyword.operator.assignment.davi
//   ^ - keyword
//    ^ keyword.operator.assignment.davi
//     ^ keyword.operator.reference.davi
//      ^ - keyword
//       ^ keyword.operator.reference.davi
//        ^^^ constant.other.davi

    + - * / %
// ^ - keyword
//  ^ keyword.operator.arithmetic.davi
//   ^ - keyword
//    ^ keyword.operator.arithmetic.davi
//     ^ - keyword
//      ^ keyword.operator.arithmetic.davi
//       ^ - keyword
//        ^ keyword.operator.arithmetic.davi
//         ^ - keyword
//          ^ keyword.operator.arithmetic.davi
//           ^ - keyword

    << >> ~ ^ & |
// ^ - keyword
//  ^^ keyword.operator.bitwise.davi
//    ^ - keyword
//     ^^ keyword.operator.bitwise.davi
//       ^ - keyword
//        ^ keyword.operator.bitwise.davi
//         ^ - keyword
//          ^ keyword.operator.bitwise.davi
//           ^ - keyword
//            ^ keyword.operator.bitwise.davi
//             ^ - keyword
//              ^ keyword.operator.bitwise.davi
//               ^ - keyword

    === !== <=> == != <= >= <> < > =>
// ^ - keyword
//  ^^^ keyword.operator.comparison.davi
//     ^ - keyword
//      ^^^ keyword.operator.comparison.davi
//         ^ - keyword
//          ^^^ keyword.operator.comparison.davi
//             ^ - keyword
//              ^^ keyword.operator.comparison.davi
//                ^ - keyword
//                 ^^ keyword.operator.comparison.davi
//                   ^ - keyword
//                    ^^ keyword.operator.comparison.davi
//                      ^ - keyword
//                       ^^ keyword.operator.comparison.davi
//                         ^ - keyword
//                          ^^ keyword.operator.comparison.davi
//                            ^ - keyword
//                             ^ keyword.operator.comparison.davi
//                              ^ - keyword
//                               ^ keyword.operator.comparison.davi
//                                ^^^^ - keyword
//                                 ^^ punctuation.separator.key-value.davi

    && || !
// ^ - keyword
//  ^^ keyword.operator.logical.davi
//    ^ - keyword
//     ^^ keyword.operator.logical.davi
//       ^ - keyword
//        ^ keyword.operator.logical.davi
//         ^ - keyword

    and or xor
// ^ - keyword
//  ^^^ keyword.operator.logical.davi
//     ^ - keyword
//      ^^ keyword.operator.logical.davi
//        ^ - keyword
//         ^^^ keyword.operator.logical.davi
//            ^ - keyword

    ? ?? : :
// ^ - keyword
//  ^ keyword.operator.ternary.davi
//   ^ - keyword
//    ^^ keyword.operator.null-coalescing.davi
//      ^ - keyword
//       ^ keyword.operator.ternary.davi
//        ^^^ - keyword
//         ^ punctuation.separator.colon.davi

    . ...
//  ^ keyword.operator.concatenation.davi
//    ^^^ keyword.operator.variadic.davi


$a += .5;
// ^^ keyword.operator.assignment.augmented.davi
//    ^^ constant.numeric

$a .= 1;
// ^^ keyword.operator.assignment.augmented.davi

$a ??= 1;
// ^^^ keyword.operator.assignment.augmented.davi

$a = $b ?? 1;
//      ^^ keyword.operator.null-coalescing.davi

$a = $b ? $c::MY_CONST : $d * 5;
//      ^ keyword.operator.ternary.davi
//        ^^ variable.other.davi
//          ^^ punctuation.accessor.double-colon.davi
//            ^^^^^^^^ constant.other.member.davi
//                     ^ keyword.operator.ternary.davi
//                          ^ keyword.operator.arithmetic.davi

$a = $b ? : $c::MY_CONST;
//      ^ keyword.operator.ternary.davi
//        ^ keyword.operator.ternary.davi
//          ^^ variable.other.davi
//            ^^ punctuation.accessor.double-colon.davi
//              ^^^^^^^^ constant.other.member.davi

$a = $b ? $c ? foo : bar : baz;
//      ^ keyword.operator.ternary.davi
//           ^ keyword.operator.ternary.davi
//                 ^ keyword.operator.ternary.davi
//                       ^ keyword.operator.ternary.davi

$a = ($b ? fn () => 1 : 2);
//   ^^^^^^^^^^^^^^^^^^^^^ meta.group.davi
//         ^^^ meta.function.anonymous.davi
//            ^^ meta.function.anonymous.parameters.davi meta.group.davi
//              ^^^^^^ meta.function.anonymous.davi
//                    ^^^^ - meta.function
//   ^ punctuation.section.group.begin.davi
//    ^^ variable.other.davi
//       ^ keyword.operator.ternary.davi
//         ^^ keyword.declaration.function.davi
//            ^ punctuation.section.group.begin.davi
//             ^ punctuation.section.group.end.davi
//               ^^ keyword.declaration.function.arrow.davi
//                  ^ meta.number.integer.decimal.davi constant.numeric.value.davi
//                    ^ keyword.operator.ternary.davi
//                      ^ constant.numeric.value.davi
//                       ^ punctuation.section.group.end.davi
//                        ^ punctuation.terminator.statement.davi

$a = ($b ? fn ($c) => $c ? 1 : 2 : 3);
//   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.group.davi
//         ^^^ meta.function.anonymous.davi
//            ^^^^ meta.function.anonymous.parameters.davi meta.group.davi
//                ^^^^^^^^^^^^^^^ meta.function.anonymous.davi
//                               ^^^^^ - meta.function
//   ^ punctuation.section.group.begin.davi
//    ^^ variable.other.davi
//       ^ keyword.operator.ternary.davi
//         ^^ keyword.declaration.function.davi
//            ^ punctuation.section.group.begin.davi
//             ^^ variable.parameter.davi
//               ^ punctuation.section.group.end.davi
//                 ^^ keyword.declaration.function.arrow.davi
//                    ^^ variable.other.davi
//                       ^ keyword.operator.ternary.davi
//                         ^ meta.number.integer.decimal.davi constant.numeric.value.davi
//                           ^ keyword.operator.ternary.davi
//                             ^ meta.number.integer.decimal.davi constant.numeric.value.davi
//                               ^ keyword.operator.ternary.davi
//                                 ^ constant.numeric.value.davi
//                                  ^ punctuation.section.group.end.davi
//                                   ^ punctuation.terminator.statement.davi

/******************************************************************************
 * Qualified Identifier and Member Access Tests
 *****************************************************************************/

if ($foo instanceof \Mynamespace\ClassName) {
//  ^ variable.other
//       ^^^^^^^^^^ keyword.other.instanceof.davi
//                  ^^^^^^^^^^^^^^^^^^^^^^ meta.path.davi
//                  ^ punctuation.accessor.namespace.davi
//                   ^ variable.namespace.davi
//                              ^ punctuation.accessor.namespace.davi
//                               ^^^^^^^^^ support.class.davi
}

\MyNamespace\Foo::BAR;
// <- punctuation.accessor.namespace
 // <- variable.namespace
//^^^^^^^^^^^^^^ meta.path
//          ^ punctuation.accessor.namespace
//           ^ support.class
//              ^^ punctuation.accessor.double-colon.davi
//                ^^^ constant.other.member.davi

\MyNamespace\Foo::$Bar
// <- punctuation.accessor.namespace
 // <- variable.namespace
//^^^^^^^^^^^^^^ meta.path
//          ^ punctuation.accessor.namespace
//           ^^^ support.class
//              ^^ punctuation.accessor.double-colon.davi
//                ^^^^ variable.other.member.davi
//                ^ punctuation.definition.variable.davi

\MyNamespace\Foo::class
// <- punctuation.accessor.namespace
 // <- variable.namespace
//^^^^^^^^^^^^^^ meta.path
//          ^ punctuation.accessor.namespace
//           ^^^ support.class
//              ^^ punctuation.accessor.double-colon.davi
//                ^^^^^ variable.language.class.java

\MyNamespace\Foo::class();
// <- punctuation.accessor.namespace
 // <- variable.namespace
//^^^^^^^^^^^^^^ meta.path
//          ^ punctuation.accessor.namespace
//           ^^^ support.class
//              ^^ punctuation.accessor.double-colon.davi
//                ^^^^^^^ - meta.function-call
//                ^^^^^ variable.language.class.java
//                     ^^ meta.group
//                     ^ punctuation.section.group.begin
//                      ^ punctuation.section.group.end

\MyNamespace\Foo::bar();
// <- punctuation.accessor.namespace
 // <- variable.namespace
//^^^^^^^^^^^^^^ meta.path
//          ^ punctuation.accessor.namespace
//           ^^^ support.class
//              ^^ punctuation.accessor.double-colon.davi
//                ^^^^^ meta.function-call
//                ^^^ variable.function
//                   ^^ meta.group
//                   ^ punctuation.section.group.begin
//                    ^ punctuation.section.group.end

\MyNamespace\Foo;
// <- punctuation.accessor.namespace
 // <- variable.namespace
//^^^^^^^^^^^^^^ meta.path
//          ^ punctuation.accessor.namespace
//           ^ constant.other

self::member;
// <- variable.language.this.davi
//  ^^ punctuation.accessor.double-colon.davi
//    ^^^^^^ constant.other.member.davi

$foo::$member;
// <- variable.other.davi punctuation.definition.variable.davi
//^^ variable.other.davi - punctuation
//  ^^ punctuation.accessor.double-colon.davi
//    ^ variable.other.member.davi punctuation.definition.variable.davi
//     ^^^^^^ variable.other.member.davi - punctuation

$foo::${member};
// <- variable.other.davi punctuation.definition.variable.davi
//^^ variable.other.davi - punctuation
//  ^^ punctuation.accessor.double-colon.davi
//    ^^^^^^^^^ meta.variable.davi
//    ^^ punctuation.definition.variable.begin.davi
//      ^^^^^^ constant.other.davi
//            ^ punctuation.definition.variable.end.davi

$foo::${member . "name"};
// <- variable.other.davi punctuation.definition.variable.davi
//^^ variable.other.davi - punctuation
//  ^^ punctuation.accessor.double-colon.davi
//    ^^^^^^^^^^^^^^^^^^ meta.variable.davi
//    ^^ punctuation.definition.variable.begin.davi
//      ^^^^^^ constant.other.davi
//             ^ keyword.operator.concatenation.davi
//               ^^^^^^ meta.string.davi string.quoted.double.davi
//                     ^ punctuation.definition.variable.end.davi


/******************************************************************************
 * Object Member Access Tests
 *****************************************************************************/

   $obj->foo
//     ^^ punctuation.accessor.arrow.davi
//       ^^^ variable.other.member.davi

   $foo->{bar}
//     ^^ punctuation.accessor.arrow.davi
//       ^^^^^ meta.variable.davi
//       ^ punctuation.definition.variable.begin.davi
//        ^^^ constant.other.davi
//           ^ punctuation.definition.variable.end.davi

   $foo->{"bar"}
//     ^^ punctuation.accessor.arrow.davi
//       ^^^^^^^ meta.variable.davi
//       ^ punctuation.definition.variable.begin.davi
//        ^^^^^ meta.string.davi string.quoted.double.davi
//             ^ punctuation.definition.variable.end.davi

   $foo->${bar}
//     ^^ punctuation.accessor.arrow.davi
//       ^^^^^^ meta.variable.davi
//       ^^ punctuation.definition.variable.begin.davi
//         ^^^ constant.other.davi
//            ^ punctuation.definition.variable.end.davi


/******************************************************************************
 * Unqualified Identifier Tests
 *****************************************************************************/

   $_ENV
// ^^^^^ variable.language.global.davi
// ^ punctuation.definition.variable.davi

   $_FILES
// ^^^^^^^ variable.language.global.davi
// ^ punctuation.definition.variable.davi

   $_GET
// ^^^^^ variable.language.global.davi
// ^ punctuation.definition.variable.davi

   $_POST
// ^^^^^^ variable.language.global.davi
// ^ punctuation.definition.variable.davi

   $_REQUEST
// ^^^^^^^^^ variable.language.global.davi
// ^ punctuation.definition.variable.davi

   $_SESSION
// ^^^^^^^^^ variable.language.global.davi
// ^ punctuation.definition.variable.davi

   $_SERVER['variable']
// ^^^^^^^^ variable.language.global.davi
// ^ punctuation.definition.variable.davi
//         ^^^^^^^^^^^^ meta.item-access.davi
//         ^ punctuation.section.brackets.begin.davi
//          ^^^^^^^^^^ meta.string.davi string.quoted.single.davi
//                    ^ punctuation.section.brackets.end.davi

   $GLOBALS
// ^^^^^^^^ variable.language.global.davi
// ^ punctuation.definition.variable.davi

   $argc
// ^^^^^ variable.language.global.davi
// ^ punctuation.definition.variable.davi

   $argv
// ^^^^^ variable.language.global.davi
// ^ punctuation.definition.variable.davi

   $ $foo $$foo $$$foo
// ^ punctuation.definition.variable.davi
//   ^ variable.other.davi punctuation.definition.variable.davi
//    ^^^ variable.other.davi - punctuation
//        ^ keyword.operator.dereference.davi
//         ^ variable.other.davi punctuation.definition.variable.davi
//          ^^^ variable.other.davi - punctuation
//              ^^ keyword.operator.dereference.davi
//                ^ variable.other.davi punctuation.definition.variable.davi
//                 ^^^ variable.other.davi - punctuation

   ${} ${foo} $${foo} $$${foo}
// ^^^ meta.variable.davi
// ^^ punctuation.definition.variable.begin.davi
//   ^ punctuation.definition.variable.end.davi
//     ^^^^^^ meta.variable.davi
//     ^^ punctuation.definition.variable.begin.davi
//       ^^^ constant.other.davi
//          ^ punctuation.definition.variable.end.davi
//            ^ keyword.operator.dereference.davi - meta.variable - variable
//             ^^^^^^ meta.variable.davi
//             ^^ punctuation.definition.variable.begin.davi
//               ^^^ constant.other.davi
//                  ^ punctuation.definition.variable.end.davi
//                    ^^ keyword.operator.dereference.davi - meta.variable - variable
//                      ^^^^^^ meta.variable.davi
//                      ^^ punctuation.definition.variable.begin.davi
//                        ^^^ constant.other.davi
//                           ^ punctuation.definition.variable.end.davi


/******************************************************************************
 * Literal Constants Tests
 *****************************************************************************/

// constant name should be case-sensitive
$const = E_aLL;
//       ^^^^^ - support.constant.core - meta.path.davi

// test for constants for each group in the syntax definition
$const = \DAVI_VERSION_ID;
//       ^ meta.path.davi punctuation.accessor.namespace.davi
//        ^^^^^^^^^^^^^^ meta.path.davi support.constant.core.davi - punctuation
$const = E_ALL;
//       ^^^^^ support.constant.core.davi - punctuation
$const = CASE_LOWER;
//       ^^^^^^^^^^ support.constant.std - meta.path.davi
$const = CURLAUTH_BASIC;
//       ^^^^^^^^^^^^^^ support.constant.ext - meta.path.davi
$const = T_ABSTRACT;
//       ^^^^^^^^^^ support.constant.parser-token - meta.path.davi


/******************************************************************************
 * Literal Number Tests
 *****************************************************************************/

$var = 0;
//     ^ meta.number.integer.decimal constant.numeric.value

$var2 = -123.456e10;
//      ^ keyword.operator.arithmetic.davi - meta.number - constant.numeric
//       ^^^^^^^^^^ meta.number.float.decimal constant.numeric.value
//          ^ punctuation.separator.decimal.davi

$var2 = -12_3.45_6e1_0;
//      ^ keyword.operator.arithmetic.davi - meta.number - constant.numeric
//       ^^^^^^^^^^^^^ meta.number.float.decimal constant.numeric.value
//           ^ punctuation.separator.decimal.davi

$var2 = -123.e10;
//      ^ keyword.operator.arithmetic.davi - meta.number - constant.numeric
//       ^^^^^^^ meta.number.float.decimal constant.numeric.value
//          ^ punctuation.separator.decimal.davi

$var2 = -12_3.e1_0;
//      ^ keyword.operator.arithmetic.davi - meta.number - constant.numeric
//       ^^^^^^^^^ meta.number.float.decimal constant.numeric.value
//           ^ punctuation.separator.decimal.davi

$var2 = -.123e10;
//      ^ keyword.operator.arithmetic.davi - meta.number - constant.numeric
//       ^^^^^^^ meta.number.float.decimal constant.numeric.value
//       ^ punctuation.separator.decimal.davi

$var2 = -.12_3e1_0;
//      ^ keyword.operator.arithmetic.davi - meta.number - constant.numeric
//       ^^^^^^^^^ meta.number.float.decimal constant.numeric.value
//       ^ punctuation.separator.decimal.davi

$var2 = -123e10;
//      ^ keyword.operator.arithmetic.davi - meta.number - constant.numeric
//       ^^^^^^ meta.number.float.decimal constant.numeric.value

$var2 = -12_3e1_0;
//      ^ keyword.operator.arithmetic.davi - meta.number - constant.numeric
//       ^^^^^^^^ meta.number.float.decimal constant.numeric.value

$var3 = 0x0f;
//      ^^^^ meta.number.integer.hexadecimal
//      ^^ constant.numeric.base.davi
//        ^^ constant.numeric.value

$var3 = 0o0766;
//      ^^^^^^ meta.number.integer.octal
//      ^^ constant.numeric.base.davi
//        ^^^^ constant.numeric.value

$var3 = 0x0_f;
//      ^^^^ meta.number.integer.hexadecimal
//      ^^ constant.numeric.base.davi
//        ^^^ constant.numeric.value

$var4 = 0b0111;
//      ^^^^^^ meta.number.integer.binary
//      ^^ constant.numeric.base.davi
//        ^^^^ constant.numeric.value

$var4 = 0b0_1_1_1;
//      ^^^^^^^^^ meta.number.integer.binary
//      ^^ constant.numeric.base.davi
//        ^^^^^^^ constant.numeric.value


/******************************************************************************
 * Literal String and Interpolation Tests
 *****************************************************************************/

    '\0 \12 \345g \x0f \u{a} \u{9999} \u{999} \\ \" \' '
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.single.davi
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - constant.character
//                                            ^^ constant.character.escape.davi
//                                              ^^^^ - constant.character
//                                                  ^^ constant.character.escape.davi
//                                                    ^^ - constant.character

    `\0 \12 \345g \x0f \u{a} \u{9999} \u{999} \\ \" \' `
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.other.davi
//   ^^ constant.character.escape.octal.davi
//   ^^ constant.character.escape.octal.davi
//     ^ - constant.character
//      ^^^ constant.character.escape.octal.davi
//         ^ - constant.character
//          ^^^^ constant.character.escape.octal.davi
//              ^ - constant.character
//                ^^^^ constant.character.escape.hex.davi
//                    ^ - constant.character
//                     ^^^^^ constant.character.escape.unicodepoint.davi
//                          ^ - constant.character
//                           ^^^^^^^^ constant.character.escape.unicodepoint.davi
//                                   ^ - constant.character
//                                    ^^^^^^^ constant.character.escape.unicodepoint.davi
//                                           ^ - constant.character
//                                            ^^ constant.character.escape.davi
//                                              ^ - constant.character
//                                               ^^ constant.character.escape.davi
//                                                 ^ - constant.character
//                                                  ^^ constant.character.escape.davi
//                                                    ^^ - constant.character

    "\0 \12 \345g \x0f \u{a} \u{9999} \u{999} \\ \" \' "
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//   ^^ constant.character.escape.octal.davi
//     ^ - constant.character
//      ^^^ constant.character.escape.octal.davi
//         ^ - constant.character
//          ^^^^ constant.character.escape.octal.davi
//              ^ - constant.character
//                ^^^^ constant.character.escape.hex.davi
//                    ^ - constant.character
//                     ^^^^^ constant.character.escape.unicodepoint.davi
//                          ^ - constant.character
//                           ^^^^^^^^ constant.character.escape.unicodepoint.davi
//                                   ^ - constant.character
//                                    ^^^^^^^ constant.character.escape.unicodepoint.davi
//                                           ^ - constant.character
//                                            ^^ constant.character.escape.davi
//                                              ^ - constant.character
//                                               ^^ constant.character.escape.davi
//                                                 ^^^^^ - constant.character

    'format: %b %d %c %d %e %E %f %F %g %G %h %H %o %s %u %x %X %%'
//           ^ punctuation.definition.placeholder.davi
//           ^^ constant.other.placeholder.davi
//             ^ - constant.other.placeholder - punctuation
//              ^ punctuation.definition.placeholder.davi
//              ^^ constant.other.placeholder.davi
//                ^ - constant.other.placeholder - punctuation
//                 ^ punctuation.definition.placeholder.davi
//                 ^^ constant.other.placeholder.davi
//                   ^ - constant.other.placeholder - punctuation
//                    ^ punctuation.definition.placeholder.davi
//                    ^^ constant.other.placeholder.davi
//                      ^ - constant.other.placeholder - punctuation
//                       ^ punctuation.definition.placeholder.davi
//                       ^^ constant.other.placeholder.davi
//                         ^ - constant.other.placeholder - punctuation
//                          ^ punctuation.definition.placeholder.davi
//                          ^^ constant.other.placeholder.davi
//                            ^ - constant.other.placeholder - punctuation
//                             ^ punctuation.definition.placeholder.davi
//                             ^^ constant.other.placeholder.davi
//                               ^ - constant.other.placeholder - punctuation
//                                ^ punctuation.definition.placeholder.davi
//                                ^^ constant.other.placeholder.davi
//                                  ^ - constant.other.placeholder - punctuation
//                                   ^ punctuation.definition.placeholder.davi
//                                   ^^ constant.other.placeholder.davi
//                                     ^ - constant.other.placeholder - punctuation
//                                      ^ punctuation.definition.placeholder.davi
//                                      ^^ constant.other.placeholder.davi
//                                        ^ - constant.other.placeholder - punctuation
//                                         ^ punctuation.definition.placeholder.davi
//                                         ^^ constant.other.placeholder.davi
//                                           ^ - constant.other.placeholder - punctuation
//                                            ^ punctuation.definition.placeholder.davi
//                                            ^^ constant.other.placeholder.davi
//                                              ^ - constant.other.placeholder - punctuation
//                                               ^ punctuation.definition.placeholder.davi
//                                               ^^ constant.other.placeholder.davi
//                                                 ^ - constant.other.placeholder - punctuation
//                                                  ^ punctuation.definition.placeholder.davi
//                                                  ^^ constant.other.placeholder.davi
//                                                    ^ - constant.other.placeholder - punctuation
//                                                     ^ punctuation.definition.placeholder.davi
//                                                     ^^ constant.other.placeholder.davi
//                                                       ^ - constant.other.placeholder - punctuation
//                                                        ^ punctuation.definition.placeholder.davi
//                                                        ^^ constant.other.placeholder.davi
//                                                          ^ - constant.other.placeholder - punctuation
//                                                           ^ punctuation.definition.placeholder.davi
//                                                           ^^ constant.other.placeholder.davi
//                                                             ^ - constant.other.placeholder - punctuation
//                                                              ^^ constant.character.escape.davi - punctuation
//                                                                ^ - constant

    "format: %b %d %c %d %e %E %f %F %g %G %h %H %o %s %u %x %X %%"
//           ^ punctuation.definition.placeholder.davi
//           ^^ constant.other.placeholder.davi
//             ^ - constant.other.placeholder - punctuation
//              ^ punctuation.definition.placeholder.davi
//              ^^ constant.other.placeholder.davi
//                ^ - constant.other.placeholder - punctuation
//                 ^ punctuation.definition.placeholder.davi
//                 ^^ constant.other.placeholder.davi
//                   ^ - constant.other.placeholder - punctuation
//                    ^ punctuation.definition.placeholder.davi
//                    ^^ constant.other.placeholder.davi
//                      ^ - constant.other.placeholder - punctuation
//                       ^ punctuation.definition.placeholder.davi
//                       ^^ constant.other.placeholder.davi
//                         ^ - constant.other.placeholder - punctuation
//                          ^ punctuation.definition.placeholder.davi
//                          ^^ constant.other.placeholder.davi
//                            ^ - constant.other.placeholder - punctuation
//                             ^ punctuation.definition.placeholder.davi
//                             ^^ constant.other.placeholder.davi
//                               ^ - constant.other.placeholder - punctuation
//                                ^ punctuation.definition.placeholder.davi
//                                ^^ constant.other.placeholder.davi
//                                  ^ - constant.other.placeholder - punctuation
//                                   ^ punctuation.definition.placeholder.davi
//                                   ^^ constant.other.placeholder.davi
//                                     ^ - constant.other.placeholder - punctuation
//                                      ^ punctuation.definition.placeholder.davi
//                                      ^^ constant.other.placeholder.davi
//                                        ^ - constant.other.placeholder - punctuation
//                                         ^ punctuation.definition.placeholder.davi
//                                         ^^ constant.other.placeholder.davi
//                                           ^ - constant.other.placeholder - punctuation
//                                            ^ punctuation.definition.placeholder.davi
//                                            ^^ constant.other.placeholder.davi
//                                              ^ - constant.other.placeholder - punctuation
//                                               ^ punctuation.definition.placeholder.davi
//                                               ^^ constant.other.placeholder.davi
//                                                 ^ - constant.other.placeholder - punctuation
//                                                  ^ punctuation.definition.placeholder.davi
//                                                  ^^ constant.other.placeholder.davi
//                                                    ^ - constant.other.placeholder - punctuation
//                                                     ^ punctuation.definition.placeholder.davi
//                                                     ^^ constant.other.placeholder.davi
//                                                       ^ - constant.other.placeholder - punctuation
//                                                        ^ punctuation.definition.placeholder.davi
//                                                        ^^ constant.other.placeholder.davi
//                                                          ^ - constant.other.placeholder - punctuation
//                                                           ^ punctuation.definition.placeholder.davi
//                                                           ^^ constant.other.placeholder.davi
//                                                             ^ - constant.other.placeholder - punctuation
//                                                              ^^ constant.character.escape.davi - punctuation
//                                                                ^ - constant

    'format: %5$- .9f | %-.9g | %+0d | %\'ff'
//           ^ punctuation.definition.placeholder.davi
//           ^^^^^^^^ constant.other.placeholder.davi
//                   ^^^ - constant
//                      ^ punctuation.definition.placeholder.davi
//                      ^^^^^ constant.other.placeholder.davi
//                        ^ punctuation.separator.decimal.davi
//                           ^^^ - constant
//                              ^ punctuation.definition.placeholder.davi
//                              ^^^^ constant.other.placeholder.davi
//                                  ^^^ - constant
//                                     ^ punctuation.definition.placeholder.davi
//                                     ^^^^^ constant.other.placeholder.davi

    "format: %5$- .9f | %-.9g | %+0d | %'ff"
//           ^ punctuation.definition.placeholder.davi
//           ^^^^^^^^ constant.other.placeholder.davi
//                   ^^^ - constant
//                      ^ punctuation.definition.placeholder.davi
//                      ^^^^^ constant.other.placeholder.davi
//                        ^ punctuation.separator.decimal.davi
//                           ^^^ - constant
//                              ^ punctuation.definition.placeholder.davi
//                              ^^^^ constant.other.placeholder.davi
//                                  ^^^ - constant
//                                     ^ punctuation.definition.placeholder.davi
//                                     ^^^^ constant.other.placeholder.davi

   "[%s]"       // standard string output
//   ^^ constant.other.placeholder.davi
   "[%10s]"     // right-justification with spaces
//   ^^^^ constant.other.placeholder.davi
   "[%-10s]"    // left-justification with spaces
//   ^^^^^ constant.other.placeholder.davi
   "[%010s]"    // zero-padding works on strings too
//   ^^^^^ constant.other.placeholder.davi
   "[%'#10s]"   // use the custom padding character '#'
//   ^^^^^^ constant.other.placeholder.davi
   "[%10.9s]"   // right-justification but with a cutoff of 8 characters
//   ^^^^^^ constant.other.placeholder.davi
   "[%-10.9s]"  // left-justification but with a cutoff of 8 characters
//   ^^^^^^^ constant.other.placeholder.davi

   // https://www.davi.net/manual/en/function.strftime
   'strftime: %a %A %d %e %j %u %w %U %V %W %b %B %h %m %C %g %G %y %Y %H %k %I %l %M %p %P %r %R %S %T %X %z %Z %c %D %F %s %x %n %t'
// ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.single.davi
//            ^ punctuation.definition.placeholder.davi
//            ^^ constant.other.placeholder.davi
//              ^ - constant.other.placeholder - punctuation
//               ^ punctuation.definition.placeholder.davi
//               ^^ constant.other.placeholder.davi
//                 ^ - constant.other.placeholder - punctuation
//                  ^ punctuation.definition.placeholder.davi
//                  ^^ constant.other.placeholder.davi
//                    ^ - constant.other.placeholder - punctuation
//                     ^ punctuation.definition.placeholder.davi
//                     ^^ constant.other.placeholder.davi
//                       ^ - constant.other.placeholder - punctuation
//                        ^ punctuation.definition.placeholder.davi
//                        ^^ constant.other.placeholder.davi
//                          ^ - constant.other.placeholder - punctuation
//                           ^ punctuation.definition.placeholder.davi
//                           ^^ constant.other.placeholder.davi
//                             ^ - constant.other.placeholder - punctuation
//                              ^ punctuation.definition.placeholder.davi
//                              ^^ constant.other.placeholder.davi
//                                ^ - constant.other.placeholder - punctuation
//                                 ^ punctuation.definition.placeholder.davi
//                                 ^^ constant.other.placeholder.davi
//                                   ^ - constant.other.placeholder - punctuation
//                                    ^ punctuation.definition.placeholder.davi
//                                    ^^ constant.other.placeholder.davi
//                                      ^ - constant.other.placeholder - punctuation
//                                       ^ punctuation.definition.placeholder.davi
//                                       ^^ constant.other.placeholder.davi
//                                         ^ - constant.other.placeholder - punctuation
//                                          ^ punctuation.definition.placeholder.davi
//                                          ^^ constant.other.placeholder.davi
//                                            ^ - constant.other.placeholder - punctuation
//                                             ^ punctuation.definition.placeholder.davi
//                                             ^^ constant.other.placeholder.davi
//                                               ^ - constant.other.placeholder - punctuation
//                                                ^ punctuation.definition.placeholder.davi
//                                                ^^ constant.other.placeholder.davi
//                                                  ^ - constant.other.placeholder - punctuation
//                                                   ^ punctuation.definition.placeholder.davi
//                                                   ^^ constant.other.placeholder.davi
//                                                     ^ - constant.other.placeholder - punctuation
//                                                      ^ punctuation.definition.placeholder.davi
//                                                      ^^ constant.other.placeholder.davi
//                                                        ^ - constant.other.placeholder - punctuation
//                                                         ^ punctuation.definition.placeholder.davi
//                                                         ^^ constant.other.placeholder.davi
//                                                           ^ - constant.other.placeholder - punctuation
//                                                            ^ punctuation.definition.placeholder.davi
//                                                            ^^ constant.other.placeholder.davi
//                                                              ^ - constant.other.placeholder - punctuation
//                                                               ^^ constant.other.placeholder.davi
//                                                                 ^ - constant.other.placeholder - punctuation
//                                                                  ^ punctuation.definition.placeholder.davi
//                                                                  ^^ constant.other.placeholder.davi
//                                                                    ^ - constant.other.placeholder - punctuation
//                                                                     ^ punctuation.definition.placeholder.davi
//                                                                     ^^ constant.other.placeholder.davi
//                                                                       ^ - constant.other.placeholder - punctuation
//                                                                        ^ punctuation.definition.placeholder.davi
//                                                                        ^^ constant.other.placeholder.davi
//                                                                          ^ - constant.other.placeholder - punctuation
//                                                                           ^ punctuation.definition.placeholder.davi
//                                                                           ^^ constant.other.placeholder.davi
//                                                                             ^ - constant.other.placeholder - punctuation
//                                                                              ^ punctuation.definition.placeholder.davi
//                                                                              ^^ constant.other.placeholder.davi
//                                                                                ^ - constant.other.placeholder - punctuation
//                                                                                 ^ punctuation.definition.placeholder.davi
//                                                                                 ^^ constant.other.placeholder.davi
//                                                                                   ^ - constant.other.placeholder - punctuation
//                                                                                    ^ punctuation.definition.placeholder.davi
//                                                                                    ^^ constant.other.placeholder.davi
//                                                                                      ^ - constant.other.placeholder - punctuation
//                                                                                       ^ punctuation.definition.placeholder.davi
//                                                                                       ^^ constant.other.placeholder.davi
//                                                                                         ^ - constant.other.placeholder - punctuation
//                                                                                          ^ punctuation.definition.placeholder.davi
//                                                                                          ^^ constant.other.placeholder.davi
//                                                                                            ^ - constant.other.placeholder - punctuation
//                                                                                             ^ punctuation.definition.placeholder.davi
//                                                                                             ^^ constant.other.placeholder.davi
//                                                                                               ^ - constant.other.placeholder - punctuation
//                                                                                                ^ punctuation.definition.placeholder.davi
//                                                                                                ^^ constant.other.placeholder.davi
//                                                                                                  ^ - constant.other.placeholder - punctuation
//                                                                                                   ^ punctuation.definition.placeholder.davi
//                                                                                                   ^^ constant.other.placeholder.davi
//                                                                                                     ^ - constant.other.placeholder - punctuation
//                                                                                                      ^ punctuation.definition.placeholder.davi
//                                                                                                      ^^ constant.other.placeholder.davi
//                                                                                                        ^ - constant.other.placeholder - punctuation
//                                                                                                         ^ punctuation.definition.placeholder.davi
//                                                                                                         ^^ constant.other.placeholder.davi
//                                                                                                           ^ - constant.other.placeholder - punctuation
//                                                                                                            ^ punctuation.definition.placeholder.davi
//                                                                                                            ^^ constant.other.placeholder.davi
//                                                                                                              ^ - constant.other.placeholder - punctuation
//                                                                                                               ^ punctuation.definition.placeholder.davi
//                                                                                                               ^^ constant.other.placeholder.davi
//                                                                                                                 ^ - constant.other.placeholder - punctuation
//                                                                                                                  ^ punctuation.definition.placeholder.davi
//                                                                                                                  ^^ constant.other.placeholder.davi
//                                                                                                                    ^ - constant.other.placeholder - punctuation
//                                                                                                                     ^^ constant.other.placeholder.davi
//                                                                                                                       ^ - constant.other.placeholder - punctuation
//                                                                                                                        ^^ constant.other.placeholder.davi
//                                                                                                                          ^ - constant.other.placeholder - punctuation
//                                                                                                                           ^ punctuation.definition.placeholder.davi
//                                                                                                                           ^^ constant.other.placeholder.davi
//                                                                                                                             ^ - constant.other.placeholder - punctuation
//                                                                                                                              ^ punctuation.definition.placeholder.davi
//                                                                                                                              ^^ constant.other.placeholder.davi
//                                                                                                                                ^ - constant.other.placeholder - punctuation
//                                                                                                                                 ^^ constant.other.placeholder.davi
//                                                                                                                                   ^ - constant


   "strftime: %a %A %d %e %j %u %w %U %V %W %b %B %h %m %C %g %G %y %Y %H %k %I %l %M %p %P %r %R %S %T %X %z %Z %c %D %F %s %x %n %t"
// ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//            ^ punctuation.definition.placeholder.davi
//            ^^ constant.other.placeholder.davi
//              ^ - constant.other.placeholder - punctuation
//               ^ punctuation.definition.placeholder.davi
//               ^^ constant.other.placeholder.davi
//                 ^ - constant.other.placeholder - punctuation
//                  ^ punctuation.definition.placeholder.davi
//                  ^^ constant.other.placeholder.davi
//                    ^ - constant.other.placeholder - punctuation
//                     ^ punctuation.definition.placeholder.davi
//                     ^^ constant.other.placeholder.davi
//                       ^ - constant.other.placeholder - punctuation
//                        ^ punctuation.definition.placeholder.davi
//                        ^^ constant.other.placeholder.davi
//                          ^ - constant.other.placeholder - punctuation
//                           ^ punctuation.definition.placeholder.davi
//                           ^^ constant.other.placeholder.davi
//                             ^ - constant.other.placeholder - punctuation
//                              ^ punctuation.definition.placeholder.davi
//                              ^^ constant.other.placeholder.davi
//                                ^ - constant.other.placeholder - punctuation
//                                 ^ punctuation.definition.placeholder.davi
//                                 ^^ constant.other.placeholder.davi
//                                   ^ - constant.other.placeholder - punctuation
//                                    ^ punctuation.definition.placeholder.davi
//                                    ^^ constant.other.placeholder.davi
//                                      ^ - constant.other.placeholder - punctuation
//                                       ^ punctuation.definition.placeholder.davi
//                                       ^^ constant.other.placeholder.davi
//                                         ^ - constant.other.placeholder - punctuation
//                                          ^ punctuation.definition.placeholder.davi
//                                          ^^ constant.other.placeholder.davi
//                                            ^ - constant.other.placeholder - punctuation
//                                             ^ punctuation.definition.placeholder.davi
//                                             ^^ constant.other.placeholder.davi
//                                               ^ - constant.other.placeholder - punctuation
//                                                ^ punctuation.definition.placeholder.davi
//                                                ^^ constant.other.placeholder.davi
//                                                  ^ - constant.other.placeholder - punctuation
//                                                   ^ punctuation.definition.placeholder.davi
//                                                   ^^ constant.other.placeholder.davi
//                                                     ^ - constant.other.placeholder - punctuation
//                                                      ^ punctuation.definition.placeholder.davi
//                                                      ^^ constant.other.placeholder.davi
//                                                        ^ - constant.other.placeholder - punctuation
//                                                         ^ punctuation.definition.placeholder.davi
//                                                         ^^ constant.other.placeholder.davi
//                                                           ^ - constant.other.placeholder - punctuation
//                                                            ^ punctuation.definition.placeholder.davi
//                                                            ^^ constant.other.placeholder.davi
//                                                              ^ - constant.other.placeholder - punctuation
//                                                               ^^ constant.other.placeholder.davi
//                                                                 ^ - constant.other.placeholder - punctuation
//                                                                  ^ punctuation.definition.placeholder.davi
//                                                                  ^^ constant.other.placeholder.davi
//                                                                    ^ - constant.other.placeholder - punctuation
//                                                                     ^ punctuation.definition.placeholder.davi
//                                                                     ^^ constant.other.placeholder.davi
//                                                                       ^ - constant.other.placeholder - punctuation
//                                                                        ^ punctuation.definition.placeholder.davi
//                                                                        ^^ constant.other.placeholder.davi
//                                                                          ^ - constant.other.placeholder - punctuation
//                                                                           ^ punctuation.definition.placeholder.davi
//                                                                           ^^ constant.other.placeholder.davi
//                                                                             ^ - constant.other.placeholder - punctuation
//                                                                              ^ punctuation.definition.placeholder.davi
//                                                                              ^^ constant.other.placeholder.davi
//                                                                                ^ - constant.other.placeholder - punctuation
//                                                                                 ^ punctuation.definition.placeholder.davi
//                                                                                 ^^ constant.other.placeholder.davi
//                                                                                   ^ - constant.other.placeholder - punctuation
//                                                                                    ^ punctuation.definition.placeholder.davi
//                                                                                    ^^ constant.other.placeholder.davi
//                                                                                      ^ - constant.other.placeholder - punctuation
//                                                                                       ^ punctuation.definition.placeholder.davi
//                                                                                       ^^ constant.other.placeholder.davi
//                                                                                         ^ - constant.other.placeholder - punctuation
//                                                                                          ^ punctuation.definition.placeholder.davi
//                                                                                          ^^ constant.other.placeholder.davi
//                                                                                            ^ - constant.other.placeholder - punctuation
//                                                                                             ^ punctuation.definition.placeholder.davi
//                                                                                             ^^ constant.other.placeholder.davi
//                                                                                               ^ - constant.other.placeholder - punctuation
//                                                                                                ^ punctuation.definition.placeholder.davi
//                                                                                                ^^ constant.other.placeholder.davi
//                                                                                                  ^ - constant.other.placeholder - punctuation
//                                                                                                   ^ punctuation.definition.placeholder.davi
//                                                                                                   ^^ constant.other.placeholder.davi
//                                                                                                     ^ - constant.other.placeholder - punctuation
//                                                                                                      ^ punctuation.definition.placeholder.davi
//                                                                                                      ^^ constant.other.placeholder.davi
//                                                                                                        ^ - constant.other.placeholder - punctuation
//                                                                                                         ^ punctuation.definition.placeholder.davi
//                                                                                                         ^^ constant.other.placeholder.davi
//                                                                                                           ^ - constant.other.placeholder - punctuation
//                                                                                                            ^ punctuation.definition.placeholder.davi
//                                                                                                            ^^ constant.other.placeholder.davi
//                                                                                                              ^ - constant.other.placeholder - punctuation
//                                                                                                               ^ punctuation.definition.placeholder.davi
//                                                                                                               ^^ constant.other.placeholder.davi
//                                                                                                                 ^ - constant.other.placeholder - punctuation
//                                                                                                                  ^ punctuation.definition.placeholder.davi
//                                                                                                                  ^^ constant.other.placeholder.davi
//                                                                                                                    ^ - constant.other.placeholder - punctuation
//                                                                                                                     ^^ constant.other.placeholder.davi
//                                                                                                                       ^ - constant.other.placeholder - punctuation
//                                                                                                                        ^^ constant.other.placeholder.davi
//                                                                                                                          ^ - constant.other.placeholder - punctuation
//                                                                                                                           ^ punctuation.definition.placeholder.davi
//                                                                                                                           ^^ constant.other.placeholder.davi
//                                                                                                                             ^ - constant.other.placeholder - punctuation
//                                                                                                                              ^ punctuation.definition.placeholder.davi
//                                                                                                                              ^^ constant.other.placeholder.davi
//                                                                                                                                ^ - constant.other.placeholder - punctuation
//                                                                                                                                 ^^ constant.other.placeholder.davi
//                                                                                                                                   ^ - constant

    'foo "%'.urldecode($_REQUEST['searchterm']);
//  ^^^^^^^^ meta.string.davi string.quoted.single.davi - constant.other.placeholder
//          ^ keyword.operator.concatenation.davi
//           ^^^^^^^^^ support.function.url.davi

    '$a then $b->c or ${d} with {$e} then $f[0] followed by $g[$h] or $i[k] and finally {$l . $m->n . o}'
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.single.davi - meta.interpolation
//  ^ punctuation.definition.string.begin.davi
//                                                                                                      ^ punctuation.definition.string.end.davi

    `$a then $b->c or ${d} with {$e} then $f[0] followed by $g[$h] or $i[k] and finally {$l . $m->n . o}`
//  ^ meta.string.davi string.quoted.other.davi - meta.interpolation
//   ^^ meta.string.davi meta.interpolation.davi - string
//      ^^^^^ meta.string.davi string.quoted.other.davi - meta.interpolation
//           ^^^^^ meta.string.davi meta.interpolation.davi - string
//                ^^^^ meta.string.davi string.quoted.other.davi - meta.interpolation
//                    ^^^^ meta.string.davi meta.interpolation.davi - string
//                        ^^^^^^ meta.string.davi string.quoted.other.davi - meta.interpolation
//                              ^^^^ meta.string.davi meta.interpolation.davi - string
//                                  ^^^^^^ meta.string.davi string.quoted.other.davi - meta.interpolation
//                                        ^^^^^ meta.string.davi meta.interpolation.davi - string
//                                             ^^^^^^^^^^^^^ meta.string.davi string.quoted.other.davi - meta.interpolation
//                                                          ^^^^^^ meta.string.davi meta.interpolation.davi - string
//                                                                ^^^^ meta.string.davi string.quoted.other.davi - meta.interpolation
//                                                                    ^^^^^ meta.string.davi meta.interpolation.davi - string
//                                                                         ^^^^^^^^^^^^^ meta.string.davi string.quoted.other.davi - meta.interpolation
//                                                                                      ^^^^^^^^^^^^^^^^ meta.string.davi meta.interpolation.davi - string
//                                                                                                      ^ meta.string.davi string.quoted.other.davi - meta.interpolation
//                                                                                                       ^ - meta.string - string
//  ^ punctuation.definition.string.begin.davi
//   ^^ variable.other.davi
//   ^ punctuation.definition.variable.davi
//           ^^ variable.other.davi
//           ^ punctuation.definition.variable.davi
//             ^^ punctuation.accessor.arrow.davi
//               ^ variable.other.member.davi
//                    ^^^^ meta.interpolation.davi meta.variable.davi
//                    ^^ punctuation.definition.variable.begin.davi
//                      ^ constant.other.davi
//                       ^ punctuation.definition.variable.end.davi
//                              ^ punctuation.section.interpolation.begin.davi
//                               ^^ variable.other.davi
//                               ^ punctuation.definition.variable.davi
//                                 ^ punctuation.section.interpolation.end.davi
//                                        ^^ variable.other.davi
//                                        ^ punctuation.definition.variable.davi
//                                          ^ punctuation.section.brackets.begin.davi
//                                           ^ meta.number.integer.decimal constant.numeric.value.davi
//                                            ^ punctuation.section.brackets.end.davi
//                                                          ^^ variable.other.davi
//                                                          ^ punctuation.definition.variable.davi
//                                                            ^ punctuation.section.brackets.begin.davi
//                                                             ^^ variable.other.davi
//                                                             ^ punctuation.definition.variable.davi
//                                                               ^ punctuation.section.brackets.end.davi
//                                                                    ^^ variable.other.davi
//                                                                    ^ punctuation.definition.variable.davi
//                                                                      ^ punctuation.section.brackets.begin.davi
//                                                                       ^ constant.other.davi
//                                                                        ^ punctuation.section.brackets.end.davi
//                                                                                      ^ punctuation.section.interpolation.begin.davi
//                                                                                       ^^ variable.other.davi
//                                                                                       ^ punctuation.definition.variable.davi
//                                                                                          ^ keyword.operator.concatenation.davi
//                                                                                            ^^ variable.other.davi
//                                                                                            ^ punctuation.definition.variable.davi
//                                                                                              ^^ punctuation.accessor.arrow.davi
//                                                                                                ^ variable.other.member.davi
//                                                                                                  ^ keyword.operator.concatenation.davi
//                                                                                                    ^ constant.other.davi
//                                                                                                     ^ punctuation.section.interpolation.end.davi
//                                                                                                      ^ punctuation.definition.string.end.davi

    "$a then $b->c or ${d} with {$e} then $f[0] followed by $g[$h] or $i[k] and finally {$l . $m->n . o}"
//  ^ meta.string.davi string.quoted.double.davi - meta.interpolation
//   ^^ meta.string.davi meta.interpolation.davi - string
//      ^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//           ^^^^^ meta.string.davi meta.interpolation.davi - string
//                ^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                    ^^^^ meta.string.davi meta.interpolation.davi - string
//                        ^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                              ^^^^ meta.string.davi meta.interpolation.davi - string
//                                  ^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                                        ^^^^^ meta.string.davi meta.interpolation.davi - string
//                                             ^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                                                          ^^^^^^ meta.string.davi meta.interpolation.davi - string
//                                                                ^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                                                                    ^^^^^ meta.string.davi meta.interpolation.davi - string
//                                                                         ^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                                                                                      ^^^^^^^^^^^^^^^^ meta.string.davi meta.interpolation.davi - string
//                                                                                                      ^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                                                                                                       ^ - meta.string - string
//  ^ punctuation.definition.string.begin.davi
//   ^^ variable.other.davi
//   ^ punctuation.definition.variable.davi
//           ^^ variable.other.davi
//           ^ punctuation.definition.variable.davi
//             ^^ punctuation.accessor.arrow.davi
//               ^ variable.other.member.davi
//                    ^^^^ meta.interpolation.davi meta.variable.davi
//                    ^^ punctuation.definition.variable.begin.davi
//                      ^ constant.other.davi
//                       ^ punctuation.definition.variable.end.davi
//                              ^ punctuation.section.interpolation.begin.davi
//                               ^^ variable.other.davi
//                               ^ punctuation.definition.variable.davi
//                                 ^ punctuation.section.interpolation.end.davi
//                                        ^^ variable.other.davi
//                                        ^ punctuation.definition.variable.davi
//                                          ^ punctuation.section.brackets.begin.davi
//                                           ^ meta.number.integer.decimal constant.numeric.value.davi
//                                            ^ punctuation.section.brackets.end.davi
//                                                          ^^ variable.other.davi
//                                                          ^ punctuation.definition.variable.davi
//                                                            ^ punctuation.section.brackets.begin.davi
//                                                             ^^ variable.other.davi
//                                                             ^ punctuation.definition.variable.davi
//                                                               ^ punctuation.section.brackets.end.davi
//                                                                    ^^ variable.other.davi
//                                                                    ^ punctuation.definition.variable.davi
//                                                                      ^ punctuation.section.brackets.begin.davi
//                                                                       ^ constant.other.davi
//                                                                        ^ punctuation.section.brackets.end.davi
//                                                                                      ^ punctuation.section.interpolation.begin.davi
//                                                                                       ^^ variable.other.davi
//                                                                                       ^ punctuation.definition.variable.davi
//                                                                                          ^ keyword.operator.concatenation.davi
//                                                                                            ^^ variable.other.davi
//                                                                                            ^ punctuation.definition.variable.davi
//                                                                                              ^^ punctuation.accessor.arrow.davi
//                                                                                                ^ variable.other.member.davi
//                                                                                                  ^ keyword.operator.concatenation.davi
//                                                                                                    ^ constant.other.davi
//                                                                                                     ^ punctuation.section.interpolation.end.davi
//                                                                                                      ^ punctuation.definition.string.end.davi

// Won't work, outputs: This is { fantastic}
$great = 'fantastic';
echo "This is { $great}";
//   ^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//              ^^^^^^ meta.string.davi meta.interpolation.davi
//                    ^^ meta.string.davi string.quoted.double.davi
//              ^^^^^^ variable.other.davi
//              ^ punctuation.definition.variable.davi
//                     ^ punctuation.definition.string.end.davi
//                      ^ punctuation.terminator.statement.davi

// Works, outputs: This is fantastic
echo "This is {$great}";
//   ^^^^^^^^^ meta.string.davi string.quoted.double.davi
//            ^^^^^^^^ meta.string.davi meta.interpolation.davi
//                    ^ meta.string.davi string.quoted.double.davi
//            ^ punctuation.section.interpolation.begin.davi
//             ^^^^^^ variable.other.davi
//             ^ punctuation.definition.variable.davi
//                   ^ punctuation.section.interpolation.end.davi
//                    ^ punctuation.definition.string.end.davi
//                     ^ punctuation.terminator.statement.davi

// Works, outputs: This is fantastic, because constant `nice` is set to `great`
define('nice', "great");
echo "This is ${nice}";
//   ^^^^^^^^^ meta.string.davi string.quoted.double.davi
//            ^^^^^^^ meta.string.davi meta.interpolation.davi meta.variable.davi
//                   ^ meta.string.davi string.quoted.double.davi
//            ^^ punctuation.definition.variable.begin.davi
//              ^^^^ constant.other.davi
//                  ^ punctuation.definition.variable.end.davi
//                   ^ punctuation.definition.string.end.davi
//                    ^ punctuation.terminator.statement.davi

// Works
echo "This square is {$square->width}00 centimeters broad.";
//   ^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                   ^^^^^^^^^^^^^^^^ meta.string.davi meta.interpolation.davi
//                                   ^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                   ^ punctuation.section.interpolation.begin.davi
//                    ^^^^^^^ variable.other.davi
//                           ^^ punctuation.accessor.arrow.davi
//                             ^^^^^ variable.other.member.davi
//                                  ^ punctuation.section.interpolation.end.davi

// Works, quoted keys only work using the curly brace syntax
echo "This works: {$arr['key']}";
//   ^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                ^^^^^^^^^^^^^ meta.string.davi meta.interpolation.davi
//                             ^ meta.string.davi string.quoted.double.davi
//                ^ punctuation.section.interpolation.begin.davi
//                 ^^^^ variable.other.davi
//                 ^ punctuation.definition.variable.davi
//                     ^^^^^^^ meta.item-access.davi
//                     ^ punctuation.section.brackets.begin.davi
//                      ^^^^^ meta.string.davi string.quoted.single.davi
//                      ^ punctuation.definition.string.begin.davi
//                          ^ punctuation.definition.string.end.davi
//                           ^ punctuation.section.brackets.end.davi
//                            ^ punctuation.section.interpolation.end.davi
//                             ^ punctuation.definition.string.end.davi
//                              ^ punctuation.terminator.statement.davi

// Works
echo "This works: {$arr[4][3]}";
//   ^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                ^^^^^^^^^^^^ meta.string.davi meta.interpolation.davi
//                            ^ meta.string.davi string.quoted.double.davi
//                ^ punctuation.section.interpolation.begin.davi
//                 ^^^^ variable.other.davi
//                 ^ punctuation.definition.variable.davi
//                     ^^^^^^ meta.item-access.davi
//                     ^ punctuation.section.brackets.begin.davi
//                      ^ meta.number.integer.decimal.davi constant.numeric.value.davi
//                       ^ punctuation.section.brackets.end.davi
//                        ^ punctuation.section.brackets.begin.davi
//                         ^ meta.number.integer.decimal.davi constant.numeric.value.davi
//                          ^ punctuation.section.brackets.end.davi
//                           ^ punctuation.section.interpolation.end.davi
//                            ^ punctuation.definition.string.end.davi
//                             ^ punctuation.terminator.statement.davi

// This is wrong for the same reason as $foo[bar] is wrong  outside a string.
// In other words, it will still work, but only because DAVI first looks for a
// constant named foo; an error of level E_NOTICE (undefined constant) will be
// thrown.
echo "This is wrong: {$arr[foo][3]}";
//   ^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                   ^^^^^^^^^^^^^^ meta.string.davi meta.interpolation.davi
//                                 ^ meta.string.davi string.quoted.double.davi
//                   ^ punctuation.section.interpolation.begin.davi
//                    ^^^^ variable.other.davi
//                    ^ punctuation.definition.variable.davi
//                        ^^^^^^^^ meta.item-access.davi
//                        ^ punctuation.section.brackets.begin.davi
//                         ^^^ constant.other.davi
//                            ^ punctuation.section.brackets.end.davi
//                             ^ punctuation.section.brackets.begin.davi
//                              ^ meta.number.integer.decimal.davi constant.numeric.value.davi
//                               ^ punctuation.section.brackets.end.davi
//                                ^ punctuation.section.interpolation.end.davi
//                                 ^ punctuation.definition.string.end.davi
//                                  ^ punctuation.terminator.statement.davi

// Works. When using multi-dimensional arrays, always use braces around arrays
// when inside of strings
echo "This works: {$arr['foo'][3]}";
//   ^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                ^^^^^^^^^^^^^^^^ meta.string.davi meta.interpolation.davi
//                                ^ meta.string.davi string.quoted.double.davi
//                ^ punctuation.section.interpolation.begin.davi
//                 ^^^^ variable.other.davi
//                 ^ punctuation.definition.variable.davi
//                     ^^^^^^^^^^ meta.item-access.davi
//                     ^ punctuation.section.brackets.begin.davi
//                      ^^^^^ meta.string.davi string.quoted.single.davi
//                      ^ punctuation.definition.string.begin.davi
//                          ^ punctuation.definition.string.end.davi
//                           ^ punctuation.section.brackets.end.davi
//                            ^ punctuation.section.brackets.begin.davi
//                             ^ meta.number.integer.decimal.davi constant.numeric.value.davi
//                              ^ punctuation.section.brackets.end.davi
//                               ^ punctuation.section.interpolation.end.davi
//                                ^ punctuation.definition.string.end.davi
//                                 ^ punctuation.terminator.statement.davi

// Works.
echo "This works: " . $arr['foo'][3];
//   ^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                 ^^^^^^^^^^^^^^^^^^^ - string.quoted.double
//                  ^ keyword.operator.concatenation.davi
//                    ^^^^ variable.other.davi
//                    ^ punctuation.definition.variable.davi
//                        ^^^^^^^^^^ meta.item-access.davi
//                        ^ punctuation.section.brackets.begin.davi
//                         ^^^^^ meta.string.davi string.quoted.single.davi
//                         ^ punctuation.definition.string.begin.davi
//                             ^ punctuation.definition.string.end.davi
//                              ^ punctuation.section.brackets.end.davi
//                               ^ punctuation.section.brackets.begin.davi
//                                ^ meta.number.integer.decimal.davi constant.numeric.value.davi
//                                 ^ punctuation.section.brackets.end.davi
//                                  ^ punctuation.terminator.statement.davi

echo "This works too: {$obj->values[3]->name}";
//   ^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                    ^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi meta.interpolation.davi - string
//                                           ^ meta.string.davi string.quoted.double.davi
//                    ^ punctuation.section.interpolation.begin.davi
//                     ^^^^ variable.other.davi
//                     ^ punctuation.definition.variable.davi
//                         ^^ punctuation.accessor.arrow.davi
//                           ^^^^^^ variable.other.member.davi
//                                 ^^^ meta.item-access.davi
//                                 ^ punctuation.section.brackets.begin.davi
//                                  ^ constant.numeric.value.davi
//                                   ^ punctuation.section.brackets.end.davi
//                                    ^^ punctuation.accessor.arrow.davi
//                                      ^^^^ variable.other.member.davi
//                                          ^ punctuation.section.interpolation.end.davi
//                                           ^ punctuation.definition.string.end.davi
//                                            ^ punctuation.terminator.statement.davi

echo "This is the value of the var named $name: {${$name}}";
//   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                                       ^^^^^ meta.string.davi meta.interpolation.davi
//                                            ^^ meta.string.davi string.quoted.double.davi
//                                              ^ meta.string.davi meta.interpolation.davi
//                                               ^^^^^^^^ meta.string.davi meta.interpolation.davi meta.variable.davi
//                                                       ^ meta.string.davi meta.interpolation.davi
//                                                        ^ meta.string.davi string.quoted.double.davi
//                                       ^^^^^ variable.other.davi
//                                       ^ punctuation.definition.variable.davi
//                                              ^ punctuation.section.interpolation.begin.davi
//                                               ^^ punctuation.definition.variable.begin.davi
//                                                 ^^^^^ variable.other.davi
//                                                 ^ punctuation.definition.variable.davi
//                                                      ^ punctuation.definition.variable.end.davi
//                                                       ^ punctuation.section.interpolation.end.davi
//                                                        ^ punctuation.definition.string.end.davi
//                                                         ^ punctuation.terminator.statement.davi

echo "This is the value of the var named by the return value of getName(): {${getName()}}";
//   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                                                                         ^ meta.interpolation.davi - meta.variable
//                                                                          ^^^^^^^^^^^^ meta.string.davi meta.interpolation.davi meta.variable.davi
//                                                                                      ^ meta.string.davi meta.interpolation.davi - meta.variable
//                                                                                       ^ meta.string.davi string.quoted.double.davi
//                                                                         ^ punctuation.section.interpolation.begin.davi
//                                                                          ^^ punctuation.definition.variable.begin.davi
//                                                                            ^^^^^^^ variable.function.davi
//                                                                                   ^ punctuation.section.group.begin.davi
//                                                                                    ^ punctuation.section.group.end.davi
//                                                                                     ^ punctuation.definition.variable.end.davi
//                                                                                      ^ punctuation.section.interpolation.end.davi
//                                                                                       ^ punctuation.definition.string.end.davi
//                                                                                        ^ punctuation.terminator.statement.davi

echo "This is the value of the var named by the return value of \$object->getName(): {${$object->getName()}}";
//   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                                                                                   ^ meta.interpolation.davi - meta.variable
//                                                                                    ^^^^^^^^^^^^^^^^^^^^^ meta.string.davi meta.interpolation.davi meta.variable.davi
//                                                                                                         ^ meta.string.davi meta.interpolation.davi - meta.variable
//                                                                                                          ^ meta.string.davi string.quoted.double.davi
//                                                              ^^ constant.character.escape.davi
//                                                                                   ^ punctuation.section.interpolation.begin.davi
//                                                                                    ^^ punctuation.definition.variable.begin.davi
//                                                                                      ^^^^^^^ variable.other.davi
//                                                                                      ^ punctuation.definition.variable.davi
//                                                                                             ^^ punctuation.accessor.arrow.davi
//                                                                                               ^^^^^^^ variable.function.davi
//                                                                                                      ^ punctuation.section.group.begin.davi
//                                                                                                       ^ punctuation.section.group.end.davi
//                                                                                                        ^ punctuation.definition.variable.end.davi
//                                                                                                         ^ punctuation.section.interpolation.end.davi
//                                                                                                          ^ punctuation.definition.string.end.davi
//                                                                                                           ^ punctuation.terminator.statement.davi

// Won't work, outputs: This is the return value of getName(): {getName()}
echo "This is the return value of getName(): {getName()}";
//   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation

// Won't work, outputs: C:\folder\{fantastic}.txt
echo "C:\folder\{$great}.txt"
//   ^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//               ^^^^^^ meta.string.davi meta.interpolation.davi variable.other.davi
//                     ^^^^^^ meta.string.davi string.quoted.double.davi

// Works, outputs: C:\folder\fantastic.txt
echo "C:\\folder\\{$great}.txt"
//   ^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi
//                ^^^^^^^^ meta.string.davi meta.interpolation.davi
//                        ^^^^^ meta.string.davi string.quoted.double.davi
//              ^^ constant.character.escape.davi
//                ^ punctuation.section.interpolation.begin.davi
//                 ^^^^^^ variable.other.davi
//                 ^ punctuation.definition.variable.davi
//                       ^ punctuation.section.interpolation.end.davi


/******************************************************************************
 * Regular Expression Tests
 *****************************************************************************/

    "/$a then $b->c or ${d} with {$e} then $f[0] followed by $g[$h] or $i[k] and finally {$l . $m->n . o}/"
//  ^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//    ^^ meta.string.davi meta.interpolation.davi - string
//       ^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//            ^^^^^ meta.string.davi meta.interpolation.davi - string
//                 ^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                     ^^^^ meta.string.davi meta.interpolation.davi - string
//                         ^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                               ^^^^ meta.string.davi meta.interpolation.davi - string
//                                   ^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                                         ^^^^^ meta.string.davi meta.interpolation.davi - string
//                                              ^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                                                           ^^^^^^ meta.string.davi meta.interpolation.davi - string
//                                                                 ^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                                                                     ^^^^^ meta.string.davi meta.interpolation.davi - string
//                                                                          ^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                                                                                       ^^^^^^^^^^^^^^^^ meta.string.davi meta.interpolation.davi - string
//                                                                                                       ^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                                                                                                         ^ - meta.string - string
//  ^ punctuation.definition.string.begin.davi
//   ^ punctuation.definition.string.regex-delimiter.begin.davi
//    ^^ variable.other.davi
//    ^ punctuation.definition.variable.davi
//            ^^ variable.other.davi
//            ^ punctuation.definition.variable.davi
//              ^^ punctuation.accessor.arrow.davi
//                ^ variable.other.member.davi
//                     ^^^^ meta.interpolation.davi meta.variable.davi
//                     ^^ punctuation.definition.variable.begin.davi
//                       ^ constant.other.davi
//                        ^ punctuation.definition.variable.end.davi
//                               ^ punctuation.section.interpolation.begin.davi
//                                ^^ variable.other.davi
//                                ^ punctuation.definition.variable.davi
//                                  ^ punctuation.section.interpolation.end.davi
//                                         ^^ variable.other.davi
//                                         ^ punctuation.definition.variable.davi
//                                           ^ punctuation.section.brackets.begin.davi
//                                            ^ meta.number.integer.decimal constant.numeric.value.davi
//                                             ^ punctuation.section.brackets.end.davi
//                                                           ^^ variable.other.davi
//                                                           ^ punctuation.definition.variable.davi
//                                                             ^ punctuation.section.brackets.begin.davi
//                                                              ^^ variable.other.davi
//                                                              ^ punctuation.definition.variable.davi
//                                                                ^ punctuation.section.brackets.end.davi
//                                                                     ^^ variable.other.davi
//                                                                     ^ punctuation.definition.variable.davi
//                                                                       ^ punctuation.section.brackets.begin.davi
//                                                                        ^ constant.other.davi
//                                                                         ^ punctuation.section.brackets.end.davi
//                                                                                       ^ punctuation.section.interpolation.begin.davi
//                                                                                        ^^ variable.other.davi
//                                                                                        ^ punctuation.definition.variable.davi
//                                                                                           ^ keyword.operator.concatenation.davi
//                                                                                             ^^ variable.other.davi
//                                                                                             ^ punctuation.definition.variable.davi
//                                                                                               ^^ punctuation.accessor.arrow.davi
//                                                                                                 ^ variable.other.member.davi
//                                                                                                   ^ keyword.operator.concatenation.davi
//                                                                                                     ^ constant.other.davi
//                                                                                                      ^ punctuation.section.interpolation.end.davi
//                                                                                                       ^ punctuation.definition.string.regex-delimiter.end.davi
//                                                                                                        ^ punctuation.definition.string.end.davi

preg_replace('/[a-zSOME_CHAR]*+\'\n  $justTxt  \1  \\1/m');
//           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.single.davi
//            ^ punctuation.definition.string.regex-delimiter.begin
//             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.regexp
//             ^ punctuation.definition.character-class.begin.regexp
//              ^^^ constant.other.character-class.range.regexp
//                 ^^^^^^^^^ constant.other.character-class.set.regexp
//                          ^ punctuation.definition.character-class.end.regexp
//                           ^^ keyword.operator.quantifier
//                             ^^^^ constant.character.escape
//                                   ^ keyword.control.anchor.regexp
//                                             ^^ keyword.other.back-reference.regexp
//                                                 ^^^ keyword.other.back-reference.regexp
//                                                    ^ punctuation.definition.string.regex-delimiter.end
//                                                     ^ meta.regex.modifier
//                                                      ^ string.quoted.single

preg_replace("/[a-zSOME_CHAR]*+\'\n  $variable  \1  \\1/m");
//           ^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//                                   ^^^^^^^^^ meta.string.davi meta.interpolation.davi - string
//                                            ^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//            ^ punctuation.definition.string.regex-delimiter.begin
//             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.regexp
//             ^ punctuation.definition.character-class.begin.regexp
//              ^^^ constant.other.character-class.range.regexp
//                 ^^^^^^^^^ constant.other.character-class.set.regexp
//                          ^ punctuation.definition.character-class.end.regexp
//                           ^^ keyword.operator.quantifier
//                             ^^^^ constant.character.escape
//                                   ^^^^^^^^^ variable.other.davi
//                                   ^ punctuation.definition.variable
//                                              ^^ constant.character.escape
//                                                  ^^ constant.character.escape
//                                                     ^ punctuation.definition.string.regex-delimiter.end
//                                                      ^ meta.regex.modifier
//                                                       ^ string.quoted.double

preg_replace("/^(?=foo)|(?>a|b|\s*)|(?im:toggle)(?#comment)$/uxS");
//            ^ punctuation.definition.string.regex-delimiter.begin
//             ^ keyword.control.anchor.regexp
//               ^^ constant.other.assertion.regexp meta.assertion.look-ahead.regexp
//                     ^ keyword.operator.or.regexp
//                       ^^ constant.other.assertion.regexp meta.assertion.atomic-group.regexp
//                          ^ keyword.operator.or.regexp
//                            ^ keyword.operator.or.regexp
//                             ^^ constant.character.character-class.regexp
//                               ^ keyword.operator.quantifier.regexp
//                                   ^^^^ keyword.other.option-toggle.regexp
//                                              ^^^^^^^^^^^ comment.block
//                                              ^ punctuation.definition.comment.begin.regexp
//                                                        ^ punctuation.definition.comment.end.regexp
//                                                         ^ keyword.control.anchor.regexp
//                                                          ^ punctuation.definition.string.regex-delimiter.end
//                                                           ^^^ meta.regex.modifier

preg_replace('/(?P<name>foo|bar)\g{name}\k<name>/');
//             ^ punctuation.definition.group.begin.regexp
//              ^^ constant.other.assertion.regexp
//                ^ punctuation.definition.group.capture.begin.regexp
//                 ^^^^ entity.name.other.group.regexp
//                         ^ keyword.operator.or.regexp
//                             ^ punctuation.definition.group.end.regexp
//                              ^^^ keyword.other.back-reference.named.regexp
//                                 ^^^^ entity.name.other.group.regexp
//                                     ^ keyword.other.back-reference.named.regexp
//                                      ^^^ keyword.other.back-reference.named.regexp
//                                         ^^^^ entity.name.other.group.regexp

preg_replace("/a{,6}b{3,}c{3,6}/");
//              ^^^^ keyword.operator.quantifier.regexp
//                   ^^^^ keyword.operator.quantifier.regexp
//                        ^^^^^ keyword.operator.quantifier.regexp

preg_replace("/test$,bar$/");
//                 ^ keyword.control.anchor.regexp
//                      ^ keyword.control.anchor.regexp

$regex = '/
    c{3,6}#this is comment/ux';
//   ^^^^^ keyword.operator.quantifier.regexp
//        ^^^^^^^^^^^^^^^^ comment.regexp
//                        ^^^ - comment.regexp
//                         ^^ meta.regex.modifier

$regex = '/
    c{3,6}#this is com/ment/ux';
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^ - comment.regexp

$regex = '/
    a{,6}
/ux';
// <- meta.string.davi string.quoted.single punctuation.definition.string.regex-delimiter.end
 // <- meta.string string.quoted.single meta.regex.modifier
//^ meta.string string.quoted.single meta.regex.modifier
// ^ meta.string string.quoted.single punctuation.definition.string.end

$regex = '/foo?/ux';
//            ^ keyword.operator.quantifier.regexp

$not_regex = 'foo?';
//               ^ string - source.regexp

$not_regex = '/foo?';
//                ^ string - source.regexp

$not_regex = '/foo/bar/'; // unescaped "/"
//           ^^^^^^^^^^^ string - source.regexp

// there is no "T" regex modifier
$not_regex = '/foo?/uTx';
//                ^ string - source.regexp


/******************************************************************************
 * Interpolation SQL String Tests
 *****************************************************************************/

$non_sql = "NO SELECT HIGHLIGHTING!";
//         ^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation - string string
//         ^ punctuation.definition.string.begin
//             ^ - source.sql
//                                 ^ punctuation.definition.string.end

$sql = "CREATE TABLE version";
//     ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.begin.davi - meta.interpolation - string string
//      ^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi - string.quoted.double.davi
//                          ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.end.davi - meta.interpolation - string string
//      ^^^^^^ keyword.other.create.sql

$sql = "
    CREATE TABLE `version`...
// ^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi - string.quoted.double.davi
//  ^^^^^^ keyword.other.create.sql
";

// Do not highlight plain SQL indicator as SQL
$sql = "SELECT";
//      ^^^^^^ - keyword.other.DML

$sql = "
    SELECT
//  ^^^^^^ keyword.other.DML
    *
    FROM users
    WHERE first_name = 'Eric'
";

$sql = "SELECT * FROM users WHERE first_name = 'Eric'";
//     ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.begin.davi - meta.interpolation - string string
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi - string.quoted.double.davi
//      ^ keyword.other.DML
//                                             ^^^^^^ string.quoted.single.sql
//                                                   ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.end.davi - meta.interpolation - string string

// Ensure we properly exist from SQL when hitting DAVI end-of-string
$sql = "SELECT * FROM users WHERE first_name = 'Eric";
//     ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.begin.davi - meta.interpolation - string string
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi - string.quoted.double.davi
//      ^ keyword.other.DML
//                                             ^^^^^ string.quoted.single.sql
//                                                  ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.end.davi - meta.interpolation - string string

$sql = "
    SELECT * FROM users WHERE first_name = 'Eric'
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi - string.quoted.double.davi
//  ^ keyword.other.DML
//                                         ^^^^^^ string.quoted.single.sql
";
// <- meta.string.davi string.quoted.double.davi punctuation.definition.string.end.davi - meta.interpolation - string string

$sql = "SELECT * FROM users where first_name = $user_name";
//     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi - meta.interpolation
//                                             ^^^^^^^^^^ meta.string.davi meta.interpolation.davi variable.other.davi - string
//                                                       ^ meta.string.davi - meta.interpolation

$sql = "SELECT * FROM users where first_name = '$user_name'";
//     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi - meta.interpolation
//                                              ^^^^^^^^^^ meta.string.davi meta.interpolation.davi variable.other.davi - string
//                                                        ^ meta.string.davi - meta.interpolation

$sql = "SELECT * FROM users where first_name = `$user_name`";
//     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi - meta.interpolation
//                                              ^^^^^^^^^^ meta.string.davi meta.interpolation.davi variable.other.davi - string
//                                                        ^ meta.string.davi - meta.interpolation

$sql = "SELECT * FROM users where first_name = %r{^$user_name}";
//     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi - meta.interpolation
//                                                 ^^^^^^^^^^ meta.string.davi meta.interpolation.davi variable.other.davi - string
//                                                           ^^ meta.string.davi - meta.interpolation

$sql = "SELECT * FROM users where first_name LIKE $user_name";
//     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi - meta.interpolation
//                                                ^^^^^^^^^^ meta.string.davi meta.interpolation.davi variable.other.davi - string
//                                                          ^ meta.string.davi - meta.interpolation

$sql = "SELECT * FROM users where first_name LIKE '$user_name'";
//     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi - meta.interpolation
//                                                 ^^^^^^^^^^ meta.string.davi meta.interpolation.davi variable.other.davi - string
//                                                           ^ meta.string.davi - meta.interpolation

$sql = "SELECT " . $col . "FROM $table WHERE ( first_name =" . $name . ")" ; . "GROUP BY" ;
//     ^ meta.string.davi - meta.interpolation
//      ^^^^^^^ meta.string.davi source.sql.embedded.davi
//             ^ meta.string.davi - meta.interpolation
//              ^^^^^^^^^^ - meta.string
//                        ^ meta.string.davi - meta.interpolation
//                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi
//                                                         ^ meta.string.davi - meta.interpolation
//                                                          ^^^^^^^^^^^ - meta.string
//                                                                     ^ meta.string.davi - meta.interpolation
//                                                                      ^ meta.string.davi source.sql.embedded.davi
//                                                                       ^ meta.string.davi - meta.interpolation
//                                                                        ^^^^^ - meta.string
//                                                                             ^^^^^^^^^^ meta.string.davi string.quoted.double.davi - meta.interpolation
//     ^ string.quoted.double.davi punctuation.definition.string.begin.davi
//      ^^^^^^ keyword.other.DML.sql
//             ^ string.quoted.double.davi punctuation.definition.string.end.davi
//               ^ keyword.operator.concatenation.davi
//                 ^^^^ variable.other.davi
//                      ^ keyword.operator.concatenation.davi
//                        ^ string.quoted.double.davi punctuation.definition.string.begin.davi
//                              ^^^^^^ variable.other.davi
//                                                         ^ string.quoted.double.davi punctuation.definition.string.end.davi
//                                                           ^ keyword.operator.concatenation.davi
//                                                             ^^^^^ variable.other.davi
//                                                                   ^ keyword.operator.concatenation.davi
//                                                                     ^ string.quoted.double.davi punctuation.definition.string.begin.davi
//                                                                       ^ string.quoted.double.davi punctuation.definition.string.end.davi
//                                                                         ^ punctuation.terminator.statement.davi
//                                                                           ^ keyword.operator.concatenation.davi
//                                                                                        ^ punctuation.terminator.statement.davi

$sql = "DROP TABLE foo";
//     ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.begin.davi
//      ^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi
//                    ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.end.davi

$sql = "IF NOT EXISTS CREATE TABLE foo";
//     ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.begin.davi
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi
//                                    ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.end.davi

$sql = "WITH RECURSION SELECT *";
//     ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.begin.davi
//      ^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi
//                             ^ meta.string.davi string.quoted.double.davi punctuation.definition.string.end.davi

$sql = "MERGE INTO ";
//      ^^^^^^^^^^^ source.sql.embedded.davi
//                 ^ punctuation.definition.string.end.davi
$sql = "BEGIN ";
//      ^^^^^^ source.sql.embedded.davi
//             ^ punctuation.terminator.statement.davi

/******************************************************************************
 * SQL String Tests without interpolation
 *****************************************************************************/

$non_sql = 'NO SELECT HIGHLIGHTING!';
//         ^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi string.quoted.single.davi - meta.interpolation - string string
//         ^ punctuation.definition.string.begin
//             ^ - source.sql
//                                 ^ punctuation.definition.string.end

$sql = 'SELECT * FROM users WHERE first_name = \'Eric\'';
//     ^ meta.string.davi string.quoted.single.davi punctuation.definition.string.begin.davi - meta.interpolation - string string
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi - string.quoted.single.davi
//      ^ keyword.other.DML
//                                             ^^^^^^^^ meta.string.sql string.quoted.single.sql
//                                             ^^ constant.character.escape.davi
//                                                   ^^ constant.character.escape.davi
//                                                     ^ meta.string.davi string.quoted.single.davi punctuation.definition.string.end.davi - meta.interpolation - string string

$sql = '
    SELECT * FROM users WHERE first_name = \'Eric\'
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi - string.quoted.single.davi
//  ^ keyword.other.DML
//                                         ^^ constant.character.escape.davi
';
// <- meta.string.davi string.quoted.single.davi punctuation.definition.string.end.davi - meta.interpolation - string string

$sql = 'SELECT ' . $col . 'FROM table WHERE ( first_name =' . $name . ')' ; . 'GROUP BY' ;
//     ^ meta.string.davi - meta.interpolation
//      ^^^^^^^ meta.string.davi source.sql.embedded.davi
//             ^ meta.string.davi - meta.interpolation
//              ^^^^^^^^^^ - meta.string
//                        ^ meta.string.davi - meta.interpolation
//                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi
//                                                        ^ meta.string.davi - meta.interpolation
//                                                         ^^^^^^^^^^^ - meta.string
//                                                                    ^ meta.string.davi - meta.interpolation
//                                                                     ^ meta.string.davi source.sql.embedded.davi
//                                                                      ^ meta.string.davi - meta.interpolation
//                                                                       ^^^^^ - meta.string
//                                                                            ^^^^^^^^^^ meta.string.davi string.quoted.single.davi - meta.interpolation
//     ^ string.quoted.single.davi punctuation.definition.string.begin.davi
//      ^^^^^^ keyword.other.DML.sql
//             ^ string.quoted.single.davi punctuation.definition.string.end.davi
//               ^ keyword.operator.concatenation.davi
//                 ^^^^ variable.other.davi
//                      ^ keyword.operator.concatenation.davi
//                        ^ string.quoted.single.davi punctuation.definition.string.begin.davi
//                                                        ^ string.quoted.single.davi punctuation.definition.string.end.davi
//                                                          ^ keyword.operator.concatenation.davi
//                                                            ^^^^^ variable.other.davi
//                                                                  ^ keyword.operator.concatenation.davi
//                                                                    ^ string.quoted.single.davi punctuation.definition.string.begin.davi
//                                                                      ^ string.quoted.single.davi punctuation.definition.string.end.davi
//                                                                        ^ punctuation.terminator.statement.davi
//                                                                          ^ keyword.operator.concatenation.davi
//                                                                                       ^ punctuation.terminator.statement.davi

$sql = 'DROP TABLE foo';
//     ^ meta.string.davi string.quoted.single.davi punctuation.definition.string.begin.davi
//      ^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi
//                    ^ meta.string.davi string.quoted.single.davi punctuation.definition.string.end.davi

$sql = 'IF NOT EXISTS CREATE TABLE foo';
//     ^ meta.string.davi string.quoted.single.davi punctuation.definition.string.begin.davi
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi
//                                    ^ meta.string.davi string.quoted.single.davi punctuation.definition.string.end.davi

$sql = 'WITH RECURSION SELECT *';
//     ^ meta.string.davi string.quoted.single.davi punctuation.definition.string.begin.davi
//      ^^^^^^^^^^^^^^^^^^^^^^^ meta.string.davi source.sql.embedded.davi
//                             ^ meta.string.davi string.quoted.single.davi punctuation.definition.string.end.davi


/******************************************************************************
 * HEREDOC Tests
 *****************************************************************************/

echo <<<EOT
//   ^^^ keyword.operator.heredoc
//      ^^^ meta.string.heredoc meta.tag.heredoc - meta.string meta.string
//      ^^^ entity.name.tag.heredoc

This is a $var
//^^^^^^^^^^^^^ - meta.string meta.string
//^^^^^^^^ meta.string.heredoc.davi string.unquoted.heredoc - meta.interpolation
//        ^^^^ meta.string.heredoc.davi meta.interpolation.davi variable.other.davi - string
//            ^ meta.string.heredoc.davi string.unquoted.heredoc.davi - meta.interpolation

This is an $array[0][ 1 ]->item[ get_index ( 1 + $idx [0] ) ]
//         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.interpolation.davi - string
//               ^^^^^^^^ meta.item-access.davi
//                             ^^^^^^^^^^^^ meta.item-access.davi - meta.function-call - meta.group
//                                         ^^^^^^ meta.string.heredoc.davi string.unquoted.heredoc.davi - meta.interpolation
//                                               ^^^^ meta.string.heredoc.davi meta.interpolation.davi variable.other.davi - string
//                                                   ^^^^^^^^^ meta.string.heredoc.davi string.unquoted.heredoc.davi - meta.interpolation
//         ^^^^^^ variable.other.davi
//               ^ punctuation.section.brackets.begin.davi
//                ^ meta.number.integer.decimal.davi constant.numeric.value.davi
//                 ^ punctuation.section.brackets.end.davi
//                  ^ punctuation.section.brackets.begin.davi
//                    ^ meta.number.integer.decimal.davi constant.numeric.value.davi
//                      ^ punctuation.section.brackets.end.davi
//                       ^^ punctuation.accessor.arrow.davi
//                         ^^^^ variable.other.member.davi
//                             ^ punctuation.section.brackets.begin.davi
//                               ^^^^^^^^^ constant.other.davi - variable.function
//                                         ^ - punctuation.section.group
//                                           ^ - constant.numeric
//                                             ^ - keyword.operator
//                                               ^^^^ variable.other.davi

This is an $array [0][ 1 ]->item[ 1 + $var ]
//^^^^^^^^^ meta.string.heredoc.davi string.unquoted.heredoc.davi - meta.interpolation
//         ^^^^^^ meta.interpolation.davi variable.other.davi - string
//               ^^^^^^^^^^^^^^^^^^^^^ meta.string.heredoc.davi string.unquoted.heredoc.davi - meta.interpolation
//                                    ^^^^ meta.interpolation.davi variable.other.davi - string
//                                        ^^^ meta.string.heredoc.davi string.unquoted.heredoc.davi - meta.interpolation

This is an $array[0][ 1 ] ->item[ 1 + $var ]
//^^^^^^^^^ meta.string.heredoc.davi string.unquoted.heredoc.davi - meta.interpolation
//         ^^^^^^^^^^^^^^ meta.interpolation.davi - string
//                       ^^^^^^^^^^^^^ meta.string.heredoc.davi string.unquoted.heredoc.davi - meta.interpolation
//                                    ^^^^ meta.interpolation.davi variable.other.davi - string
//                                        ^^^ meta.string.heredoc.davi string.unquoted.heredoc.davi - meta.interpolation

This is not an $obj->no_method() call.
//^^^^^^^^^^^^^ meta.string.heredoc.davi string.unquoted.heredoc.davi - meta.interpolation
//             ^^^^^^^^^^^^^^^ meta.string.heredoc.davi meta.interpolation.davi
//             ^^^^ variable.other.davi
//                 ^^ punctuation.accessor.arrow.davi
//                   ^^^^^^^^^ variable.other.member.davi
//                            ^^^^^^^^^ meta.string.heredoc.davi string.unquoted.heredoc.davi - meta.interpolation
EOT;
// <- entity.name.tag.heredoc

// DAVI 7.3: Flexible Heredoc and Nowdoc Syntaxes
// see https://wiki.davi.net/rfc/flexible_heredoc_nowdoc_syntaxes
echo <<<EOT
//   ^^^ keyword.operator.heredoc
//      ^^^ meta.string.heredoc meta.tag.heredoc - meta.string meta.string
//      ^^^ entity.name.tag.heredoc
    $var
    EOT;
//  ^^^ entity.name.tag.heredoc
//     ^ punctuation.terminator.statement
//      ^ meta.heredoc-end

echo <<<'EOT'
//   ^^^ keyword.operator.heredoc
//      ^ punctuation.definition.tag.begin
//      ^^^^^ meta.string.heredoc meta.tag.heredoc
//       ^^^ entity.name.tag.heredoc
This is a test! $var
//^^^^^^^^^^^^^^^^^^ string.unquoted.heredoc - meta.string meta.string
//              ^^^^ - variable.other
EOT;
// <- entity.name.tag.heredoc

echo <<<HTML
//   ^^^ keyword.operator.heredoc
//      ^^^^ meta.string.heredoc meta.tag.heredoc
//      ^^^^ entity.name.tag.heredoc
This is a test!
<div class="foo-bar"></div>
//^^^^^^^^^^^^^^^^^^^^^^^^^ meta.embedded.html text.html
// <- punctuation.definition.tag.begin
//^^ entity.name.tag.block
//   ^^^^^ entity.other.attribute-name
//         ^^^^^^^^^ string.quoted.double
HTML;
// <- entity.name.tag.heredoc
//  ^ punctuation.terminator.statement
//   ^ meta.heredoc-end

echo <<< JAVASCRIPT
//   ^^^ keyword.operator.heredoc
//       ^^^^^^^^^^ meta.string.heredoc meta.tag.heredoc
//       ^^^^^^^^^^ entity.name.tag.heredoc
var foo = 1;
//^^^^^^^^^^ meta.embedded.js source.js
// <- keyword.declaration
//  ^^^ variable.other.readwrite
//        ^ constant.numeric
$var
// <- variable.other.davi
//^^ variable.other.davi
    ($var)
//   ^^^^ variable.other.davi
JAVASCRIPT;
// <- entity.name.tag.heredoc
//        ^ punctuation.terminator.statement
//         ^ meta.heredoc-end

echo <<<CSS
//   ^^^ keyword.operator.heredoc
//      ^^^ meta.string.heredoc meta.tag.heredoc
//      ^^^ entity.name.tag.heredoc
h2 {font-family: 'Arial';}
//^^^^^^^^^^^^^^^^^^^^^^^^ meta.embedded.css source.css
// <- entity.name.tag
// ^ punctuation.section.block
//               ^^^^^^^ string.quoted.single
h3 {font-size: "$h3_size";}
//              ^^^^^^^^ variable.other.davi
CSS;
// <- entity.name.tag.heredoc
// ^ punctuation.terminator.statement
//  ^ meta.heredoc-end

echo <<< yml
//   ^^^ keyword.operator.heredoc
//       ^^^ meta.string.heredoc meta.tag.heredoc
//       ^^^ entity.name.tag.heredoc
one: two
//^^^^^^ meta.embedded.yaml source.yaml
//^ meta.mapping.key string
// ^       punctuation.separator.key-value.mapping
//   ^^^ string
three: "$four"
//^^^^^^^^^^^^ meta.embedded.yaml source.yaml
//^^^ meta.mapping.key string
//   ^ punctuation.separator.key-value
//     ^ meta.string.yaml string.quoted.double.yaml punctuation.definition.string.begin.yaml
//      ^^^^^ meta.string.yaml meta.interpolation.davi variable.other.davi - string
Yml;
// <- meta.embedded.yaml source.yaml string.unquoted.plain.out.yaml
//^^ meta.embedded.yaml source.yaml string.unquoted.plain.out.yaml
yml;
// <- entity.name.tag.heredoc
// ^ punctuation.terminator.statement
//  ^ meta.heredoc-end

echo <<<sql
//   ^^^ keyword.operator.heredoc
//      ^^^ meta.string.heredoc meta.tag.heredoc
//      ^^^ entity.name.tag.heredoc
SELECT * FROM users WHERE first_name = 'John' LIMIT $limit
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.embedded.sql source.sql.embedded.davi
// <- keyword.other.DML
//     ^ constant.other.wildcard.asterisk
//                                     ^^^^^^ string.quoted.single
//                                                  ^^^^^^ variable.other.davi
sql;
// <- entity.name.tag.heredoc
// ^ punctuation.terminator.statement
//  ^ meta.heredoc-end


echo <<<'SQL'
//   ^^^ keyword.operator.heredoc
//      ^ punctuation.definition.tag.begin
//      ^^^^^ meta.string.heredoc meta.tag.heredoc
//       ^^^ entity.name.tag.heredoc
SELECT * FROM users WHERE first_name = 'John'\n
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.embedded.sql source.sql.embedded.davi
// <- keyword.other.DML
//     ^ constant.other.wildcard.asterisk
//                                     ^^^^^^ string.quoted.single
//                                           ^^ - constant.character.escape.davi
SQL;
// <- entity.name.tag.heredoc
// ^ punctuation.terminator.statement
//  ^ meta.heredoc-end


/******************************************************************************
 * HTML Output Tests
 *****************************************************************************/

class OutputsHtml {
    function embedHtml() {
        if (1) {
//             ^ meta.function meta.block punctuation.section.block.begin
        }
//      ^ meta.function meta.block punctuation.section.block.end
        else {
//           ^ meta.function meta.block punctuation.section.block.begin
            ?>
//          ^^ meta.embedded punctuation.section.embedded.end - source.davi
//            ^ meta.embedded meta.html-newline-after-davi - punctuation.section.embedded - source.davi
            <span></span>
//          ^^^^^^ meta.tag - source.davi
            <?
//          ^^ meta.embedded punctuation.section.embedded.begin
        }
//      ^ meta.function meta.block punctuation.section.block.end
        ?>
//      ^^ meta.embedded punctuation.section.embedded.end - source.davi
//        ^ meta.embedded meta.html-newline-after-davi - punctuation.section.embedded - source.davi

        <div class="acf-gallery-side-info acf-cf<?davi if (true) { echo ' class-name'; } ?>" id="myid"></div>
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.tag
//      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ - source.davi
//           ^^^^^ meta.attribute-with-value
//                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.embedded.davi
//                                                                                        ^^^^^^^^^^^^^^^^^^ - source.davi
//                                              ^^^^^ punctuation.section.embedded.begin - source.davi
//                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.davi
//                                                                                      ^^ punctuation.section.embedded.end - source.davi
//                                                                                          ^^^^^^^^^ meta.attribute-with-value
//                 ^ punctuation.definition.string.begin.html
//                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ string.quoted.double.html
//                                                                                        ^ punctuation.definition.string.end.html
        <?= var_dump($foo)
//      ^^^^^^^^^^^^^^^^^^ meta.embedded
//      ^^^ punctuation.section.embedded.begin - source.davi
//         ^^^^^^^^^^^^^^^ source.davi
        ?>
//      ^^ meta.embedded punctuation.section.embedded.end - source.davi
//        ^ meta.embedded meta.html-newline-after-davi - punctuation.section.embedded - source.davi

        <?davi
//      ^^^^^ meta.embedded punctuation.section.embedded.begin - source.davi
    }
}

function embedHtml() {
    if (1) {
//         ^ meta.function meta.block punctuation.section.block.begin
    }
//  ^ meta.function meta.block punctuation.section.block.end
    else {
//       ^ meta.function meta.block punctuation.section.block.begin
        ?>
//      ^^ meta.embedded.davi punctuation.section.embedded.end - source.davi
//        ^ meta.embedded.davi meta.html-newline-after-davi - punctuation.section.embedded.end
        <span></span>
//      ^^^^^^ meta.tag - source.davi
        <?
//      ^^ punctuation.section.embedded.begin - source.davi
    }
//  ^ meta.function meta.block punctuation.section.block.end

    $myClass = new class {
        function foo() {
            ?>
//          ^^ meta.embedded.davi punctuation.section.embedded.end - source.davi
//            ^ meta.embedded.davi meta.html-newline-after-davi - punctuation.section.embedded.end
            <div></div>
//          ^^^^^^^^^^^ meta.tag - source.davi
            <?
        }
    };

    $myClosure = function() use ($var) {
        ?>
        <div></div>
//      ^^^^^^^^^^^ meta.tag - source.davi
        <?
    };

    try {
        if (1) {
            if (1) {
                try {
// ^^^^^^^^^^^^^^^^^^ source.davi
                    ?>
//                  ^^ punctuation.section.embedded.end - source.davi

                    <div class="acf-gallery-side-info acf-cf<?davi if (true) { echo ' class-name'; } ?>" id="myid"></div>
//                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.tag
//                       ^^^^^^ meta.attribute-with-value - meta.string
//                             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.attribute-with-value meta.string.html string.quoted.double.html - meta.embedded - meta.interpolation - source.davi
//                             ^ punctuation.definition.string.begin.html
//                                                          ^^^^^ meta.attribute-with-value meta.string.html meta.embedded.davi punctuation.section.embedded.begin.davi - source.davi - string.quoted.double
//                                                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.attribute-with-value meta.string.html meta.embedded.davi source.davi - string.quoted.double
//                                                                                                  ^^ meta.attribute-with-value meta.string.html meta.embedded.davi punctuation.section.embedded.end.davi - source.davi - string.quoted.double
//                                                                                                    ^ meta.attribute-with-value meta.string.html string.quoted.double.html punctuation.definition.string.end.html - meta.embedded - meta.interpolation - source.davi
//                                                                                                     ^ - meta.attribute-with-value
//                                                                                                      ^^^^^^^^^ meta.attribute-with-value
//                                                                                                               ^ - meta.attribute-with-value
                    <?davi
//                  ^^^^^ punctuation.section.embedded.begin
//                       ^ source.davi
                } finally {
                    if (1) {
                        if (1) {
                            ?>
//                          ^^ punctuation.section.embedded.end
                            <div>
//                          ^^^^^ meta.tag - source.davi
                            </div>
                            <?
//                          ^^ punctuation.section.embedded.begin
                        }
                    }
                }
            }
        }
    } catch (Exception $e) {
//    ^^^^^^ meta.catch.davi
//          ^^^^^^^^^^^^^^ meta.catch.arguments.davi meta.group.davi
//    ^^^^^ keyword.control.exception.catch.davi
//          ^ punctuation.section.group.begin.davi
//           ^^^^^^^^^ support.class.builtin.davi
//                     ^^ variable.other.davi
//                       ^ punctuation.section.group.end.davi
//                         ^ punctuation.section.block.begin.davi
    }
//  ^ punctuation.section.block.end.davi
}
// <- punctuation.section.block.end.davi

?>

<div><?davi include 'image.svg' ?></div>
//                             ^^ punctuation.section.embedded.end.davi

// don't break davi termination highlighting after incomplete item-access expression
<?davi  { ?> <div> <? $var[9 + ?> </div> <? } ?>
//^^^^^^^^^ meta.embedded.davi
//         ^^^^^^^ - meta.embedded
//                ^^^^^^^^^^^^^^ meta.embedded.davi
//                              ^^^^^^^^ - meta.embedded
//                                      ^^^^^^^ meta.embedded.davi
//^^^^^ - meta.block
//     ^^ meta.block.davi - meta.block meta.block
//       ^^^^^^^^^^^ - meta.block
//                  ^^^^^^^^^^ meta.block.davi - meta.block meta.block
//                            ^^^^^^^^^^^^ - meta.block
//                                        ^^ meta.block.davi - meta.block meta.block
//                                          ^^^^ - meta.block
//     ^ punctuation.section.block.begin.davi
//       ^^ punctuation.section.embedded.end.davi
//          ^^^^^ meta.tag
//                ^^ punctuation.section.embedded.begin.davi
//                   ^^^^ variable.other.davi
//                       ^^^^^ meta.item-access
//                            ^^ punctuation.section.embedded.end.davi
//                               ^^^^^^ meta.tag
//                                      ^^ punctuation.section.embedded.begin.davi
//                                         ^ punctuation.section.block.end.davi
//                                           ^^ punctuation.section.embedded.end.davi

// don't break block termination highlighting after incomplete item-access expression
<?davi  { ?> <div> <? $var[9 + } ?> </div>
//^^^^^^^^^ meta.embedded.davi
//         ^^^^^^^ - meta.embedded
//                ^^^^^^^^^^^^^^^^ meta.embedded.davi
//                                ^^^^^^^^ - meta.embedded
//^^^^^ - meta.block
//     ^^ meta.block.davi - meta.block meta.block
//       ^^^^^^^^^^^ - meta.block
//                  ^^^^^^^^^^^ meta.block.davi - meta.block meta.block
//                             ^^^^^^^^^^^ - meta.block
//     ^ punctuation.section.block.begin.davi
//       ^^ punctuation.section.embedded.end.davi
//          ^^^^^ meta.tag
//                ^^ punctuation.section.embedded.begin.davi
//                   ^^^^ variable.other.davi
//                       ^^^^^ meta.item-access
//                            ^ punctuation.section.block.end.davi
//                              ^^ punctuation.section.embedded.end.davi
//                                 ^^^^^^ meta.tag

// don't break block termination highlighting after incomplete item-access expression
<?davi  { ?> <div> <? $var[9 + ; ?> </div> <? } } ?>
//^^^^^^^^^ meta.embedded.davi
//         ^^^^^^^ - meta.embedded
//                ^^^^^^^^^^^^^^^^ meta.embedded.davi
//                                ^^^^^^^^ - meta.embedded
//                                        ^^^^^^^ meta.embedded.davi
//^^^^^ - meta.block
//     ^^ meta.block.davi - meta.block meta.block
//       ^^^^^^^^^^^ - meta.block
//                  ^^^^^^^^^^^^ meta.block.davi - meta.block meta.block
//                              ^^^^^^^^^^^^ - meta.block
//                                          ^^ meta.block.davi - meta.block meta.block
//                                            ^^^^ - meta.block
//     ^ punctuation.section.block.begin.davi
//       ^^ punctuation.section.embedded.end.davi
//          ^^^^^ meta.tag
//                ^^ punctuation.section.embedded.begin.davi
//                   ^^^^ variable.other.davi
//                       ^^^^^ meta.item-access
//                            ^ punctuation.terminator.statement.davi
//                              ^^ punctuation.section.embedded.end.davi
//                                 ^^^^^^ meta.tag
//                                        ^^ punctuation.section.embedded.begin.davi
//                                           ^ punctuation.section.block.end.davi
//                                             ^ invalid.illegal.stray.davi
//                                               ^^ punctuation.section.embedded.end.davi

// don't break highlighting after incomplete catch parameter list
<?davi try { ?> <div> <? } catch(  ?> </div>
//^^^^^^^^^^^^ meta.embedded.davi
//            ^^^^^^^ - meta.embedded
//                   ^^^^^^^^^^^^^^^ meta.embedded.davi
//                                  ^^^^^^^^ - meta.embedded
//^^^^^^^^ - meta.block
//        ^^ meta.block.davi - meta.block meta.block
//          ^^^^^^^^^^^ - meta.block
//                     ^^ meta.block.davi - meta.block meta.block
//                       ^^^^^^ - meta.block - meta.group
//                             ^^^ meta.group - meta.block
//                                ^^^^^^^^^^ - meta.block - meta.group
//    ^^^ keyword.control.exception.try.davi
//        ^ punctuation.section.block.begin.davi
//          ^^ punctuation.section.embedded.end.davi
//             ^^^^^ meta.tag
//                   ^^ punctuation.section.embedded.begin.davi
//                      ^ punctuation.section.block.end.davi
//                        ^^^^^ keyword.control.exception.catch.davi
//                             ^ punctuation.section.group.begin.davi
//                                ^^ punctuation.section.embedded.end.davi
//                                   ^^^^^^ meta.tag

<div attr-<?= $bar ?>-true=va<? $baz ?>l?ue></div>
//   ^^^^^^^^^^^^^^^^^^^^^ entity.other.attribute-name
//        ^^^ punctuation.section.embedded.begin
//                 ^^ punctuation.section.embedded.end
//                         ^^ meta.string.html string.unquoted.html - meta.embedded
//                           ^^^^^^^^^^ meta.string.html meta.embedded.davi - string
//                                     ^^^^ meta.string.html string.unquoted.html - meta.embedded
//                           ^^ punctuation.section.embedded.begin.davi
//                                   ^^ punctuation.section.embedded.end.davi

<option<?davi if($condition): ?> selected<?davi endif; ?>></option>
//     ^^^^^ punctuation.section.embedded.begin
//                           ^^ punctuation.section.embedded.end
//                                      ^^^^^ punctuation.section.embedded.begin
//                                                   ^^ punctuation.section.embedded.end

  <tag-<?davi $bar ?>na<?davi $baz ?>me att<?davi $bar ?>rib=false />
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.tag.other.html
//^ punctuation.definition.tag.begin.html
// ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ entity.name.tag.other.html
//     ^^^^^ punctuation.section.embedded.begin.davi
//     ^^^^^^^^^^^^^ meta.embedded.davi
//                ^^ punctuation.section.embedded.end
//                    ^^^^^ punctuation.section.embedded.begin.davi
//                    ^^^^^^^^^^^^^ meta.embedded.davi
//                               ^^ punctuation.section.embedded.end
//                                    ^^^^^^^^^^^^^^^^^^^^^^^^^ meta.attribute-with-value.html
//                                    ^^^^^^^^^^^^^^^^^^^ entity.other.attribute-name.html
//                                       ^^^^^ punctuation.section.embedded.begin.davi
//                                       ^^^^^^^^^^^^^ meta.embedded.davi
//                                                  ^^ punctuation.section.embedded.end
//                                                              ^^ punctuation.definition.tag.end.html

  <tag<?davi $bar ?>na<?davi $baz ?>me att<?davi $bar ?>rib=false />
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.tag.other.html
//^ punctuation.definition.tag.begin.html
// ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ entity.name.tag.other.html
//    ^^^^^ punctuation.section.embedded.begin.davi
//    ^^^^^^^^^^^^^ meta.embedded.davi
//               ^^ punctuation.section.embedded.end
//                   ^^^^^ punctuation.section.embedded.begin.davi
//                   ^^^^^^^^^^^^^ meta.embedded.davi
//                              ^^ punctuation.section.embedded.end
//                                   ^^^^^^^^^^^^^^^^^^^^^^^^^ meta.attribute-with-value.html
//                                   ^^^^^^^^^^^^^^^^^^^ entity.other.attribute-name.html
//                                      ^^^^^ punctuation.section.embedded.begin.davi
//                                      ^^^^^^^^^^^^^ meta.embedded.davi
//                                                 ^^ punctuation.section.embedded.end
//                                                             ^^ punctuation.definition.tag.end.html

<tag <? echo $attr; ?> = <? echo $value; ?> >
//^^^ meta.tag - meta.attribute-with-value
//   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.tag meta.attribute-with-value.html
//                                         ^^ meta.tag - meta.attribute-with-value
//   ^^^^^^^^^^^^^^^^^ meta.embedded.davi
//                     ^ punctuation.separator.key-value.html
//                       ^^^^^^^^^^^^^^^^^^ meta.string.html meta.embedded.davi

<div class="test <?= $foo ?>"></div>
//   ^^^^^^^^^^^^^^^^^^^^^^^^ meta.attribute-with-value.class.html
//         ^ punctuation.definition.string.begin.html
//         ^^^^^^ meta.string.html - meta.embedded
//               ^^^^^^^^^^^ meta.string.html meta.embedded.davi
//                          ^ meta.string.html string.quoted.double.html - meta.embedded
//               ^^^ punctuation.section.embedded.begin - source.davi
//                  ^^^^^^ source.davi
//                   ^^^^ variable.other
//                        ^^ punctuation.section.embedded.end - source.davi
//                          ^ punctuation.definition.string.end.html
//                           ^ punctuation.definition.tag.end.html

<script>
//^^^^^^ text.html.davi meta.tag
    var foo = 4;
// ^^^^^^^^^^^^^^ source.js.embedded
//  ^ keyword.declaration
//      ^^^ variable.other.readwrite
//          ^ keyword.operator
//            ^ constant.numeric
    <?
//  ^^ punctuation.section.embedded.begin.davi
    if ($minimal_increase) {
// ^^^^^^^^^^^^^^^^^^^^^^^^^^ text.html.davi source.js.embedded source.davi.embedded.js
//     ^^^^^^^^^^^^^^^^^^^ meta.group.davi
//                         ^^ meta.block.davi
//  ^^ keyword.control.conditional.if.davi
//     ^ punctuation.section.group.begin.davi
//      ^^^^^^^^^^^^^^^^^ variable.other.davi
//                       ^ punctuation.section.group.end.davi
//                         ^ punctuation.section.block.begin.davi
        ?>
//     ^^^^ text.html.davi source.js.embedded
//     ^ source.davi.embedded.js meta.block.davi
//      ^^ punctuation.section.embedded.end.davi - source.davi
        foo += 1;
//      ^^^^^^^^^ source.js.embedded
//      ^^^ variable.other.readwrite
//          ^^ keyword.operator
//             ^ constant.numeric
        <?
//     ^^^^ text.html.davi source.js.embedded.html
//      ^^ punctuation.section.embedded.begin.davi - source.davi
//        ^ source.davi.embedded.js
    } else {
// ^^^^^^^^^^ text.html.davi source.js.embedded source.davi.embedded.js
//  ^ punctuation.section.block.end.davi
//    ^^^^ keyword.control.conditional.else.davi
//         ^ punctuation.section.block.begin.davi
        ?>
//     ^^^^ text.html.davi source.js.embedded
//     ^ source.davi.embedded.js meta.block.davi
//      ^^ punctuation.section.embedded.end.davi - source.davi
        foo *= 2;
//      ^^^^^^^^^ source.js.embedded
//      ^^^ variable.other.readwrite
//          ^^ keyword.operator
//             ^ constant.numeric
        <?
//     ^^^^ text.html.davi source.js.embedded.html
//      ^^ punctuation.section.embedded.begin.davi - source.davi
//        ^ source.davi.embedded.js
    }
// ^^^ text.html.davi source.js.embedded.html
//  ^ punctuation.section.block.end.davi
    ?>
// ^^^^ text.html.davi source.js.embedded
// ^ source.davi.embedded.js - meta.block
//  ^^ punctuation.section.embedded.end.davi - source.davi
</script>

 <script type="application/ld+json">
     {
         <? $key ?>: <? $SiteColor ?>,
     |  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.json.embedded.html
     |   ^^^^^^^^^^ meta.mapping.json meta.interpolation.davi
     |             ^^ meta.mapping.json - meta.interpolation
     |               ^^^^^^^^^^^^^^^^ meta.mapping.value.json meta.interpolation.davi
     |                               ^ meta.mapping.json - meta.interpolation

         "<? $key ?>": "<? $SiteColor ?>",
     |  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.json.embedded.html
     |   ^ meta.mapping.key.json string.quoted.double.json punctuation.definition.string.begin.json
     |    ^^^^^^^^^^ meta.mapping.key.json meta.interpolation.davi - string
     |              ^ meta.mapping.key.json string.quoted.double.json punctuation.definition.string.end.json
     |               ^^ meta.mapping.json - meta.interpolation
     |                 ^ meta.mapping.value.json meta.string.json string.quoted.double.json punctuation.definition.string.begin.json
     |                  ^^^^^^^^^^^^^^^^ meta.mapping.value.json meta.interpolation.davi - string
     |                                  ^ meta.mapping.value.json meta.string.json string.quoted.double.json punctuation.definition.string.end.json
     |                                   ^ meta.mapping.json - meta.interpolation
     }
 </script>

<style>
h1 {
    font-family: Arial;
// ^^^^^^^^^^^^^^^^^^^^^ text.html.davi source.css.embedded
//  ^^^^^^^^^^^ support.type.property-name
//               ^^^^^ string.unquoted

    <? if ($minimal_increase) { ?>
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ text.html.davi source.css.embedded meta.block.css meta.embedded.davi
//  ^^ - source.davi
//    ^^^^^^^^^^^^^^^^^^^^^^^^^^ source.davi.embedded.css
//                              ^^ - source.davi
//  ^^ punctuation.section.embedded.begin.davi
//     ^^ keyword.control.conditional.if.davi
//        ^ punctuation.section.group.begin.davi
//         ^^^^^^^^^^^^^^^^^ variable.other.davi
//                          ^ punctuation.section.group.end.davi
//                            ^ punctuation.section.block.begin.davi
//                              ^^ punctuation.section.embedded.end.davi

;       font-size: 2em;
//     ^^^^^^^^^^^^^^^^^ text.html.davi source.css.embedded
//      ^^^^^^^^^ support.type.property-name
//                 ^ constant.numeric
    <? } else { ?>
//  ^^^^^^^^^^^^^^ text.html.davi source.css.embedded meta.block.css meta.embedded.davi
//  ^^ - source.davi
//    ^^^^^^^^^^ source.davi.embedded.css
//              ^^ - source.davi
//  ^^ punctuation.section.embedded.begin.davi
//     ^ punctuation.section.block.end.davi
//       ^^^^ keyword.control.conditional.else.davi
//            ^ punctuation.section.block.begin.davi
//              ^^ punctuation.section.embedded.end.davi

;       font-size: 3em;
//     ^^^^^^^^^^^^^^^^^ text.html.davi source.css.embedded
//      ^^^^^^^^^ support.type.property-name
//                 ^ constant.numeric
    <? } ?>
//  ^^^^^^^ text.html.davi source.css.embedded meta.block.css meta.embedded.davi
//  ^^ - source.davi
//    ^^^ source.davi.embedded.css
//       ^^ - source.davi
//  ^^ punctuation.section.embedded.begin.davi
//     ^ punctuation.section.block.end.davi
//       ^^ punctuation.section.embedded.end.davi

}
// <- text.html.davi source.css.embedded punctuation.section.block.end.css

@counter-style <?davi $counter; ?> {}
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.at-rule.counter-style.css - meta.block
//                                ^^ meta.at-rule.counter-style.css meta.property-list.css meta.block.css
//^^^^^^^^^^^^ keyword.control.directive.css - punctuation
//             ^^^^^^^^^^^^^^^^^^ entity.other.counter-style-name.css meta.embedded.davi
//             ^^^^^ punctuation.section.embedded.begin.davi
//                  ^^^^^^^^^^^ source.davi.embedded.css
//                             ^^ punctuation.section.embedded.end.davi

@counter-style my-<?davi $counter; ?> {}
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ meta.at-rule.counter-style.css - meta.block
//                                   ^^ meta.at-rule.counter-style.css meta.property-list.css meta.block.css
//^^^^^^^^^^^^ keyword.control.directive.css - punctuation
//             ^^^ entity.other.counter-style-name.css - meta.embedded
//                ^^^^^^^^^^^^^^^^^^ entity.other.counter-style-name.css meta.embedded.davi
//                ^^^^^ punctuation.section.embedded.begin.davi
//                     ^^^^^^^^^^^ source.davi.embedded.css
//                                ^^ punctuation.section.embedded.end.davi

   .<? $selector ?> { <? $attr ?>: <? $value ?>; }
// ^^^^^^^^^^^^^^^^ source.css.embedded.html - meta.property-list - meta.block
//                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.css.embedded.html meta.property-list.css meta.block.css
// ^ meta.selector.css entity.other.attribute-name.class.css punctuation.definition.entity.css
//  ^^^^^^^^^^^^^^^ meta.selector.css entity.other.attribute-name.class.css meta.embedded.davi
//  ^^ punctuation.section.embedded.begin.davi
//    ^^^^^^^^^^^ source.davi.embedded.css
//               ^^ punctuation.section.embedded.end.davi
//                  ^ punctuation.section.block.begin.css
//                    ^^^^^^^^^^^ meta.property-name.css support.type.property-name.css meta.embedded.davi
//                    ^^ punctuation.section.embedded.begin.davi
//                      ^^^^^^^ source.davi.embedded.css
//                             ^^ punctuation.section.embedded.end.davi
//                               ^ punctuation.separator.key-value.css
//                                 ^^^^^^^^^^^^ meta.property-value.css meta.embedded.davi
//                                 ^^ punctuation.section.embedded.begin.davi
//                                   ^^^^^^^^ source.davi.embedded.css
//                                           ^^ punctuation.section.embedded.end.davi
//                                             ^ punctuation.terminator.rule.css
//                                               ^ punctuation.section.block.end.css

.my-<?davi echo $class;?>-name:my-<?davi echo $class;?>-class { my-<?davi echo $class;?>-name: black }
// <- meta.selector.css entity.other.attribute-name.class.css punctuation.definition.entity.css
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.css.embedded.html meta.selector.css
//                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.css.embedded.html meta.property-list.css meta.block.css
//^^ entity.other.attribute-name.class.css - meta.embedded.davi
//  ^^^^^^^^^^^^^^^^^^^^ entity.other.attribute-name.class.css meta.embedded.davi
//                      ^^^^^ entity.other.attribute-name.class.css - meta.embedded.davi
//                           ^ punctuation.definition.pseudo-class.css
//                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ entity.other.pseudo-class.css
//                                                          ^ punctuation.section.block.begin.css
//                                                            ^^^ meta.property-name.css support.type.property-name.css - meta.embedded
//                                                               ^^^^^^^^^^^^^^^^^^^^ meta.property-name.css support.type.property-name.css meta.embedded.davi
//                                                                                   ^^^^^ meta.property-name.css support.type.property-name.css - meta.embedded
</style>

<p style="color: <?davi echo "red" ?>">text</p>
//       ^ meta.attribute-with-value.style.html meta.string.html string.quoted.double.html punctuation.definition.string.begin.html - meta.interpolation
//        ^^^^^^^ meta.attribute-with-value.style.html meta.string.html meta.interpolation.html source.css.embedded.html - meta.embedded.davi
//               ^^^^^^^^^^^^^^^^^^^ meta.attribute-with-value.style.html meta.string.html meta.interpolation.html source.css.embedded.html meta.embedded.davi
//                                  ^ meta.attribute-with-value.style.html meta.string.html string.quoted.double.html punctuation.definition.string.end.html - meta.interpolation
//                                   ^ text.html.davi meta.tag.block.any.html punctuation.definition.tag.end.html

<p style='color: <?davi echo 'red' ?>'>text</p>
//       ^ meta.attribute-with-value.style.html meta.string.html string.quoted.single.html punctuation.definition.string.begin.html - meta.interpolation
//        ^^^^^^^ meta.attribute-with-value.style.html meta.string.html meta.interpolation.html source.css.embedded.html - meta.embedded.davi
//               ^^^^^^^^^^^^^^^^^^^ meta.attribute-with-value.style.html meta.string.html meta.interpolation.html source.css.embedded.html meta.embedded.davi
//                                  ^ meta.attribute-with-value.style.html meta.string.html string.quoted.single.html punctuation.definition.string.end.html - meta.interpolation
//                                   ^ text.html.davi meta.tag.block.any.html punctuation.definition.tag.end.html

<p onclick="foo(<?davi echo "red" ?>)">text</p>
//         ^ meta.attribute-with-value.event.html meta.string.html string.quoted.double.html punctuation.definition.string.begin.html - meta.interpolation
//          ^^^^^^^^^^^^^^^^^^^^^^^^ meta.attribute-with-value.event.html meta.string.html meta.interpolation.html source.js.embedded.html meta.function-call
//                                  ^ meta.attribute-with-value.event.html meta.string.html string.quoted.double.html punctuation.definition.string.end.html - meta.interpolation

<p onclick='foo(<?davi echo 'red' ?>)'>text</p>
//         ^ meta.attribute-with-value.event.html meta.string.html string.quoted.single.html punctuation.definition.string.begin.html - meta.interpolation
//          ^^^^^^^^^^^^^^^^^^^^^^^^ meta.attribute-with-value.event.html meta.string.html meta.interpolation.html source.js.embedded.html meta.function-call
//                                  ^ meta.attribute-with-value.event.html meta.string.html string.quoted.single.html punctuation.definition.string.end.html - meta.interpolation

<![CDATA[Text with <? $davi ?> interpolation.]]>
//       ^^^^^^^^^^ meta.tag.sgml.cdata.html meta.string.html string.unquoted.cdata.html
//                 ^^^^^^^^^^ meta.tag.sgml.cdata.html meta.string.html meta.embedded.davi - string
//                           ^^^^^^^^^^^^^^^ meta.tag.sgml.cdata.html meta.string.html string.unquoted.cdata.html

  <<?davi $tag ?> <?davi $attr ?>=<?davi $value ?> />
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ text.html.davi meta.tag.other.html
//^ punctuation.definition.tag.begin.html
// ^^^^^^^^^^^^^ entity.name.tag.other.html meta.embedded.davi
// ^^^^^ punctuation.section.embedded.begin.davi
//       ^^^^ variable.other.davi
//            ^^ punctuation.section.embedded.end.davi
//               ^^^^^^^^^^^^^^ meta.attribute-with-value.html entity.other.attribute-name.html meta.embedded.davi
//               ^^^^^ punctuation.section.embedded.begin.davi
//                     ^^^^^ variable.other.davi
//                           ^^ punctuation.section.embedded.end.davi
//                             ^ meta.attribute-with-value.html punctuation.separator.key-value.html
//                              ^^^^^^^^^^^^^^^ meta.attribute-with-value.html meta.string.html meta.embedded.davi
//                              ^^^^^ punctuation.section.embedded.begin.davi
//                                    ^^^^^^ variable.other.davi
//                                           ^^ punctuation.section.embedded.end.davi
//                                              ^^ punctuation.definition.tag.end.html

  <<? $tag ?> <? $attr ?>=<? $value ?> />
//^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ text.html.davi meta.tag.other.html
//^ punctuation.definition.tag.begin.html
// ^^^^^^^^^^ entity.name.tag.other.html meta.embedded.davi
// ^^ punctuation.section.embedded.begin.davi
//    ^^^^ variable.other.davi
//         ^^ punctuation.section.embedded.end.davi
//            ^^^^^^^^^^^ meta.attribute-with-value.html entity.other.attribute-name.html meta.embedded.davi
//            ^^ punctuation.section.embedded.begin.davi
//               ^^^^^ variable.other.davi
//                     ^^ punctuation.section.embedded.end.davi
//                       ^ meta.attribute-with-value.html punctuation.separator.key-value.html
//                        ^^^^^^^^^^^^ meta.attribute-with-value.html meta.string.html meta.embedded.davi
//                        ^^ punctuation.section.embedded.begin.davi
//                           ^^^^^^ variable.other.davi
//                                  ^^ punctuation.section.embedded.end.davi
//                                     ^^ punctuation.definition.tag.end.html

  <?davizzzz
//^^ punctuation.section.embedded.begin.davi
//  ^^^^^^^ constant.other.davi

  ?>
//^^ punctuation.section.embedded.end.davi

  <?davi
  <?davi
//^^^^^ punctuation.section.embedded.begin.davi
